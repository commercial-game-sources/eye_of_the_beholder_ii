!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(module,exports){module.exports=function(src){function log(error){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",error)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(src):"undefined"!=typeof eval?eval.call(null,src):log("EvalError: No eval function available")}catch(error){log(error)}}},function(module,exports){
/**
 * @license AngularJS v1.7.8
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(window){"use strict";var minErrConfig={objectMaxDepth:5,urlErrorParamsEnabled:!0};function errorHandlingConfig(config){if(!isObject(config))return minErrConfig;isDefined(config.objectMaxDepth)&&(minErrConfig.objectMaxDepth=isValidObjectMaxDepth(config.objectMaxDepth)?config.objectMaxDepth:NaN),isDefined(config.urlErrorParamsEnabled)&&isBoolean(config.urlErrorParamsEnabled)&&(minErrConfig.urlErrorParamsEnabled=config.urlErrorParamsEnabled)}function isValidObjectMaxDepth(maxDepth){return isNumber(maxDepth)&&maxDepth>0}function minErr(module,ErrorConstructor){ErrorConstructor=ErrorConstructor||Error;var url="https://errors.angularjs.org/1.7.8/",regex=url.replace(".","\\.")+"[\\s\\S]*",errRegExp=new RegExp(regex,"g");return function(){var paramPrefix,i,code=arguments[0],template=arguments[1],message="["+(module?module+":":"")+code+"] ",templateArgs=sliceArgs(arguments,2).map(function(arg){return toDebugString(arg,minErrConfig.objectMaxDepth)});if(message+=template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1);return index<templateArgs.length?templateArgs[index].replace(errRegExp,""):match}),message+="\n"+url+(module?module+"/":"")+code,minErrConfig.urlErrorParamsEnabled)for(i=0,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+i+"="+encodeURIComponent(templateArgs[i]);return new ErrorConstructor(message)}}var msie,jqLite,jQuery,angularModule,REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",hasOwnProperty=Object.prototype.hasOwnProperty,lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string},slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return!0;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&length-1 in obj||"function"==typeof obj.item)}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"!==key&&"length"!==key&&"name"!==key&&obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;j<jj;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):isRegExp(src)?dst[key]=new RegExp(src):src.nodeName?dst[key]=src.cloneNode(!0):isElement(src)?dst[key]=src.clone():(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}msie=window.document.documentMode;var isNumberNaN=Number.isNaN||function(num){return num!=num};function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return void 0===value}function isDefined(value){return void 0!==value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isArray(arr){return Array.isArray(arr)||arr instanceof Array}function isError(value){switch(toString.call(value)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return value instanceof Error}}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}noop.$inject=[],identity.$inject=[];var TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function includes(array,obj){return-1!==Array.prototype.indexOf.call(array,obj)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination,maxDepth){var obj,value,stackSource=[],stackDest=[];if(maxDepth=isValidObjectMaxDepth(maxDepth)?maxDepth:NaN,destination){if((value=destination)&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))||(obj=destination,"[object ArrayBuffer]"===toString.call(obj)))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");return isArray(destination)?destination.length=0:forEach(destination,function(value,key){"$$hashKey"!==key&&delete destination[key]}),stackSource.push(source),stackDest.push(destination),copyRecurse(source,destination,maxDepth)}return copyElement(source,maxDepth);function copyRecurse(source,destination,maxDepth){if(--maxDepth<0)return"...";var key,h=destination.$$hashKey;if(isArray(source))for(var i=0,ii=source.length;i<ii;i++)destination.push(copyElement(source[i],maxDepth));else if(isBlankObject(source))for(key in source)destination[key]=copyElement(source[key],maxDepth);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copyElement(source[key],maxDepth));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copyElement(source[key],maxDepth));return setHashKey(destination,h),destination}function copyElement(source,maxDepth){if(!isObject(source))return source;var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var needsRecurse=!1,destination=function(source){switch(toString.call(source)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new source.constructor(copyElement(source.buffer),source.byteOffset,source.length);case"[object ArrayBuffer]":if(!source.slice){var copied=new ArrayBuffer(source.byteLength);return new Uint8Array(copied).set(new Uint8Array(source)),copied}return source.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new source.constructor(source.valueOf());case"[object RegExp]":var re=new RegExp(source.source,source.toString().match(/[^/]*$/)[0]);return re.lastIndex=source.lastIndex,re;case"[object Blob]":return new source.constructor([source],{type:source.type})}if(isFunction(source.cloneNode))return source.cloneNode(!0)}(source);return void 0===destination&&(destination=isArray(source)?[]:Object.create(getPrototypeOf(source)),needsRecurse=!0),stackSource.push(source),stackDest.push(destination),needsRecurse?copyRecurse(source,destination,maxDepth):destination}}function simpleCompare(a,b){return a===b||a!=a&&b!=b}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!=o1&&o2!=o2)return!0;var length,key,keySet,t1=typeof o1;if(t1===typeof o2&&"object"===t1){if(!isArray(o1)){if(isDate(o1))return!!isDate(o2)&&simpleCompare(o1.getTime(),o2.getTime());if(isRegExp(o1))return!!isRegExp(o2)&&o1.toString()===o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;for(key in keySet=createMap(),o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet)&&"$"!==key.charAt(0)&&isDefined(o2[key])&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)===o2.length){for(key=0;key<length;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}var csp=function(){if(!isDefined(csp.rules)){var ngCspElement=window.document.querySelector("[ng-csp]")||window.document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-unsafe-eval"),noInlineStyle:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-inline-style")}}else csp.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return csp.rules},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(prefix=ngAttrPrefixes[i],el=window.document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name};function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=void 0:isWindow(value)?val="$WINDOW":value&&window.document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){if(!isUndefined(obj))return isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty)}function fromJson(json){return isString(json)?JSON.parse(json):json}var ALL_COLONS=/:/g;function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNumberNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset();return addDateMinutes(date,reverse*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}function startingTag(element){element=jqLite(element).clone().empty();var elemHtml=jqLite("<div></div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};return forEach((keyValue||"").split("&"),function(keyValue){var splitPoint,key,val;keyValue&&(key=keyValue=keyValue.replace(/\+/g,"%20"),-1!==(splitPoint=keyValue.indexOf("="))&&(key=keyValue.substring(0,splitPoint),val=keyValue.substring(splitPoint+1)),isDefined(key=tryDecodeURIComponent(key))&&(val=!isDefined(val)||tryDecodeURIComponent(val),hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val))}),obj}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}var ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"];var isAutoBootstrapAllowed=function(document){var script=document.currentScript;if(!script)return!0;if(!(script instanceof window.HTMLScriptElement||script instanceof window.SVGScriptElement))return!1;var attributes=script.attributes;return[attributes.getNamedItem("src"),attributes.getNamedItem("href"),attributes.getNamedItem("xlink:href")].every(function(src){if(!src)return!0;if(!src.value)return!1;var link=document.createElement("a");if(link.href=src.value,document.location.origin===link.origin)return!0;switch(link.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(window.document);function angularInit(element,bootstrap){var appElement,module,config={};if(forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement){if(!isAutoBootstrapAllowed)return void window.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");config.strictDi=null!==function(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config)}}function bootstrap(element,modules,config){isObject(config)||(config={});config=extend({strictDi:!1},config);var doBootstrap=function(){if((element=jqLite(element)).injector()){var tag=element[0]===window.document?"document":startingTag(element);throw ngMinErr("btstrpd","App already bootstrapped with this element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}(modules=modules||[]).unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name))return doBootstrap();window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var bindJQueryFired=!1;function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getBlockNodes(nodes){for(var blockNodes,node=nodes[0],endNode=nodes[nodes.length-1],i=1;node!==endNode&&(node=node.nextSibling);i++)(blockNodes||nodes[i]!==node)&&(blockNodes||(blockNodes=jqLite(slice.call(nodes,0,i))),blockNodes.push(node));return blockNodes||nodes}function createMap(){return Object.create(null)}function stringify(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=!hasCustomToString(value)||isArray(value)||isDate(value)?toJson(value):value.toString()}return value}var NODE_TYPE_ELEMENT=1,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11;function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src))for(var key in dst=dst||{},src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst||src}function toDebugString(obj,maxDepth){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":"string"!=typeof obj?function(obj,maxDepth){var seen=[];return isValidObjectMaxDepth(maxDepth)&&(obj=angular.copy(obj,null,maxDepth)),JSON.stringify(obj,function(key,val){if(isObject(val=toJsonReplacer(key,val))){if(seen.indexOf(val)>=0)return"...";seen.push(val)}return val})}(obj,maxDepth):obj}var version={full:"1.7.8",major:1,minor:7,dot:8,codeName:"enthusiastic-oblation"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1;JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var DASH_LOWERCASE_REGEXP=/-([a-z])/g,MS_HACK_REGEXP=/^-ms-/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite");function fnCamelCaseReplace(all,letter){return letter.toUpperCase()}function kebabToCamel(name){return name.replace(DASH_LOWERCASE_REGEXP,fnCamelCaseReplace)}var SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:-]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),(tmp=fragment.firstChild).textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var jqLiteContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))};function JQLite(element){if(element instanceof JQLite)return element;var argIsString,html,context,parsed;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!==element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,(html=element,context=context||window.document,(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[])):isFunction(element)?jqLiteReady(element):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){!onlyDescendants&&jqLiteAcceptsData(element)&&jqLite.cleanData([element]),element.querySelectorAll&&jqLite.cleanData(element.querySelectorAll("*"))}function isEmptyObject(obj){var name;for(name in obj)return!1;return!0}function removeIfEmptyData(element){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId],events=expandoStore&&expandoStore.events,data=expandoStore&&expandoStore.data;data&&!isEmptyObject(data)||events&&!isEmptyObject(events)||(delete jqCache[expandoId],element.ng339=void 0)}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle){if(type){var removeHandler=function(type){var listenerFns=events[type];isDefined(fn)&&arrayRemove(listenerFns||[],fn),isDefined(fn)&&listenerFns&&listenerFns.length>0||(element.removeEventListener(type,handle),delete events[type])};forEach(type.split(" "),function(type){removeHandler(type),MOUSE_EVENT_MAP[type]&&removeHandler(MOUSE_EVENT_MAP[type])})}else for(type in events)"$destroy"!==type&&element.removeEventListener(type,handle),delete events[type];removeIfEmptyData(element)}}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];expandoStore&&(name?delete expandoStore.data[name]:expandoStore.data={},removeIfEmptyData(element))}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=++jqId,expandoStore=jqCache[expandoId]={events:{},data:{},handle:void 0}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var prop,isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[kebabToCamel(key)]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[kebabToCamel(key)];for(prop in key)data[kebabToCamel(prop)]=key[prop]}}}function jqLiteHasClass(element,selector){return!!element.getAttribute&&(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function jqLiteRemoveClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),newClasses=existingClasses;forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),newClasses=newClasses.replace(" "+cssClass+" "," ")}),newClasses!==existingClasses&&element.setAttribute("class",trim(newClasses))}}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),newClasses=existingClasses;forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===newClasses.indexOf(" "+cssClass+" ")&&(newClasses+=cssClass+" ")}),newClasses!==existingClasses&&element.setAttribute("class",trim(newClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;i<length;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType===NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;i<ii;i++)if(isDefined(value=jqLite.data(element,names[i])))return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteReady(fn){function trigger(){window.document.removeEventListener("DOMContentLoaded",trigger),window.removeEventListener("load",trigger),fn()}"complete"===window.document.readyState?window.setTimeout(fn):(window.document.addEventListener("DOMContentLoaded",trigger),window.addEventListener("load",trigger))}var JQLitePrototype=JQLite.prototype={ready:jqLiteReady,toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;related&&(related===target||jqLiteContains.call(target,related))||handler.call(target,event)}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"===objType||"object"===objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:function(node){for(var key in jqCache[node.ng339])return!0;return!1},cleanData:function(nodes){for(var i=0,ii=nodes.length;i<ii;i++)jqLiteRemoveData(nodes[i]),jqLiteOff(nodes[i])}},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=function(name){return kebabToCamel(name.replace(MS_HACK_REGEXP,"ms-"))}(name),!isDefined(value))return element.style[name];element.style[name]=value},attr:function(element,name,value){var ret,nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&2!==nodeType&&nodeType!==NODE_TYPE_COMMENT&&element.getAttribute){var lowercasedName=lowercase(name),isBooleanAttr=BOOLEAN_ATTR[lowercasedName];if(!isDefined(value))return ret=element.getAttribute(name),isBooleanAttr&&null!==ret&&(ret=lowercasedName),null===ret?void 0:ret;null===value||!1===value&&isBooleanAttr?element.removeAttribute(name):element.setAttribute(name,isBooleanAttr?lowercasedName:value)}},prop:function(element,name,value){if(!isDefined(value))return element[name];element[name]=value},text:function(){return getText.$dv="",getText;function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;jqLiteDealoc(element,!0),element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(2===fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount,j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<nodeCount;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=function(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return!0===event.immediatePropagationStopped};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;i<eventFnsLength;i++)event.isImmediatePropagationStopped()||handlerWrapper(element,event,eventFns[i])}};return eventHandler.elem=element,eventHandler}(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length,addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];eventFns||((eventFns=events[type]=[]).specialHandlerWrapper=specialHandlerWrapper,"$destroy"===type||noEventListener||element.addEventListener(type,handle)),eventFns.push(fn)};i--;)type=types[i],MOUSE_EVENT_MAP[type]?(addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper),addHandler(type,void 0,!0)):addHandler(type)}},off:jqLiteOff,one:function(element,type,fn){(element=jqLite(element)).on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT)for(var i=0,ii=(node=new JQLite(node)).length;i<ii;i++){var child=node[i];element.appendChild(child)}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){var node,wrapper,parent;node=element,wrapper=jqLite(wrapNode).eq(0).clone()[0],(parent=node.parentNode)&&parent.replaceChild(wrapper,node),wrapper.appendChild(node)},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;if(parent)for(var i=0,ii=(newElement=new JQLite(newElement)).length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;i<ii;i++)isUndefined(value)?isDefined(value=fn(this[i],arg1,arg2,arg3))&&(value=jqLite(value)):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this}}),JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off;var nanKey=Object.create(null);function NgMapShim(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}NgMapShim.prototype={_idx:function(key){return key!==this._lastKey&&(this._lastKey=key,this._lastIndex=this._keys.indexOf(key)),this._lastIndex},_transformKey:function(key){return isNumberNaN(key)?nanKey:key},get:function(key){key=this._transformKey(key);var idx=this._idx(key);if(-1!==idx)return this._values[idx]},has:function(key){return key=this._transformKey(key),-1!==this._idx(key)},set:function(key,value){key=this._transformKey(key);var idx=this._idx(key);-1===idx&&(idx=this._lastIndex=this._keys.length),this._keys[idx]=key,this._values[idx]=value},delete:function(key){key=this._transformKey(key);var idx=this._idx(key);return-1!==idx&&(this._keys.splice(idx,1),this._values.splice(idx,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var NgMap=NgMapShim,$$MapProvider=[function(){this.$get=[function(){return NgMap}]}],ARROW_ARG=/^([^(]+?)=>/,FN_ARGS=/^[^(]*\(\s*([^)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");function stringifyFn(fn){return Function.prototype.toString.call(fn)}function extractArgs(fn){var fnText=stringifyFn(fn).replace(STRIP_COMMENTS,"");return fnText.match(ARROW_ARG)||fnText.match(FN_ARGS)}function createInjector(modulesToLoad,strictDi){strictDi=!0===strictDi;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new NgMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(function(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}),value:supportObject(function(name,val){return factory(name,valueFn(val),!1)}),constant:supportObject(function(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}),decorator:function(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,void 0,serviceName)}),instanceInjector=protoInstanceInjector;providerCache["$injector"+providerSuffix]={$get:valueFn(protoInstanceInjector)},instanceInjector.modules=providerInjector.modules=createMap();var runBlocks=loadModules(modulesToLoad);return(instanceInjector=protoInstanceInjector.get("$injector")).strictDi=strictDi,forEach(runBlocks,function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector.loadNewModules=function(mods){forEach(loadModules(mods),function(fn){fn&&instanceInjector.invoke(fn)})},instanceInjector;function supportObject(delegate){return function(key,value){if(!isObject(key))return delegate(key,value);forEach(key,reverseParams(delegate))}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn,enforce){return provider(name,{$get:!1!==enforce?function(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}(name,factoryFn):factoryFn})}function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.set(module,!0);try{isString(module)?(moduleFn=angularModule(module),instanceInjector.modules[module]=moduleFn,runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller),cache[serviceName]}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function injectionArgs(fn,locals,serviceName){for(var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName),i=0,length=$inject.length;i<length;i++){var key=$inject[i];if("string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return args}return{invoke:function(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var args=injectionArgs(fn,locals,serviceName);return isArray(fn)&&(fn=fn[fn.length-1]),function(func){if(msie||"function"!=typeof func)return!1;var result=func.$$ngIsClass;return isBoolean(result)||(result=func.$$ngIsClass=/^class\b/.test(stringifyFn(func))),result}(fn)?(args.unshift(null),new(Function.prototype.bind.apply(fn,args))):fn.apply(self,args)},instantiate:function(Type,locals,serviceName){var ctor=isArray(Type)?Type[Type.length-1]:Type,args=injectionArgs(Type,locals,serviceName);return args.unshift(null),new(Function.prototype.bind.apply(ctor,args))},get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){var document=$window.document;function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=function(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0];offset="fixed"!==$window.getComputedStyle(elem).position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){var elm,list,result;(hash=isString(hash)?hash:isNumber(hash)?hash.toString():$location.hash())?(elm=document.getElementById(hash))?scrollTo(elm):(list=document.getElementsByName(hash),result=null,Array.prototype.some.call(list,function(element){if("a"===nodeName_(element))return result=element,!0}),(elm=result)?scrollTo(elm):"top"===hash&&scrollTo(null)):scrollTo(null)}return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){var action,win;newVal===oldVal&&""===newVal||(action=function(){$rootScope.$evalAsync(scroll)},"complete"===(win=win||window).document.readyState?win.setTimeout(action):jqLite(win).on("load",action))}),scroll}]}createInjector.$$annotate=function(fn,strictDi,name){var $inject,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||function(fn){var args=extractArgs(fn);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);forEach(extractArgs(fn)[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(assertArgFn(fn[last=fn.length-1],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject};var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1;function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function prepareAnimateOptions(options){return isObject(options)?options:{}}var $$CoreAnimateJsProvider=function(){this.$get=noop},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new NgMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){domOperation&&domOperation(),(options=options||{}).from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&function(element,add,remove){var data=postDigestQueue.get(element)||{},classesAdded=updateData(data,add,!0),classesRemoved=updateData(data,remove,!1);(classesAdded||classesRemoved)&&(postDigestQueue.set(element,data),postDigestElements.push(element),1===postDigestElements.length&&$rootScope.$$postDigest(handleCSSClassChanges))}(element,options.addClass,options.removeClass);var runner=new $$AnimateRunner;return runner.complete(),runner}};function updateData(data,classes,value){var changed=!1;return classes&&forEach(classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[],function(className){className&&(changed=!0,data[className]=value)}),changed}function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=function(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){status!==!!existing[className]&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.delete(element)}}),postDigestElements.length=0}}]},$AnimateProvider=["$provide",function($provide){var provider=this,classNameFilter=null,customFilter=null;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.customFilter=function(filterFn){return 1===arguments.length&&(customFilter=isFunction(filterFn)?filterFn:null),customFilter},this.classNameFilter=function(expression){if(1===arguments.length&&((classNameFilter=expression instanceof RegExp?expression:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(classNameFilter.toString())))throw classNameFilter=null,$animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=function(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.cancel&&runner.cancel()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return(options=prepareAnimateOptions(options)).removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return(options=prepareAnimateOptions(options)).from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){var waitQueue=[];function waitForTick(fn){waitQueue.push(fn),waitQueue.length>1||$$rAF(function(){for(var i=0;i<waitQueue.length;i++)waitQueue[i]();waitQueue=[]})}return function(){var passed=!1;return waitForTick(function(){passed=!0}),function(callback){passed?callback():waitForTick(callback)}}}]},$$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function($q,$sniffer,$$animateAsyncRun,$$isDocumentHidden,$timeout){function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun();this._doneCallbacks=[],this._tick=function(fn){$$isDocumentHidden()?function(fn){$timeout(fn,0,!1)}(fn):rafTick(fn)},this._state=0}return AnimateRunner.chain=function(chain,callback){var index=0;!function next(){if(index===chain.length)return void callback(!0);chain[index](function(response){!1!==response?(index++,next()):callback(!1)})}()},AnimateRunner.all=function(runners,callback){var count=0,status=!0;function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}forEach(runners,function(runner){runner.done(onProgress)})},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){2===this._state?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){!1===status?reject():resolve()})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise().catch(handler)},finally:function(handler){return this.getPromise().finally(handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;0===self._state&&(self._state=1,self._tick(function(){self._resolve(response)}))},_resolve:function(response){2!==this._state&&(forEach(this._doneCallbacks,function(fn){fn(response)}),this._doneCallbacks.length=0,this._state=2)}},AnimateRunner}]},$CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){var options=initialOptions||{};options.$$prepared||(options=copy(options)),options.cleanupStyles&&(options.from=options.to=null),options.from&&(element.css(options.from),options.from=null);var closed,runner=new $$AnimateRunner;return{start:run,end:run};function run(){return $$rAF(function(){!function(){options.addClass&&(element.addClass(options.addClass),options.addClass=null);options.removeClass&&(element.removeClass(options.removeClass),options.removeClass=null);options.to&&(element.css(options.to),options.to=null)}(),closed||runner.complete(),closed=!0}),runner}}}]};function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function($window,$log,$sniffer,$document,$$taskTrackerFactory){return new function(window,document,$log,$sniffer,$$taskTrackerFactory){var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={},taskTracker=$$taskTrackerFactory($log);self.isMock=!1,self.$$completeOutstandingRequest=taskTracker.completeTask,self.$$incOutstandingRequestCount=taskTracker.incTaskCount,self.notifyWhenNoOutstandingRequests=taskTracker.notifyWhenNoPendingTasks;var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null,getCurrentState=$sniffer.history?function(){try{return history.state}catch(e){}}:noop;cacheState(),self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(url=urlResolve(url).href,lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase||(pendingLocation=url),replace?location.replace(url):sameBase?location.hash=function(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}(url):location.href=url,location.href!==url&&(pendingLocation=url)):(history[replace?"replaceState":"pushState"](state,"",url),cacheState()),pendingLocation&&(pendingLocation=url),self}return function(url){return url.replace(/#$/,"")}(pendingLocation||location.href)},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1;function cacheStateAndFireUrlChange(){pendingLocation=null,fireStateOrUrlChange()}var lastCachedState=null;function cacheState(){equals(cachedState=isUndefined(cachedState=getCurrentState())?null:cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState,lastHistoryState=cachedState}function fireStateOrUrlChange(){var prevLastHistoryState=lastHistoryState;cacheState(),lastBrowserUrl===self.url()&&prevLastHistoryState===cachedState||(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireStateOrUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?:)?\/\/[^/]*/,""):""},self.defer=function(fn,delay,taskType){var timeoutId;return delay=delay||0,taskType=taskType||taskTracker.DEFAULT_TASK_TYPE,taskTracker.incTaskCount(taskType),timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],taskTracker.completeTask(fn,taskType)},delay),pendingDeferIds[timeoutId]=taskType,timeoutId},self.defer.cancel=function(deferId){if(pendingDeferIds.hasOwnProperty(deferId)){var taskType=pendingDeferIds[deferId];return delete pendingDeferIds[deferId],clearTimeout(deferId),taskTracker.completeTask(noop,taskType),!0}return!1}}($window,$document,$log,$sniffer,$$taskTrackerFactory)}]}function $CacheFactoryProvider(){this.$get=function(){var caches={};function cacheFactory(cacheId,options){if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){if(capacity<Number.MAX_VALUE)refresh(lruHash[key]||(lruHash[key]={key:key}));return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry===freshEnd&&(freshEnd=lruEntry.p),lruEntry===staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}key in data&&(delete data[key],size--)},removeAll:function(){data=createMap(),size=0,lruHash=createMap(),freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}};function refresh(entry){entry!==freshEnd&&(staleEnd?staleEnd===entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),(freshEnd=entry).n=null)}function link(nextEntry,prevEntry){nextEntry!==prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}}return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}var $compileMinErr=minErr("$compile");var _UNINITIALIZED_VALUE=new function(){};function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive:\s*([\w-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w-]+)(?::([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=function(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/,bindingCache=createMap();function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,bindings=createMap();return forEach(scope,function(definition,scopeName){if((definition=definition.trim())in bindingCache)bindings[scopeName]=bindingCache[definition];else{var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName},match[4]&&(bindingCache[definition]=bindings[scopeName])}}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(!0===directive.bindToController?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),bindings.bindToController&&!directive.controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);return bindings}this.directive=function registerDirective(name,directiveFactory){return assertArg(name,"name"),assertNotHasOwnProperty(name,"directive"),isString(name)?(!function(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=function(directive){var require=directive.require||directive.controller&&directive.name;return!isArray(require)&&isObject(require)&&forEach(require,function(value,key){var match=value.match(REQUIRE_PREFIX_REGEXP);value.substring(match[0].length)||(require[key]=match[0]+key)}),require}(directive),directive.restrict=function(restrict,name){if(restrict&&(!isString(restrict)||!/[EACM]/.test(restrict)))throw $compileMinErr("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",restrict,name);return restrict||"EA"}(directive.restrict,name),directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.component=function registerComponent(name,options){if(!isString(name))return forEach(name,reverseParams(bind(this,registerComponent))),this;var controller=options.controller||function(){};function factory($injector){function makeInjectable(fn){return isFunction(fn)||isArray(fn)?function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}:fn}var template=options.template||options.templateUrl?options.template:"",ddo={controller:controller,controllerAs:function(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}(options.controller)||options.controllerAs||"$ctrl",template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:"E",require:options.require};return forEach(options,function(val,key){"$"===key.charAt(0)&&(ddo[key]=val)}),ddo}return forEach(options,function(val,key){"$"===key.charAt(0)&&(factory[key]=val,isFunction(controller)&&(controller[key]=val))}),factory.$inject=["$injector"],this.directive(name,factory)},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled};var strictComponentBindingsEnabled=!1;this.strictComponentBindingsEnabled=function(enabled){return isDefined(enabled)?(strictComponentBindingsEnabled=enabled,this):strictComponentBindingsEnabled};var TTL=10;this.onChangesTtl=function(value){return arguments.length?(TTL=value,this):TTL};var commentDirectivesEnabledConfig=!0;this.commentDirectivesEnabled=function(value){return arguments.length?(commentDirectivesEnabledConfig=value,this):commentDirectivesEnabledConfig};var cssClassDirectivesEnabledConfig=!0;this.cssClassDirectivesEnabled=function(value){return arguments.length?(cssClassDirectivesEnabledConfig=value,this):cssClassDirectivesEnabledConfig};var PROP_CONTEXTS=createMap();this.addPropertySecurityContext=function(elementName,propertyName,ctx){var key=elementName.toLowerCase()+"|"+propertyName.toLowerCase();if(key in PROP_CONTEXTS&&PROP_CONTEXTS[key]!==ctx)throw $compileMinErr("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",elementName,propertyName,PROP_CONTEXTS[key],ctx);return PROP_CONTEXTS[key]=ctx,this},function(){function registerContext(ctx,values){forEach(values,function(v){PROP_CONTEXTS[v.toLowerCase()]=ctx})}registerContext(SCE_CONTEXTS.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),registerContext(SCE_CONTEXTS.CSS,["*|style"]),registerContext(SCE_CONTEXTS.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),registerContext(SCE_CONTEXTS.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),registerContext(SCE_CONTEXTS.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate){var onChangesQueue,SIMPLE_ATTR_NAME=/^\w/,specialAttrHolder=window.document.createElement("div"),commentDirectivesEnabled=commentDirectivesEnabledConfig,cssClassDirectivesEnabled=cssClassDirectivesEnabledConfig,onChangesTtl=TTL;function flushOnChangesQueue(){try{if(!--onChangesTtl)throw onChangesQueue=void 0,$compileMinErr("infchng","{0} $onChanges() iterations reached. Aborting!\n",TTL);$rootScope.$apply(function(){for(var i=0,ii=onChangesQueue.length;i<ii;++i)try{onChangesQueue[i]()}catch(e){$exceptionHandler(e)}onChangesQueue=void 0})}finally{onChangesTtl++}}function sanitizeSrcset(value,invokeType){if(!value)return value;if(!isString(value))throw $compileMinErr("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',invokeType,value.toString());for(var result="",trimmedSrcset=trim(value),pattern=/\s/.test(trimmedSrcset)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;i<nbrUrisWith2parts;i++){var innerIdx=2*i;result+=$sce.getTrustedMediaUrl(trim(rawUris[innerIdx])),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);return result+=$sce.getTrustedMediaUrl(trim(lastTuple[0])),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),result}function Attributes(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;i<l;i++)this[key=keys[i]]=attributesToCopy[key]}else this.$attr={};this.$$element=element}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var booleanKey=getBooleanAttrName(this.$$element[0],key),aliasedKey=ALIASED_ATTR[key],observer=key;booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key])||(this.$attr[key]=attrName=snake_case(key,"-")),"img"===nodeName_(this.$$element)&&"srcset"===key&&(this[key]=value=sanitizeSrcset(value,"$set('srcset', value)")),!1!==writeAttr&&(null===value||isUndefined(value)?this.$$element.removeAttr(attrName):SIMPLE_ATTR_NAME.test(attrName)?booleanKey&&!1===value?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value):function(element,attrName,value){specialAttrHolder.innerHTML="<span "+attrName+">";var attributes=specialAttrHolder.firstChild.attributes,attribute=attributes[0];attributes.removeNamedItem(attribute.name),attribute.value=value,element.attributes.setNamedItem(attribute)}(this.$$element[0],attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||!attrs.hasOwnProperty(key)||isUndefined(attrs[key])||fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"===startSymbol&&"}}"===endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_PREFIX_BINDING=/^ng(Attr|Prop|On)([A-Z].*)$/,MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile.$$createComment=function(directiveName,comment){var content="";return debugInfoEnabled&&(content=" "+(directiveName||"")+": ",comment&&(content+=comment+" ")),window.document.createComment(content)},compile;function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes));var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){if(!$compileNodes)throw $compileMinErr("multilink","This element has already been linked.");assertArg(scope,"scope"),previousCompileContext&&previousCompileContext.needsNewScope&&(scope=scope.$parent.$new());var parentElement,node,$linkNode,parentBoundTranscludeFn=(options=options||{}).parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;if(parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(node=(parentElement=futureParentElement)&&parentElement[0],namespace=node&&"foreignobject"!==nodeName_(node)&&toString.call(node).match(/SVG/)?"svg":"html"),$linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div></div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),cloneConnectFn||($compileNodes=compositeLinkFn=null),$linkNode}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],notLiveList=isArray(nodeList)||nodeList instanceof jqLite,i=0;i<nodeList.length;i++)attrs=new Attributes,11===msie&&mergeConsecutiveTextNodes(nodeList,i,notLiveList),(nodeLinkFn=(directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:void 0,ignoreDirective)).length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null)&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?function(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;i<ii;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,void 0,parentBoundTranscludeFn)}:null}function mergeConsecutiveTextNodes(nodeList,idx,notLiveList){var sibling,node=nodeList[idx],parent=node.parentNode;if(node.nodeType===NODE_TYPE_TEXT)for(;(sibling=parent?node.nextSibling:nodeList[idx+1])&&sibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+sibling.nodeValue,sibling.parentNode&&sibling.parentNode.removeChild(sibling),notLiveList&&sibling===nodeList[idx+1]&&nodeList.splice(idx+1,1)}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||((transcludedScope=scope.$new(!1,containingScope)).$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots)transcludeFn.$$slots[slotName]?boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn):boundSlots[slotName]=null;return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,nodeName,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName=nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,value,ngPrefixMatch,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var multiElementMatch,attrStartName=!1,attrEndName=!1,isNgAttr=!1,isNgProp=!1,isNgEvent=!1;name=(attr=nAttrs[j]).name,value=attr.value,(ngPrefixMatch=(nName=directiveNormalize(name.toLowerCase())).match(NG_PREFIX_BINDING))?(isNgAttr="Attr"===ngPrefixMatch[1],isNgProp="Prop"===ngPrefixMatch[1],isNgEvent="On"===ngPrefixMatch[1],name=name.replace(PREFIX_REGEXP,"").toLowerCase().substr(4+ngPrefixMatch[1].length).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()})):(multiElementMatch=nName.match(MULTI_ELEMENT_DIR_RE))&&directiveIsMultiElement(multiElementMatch[1])&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),isNgProp||isNgEvent?(attrs[nName]=value,attrsMap[nName]=attr.name,isNgProp?addPropertyDirective(node,directives,nName,name):addEventDirective(directives,nName,name)):(attrsMap[nName=directiveNormalize(name.toLowerCase())]=name,!isNgAttr&&attrs.hasOwnProperty(nName)||(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName))}if("input"===nodeName&&"hidden"===node.getAttribute("type")&&node.setAttribute("autocomplete","off"),!cssClassDirectivesEnabled)break;if(isObject(className=node.className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)addDirective(directives,nName=directiveNormalize(match[2]),"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:!function(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:if(!commentDirectivesEnabled)break;!function(node,directives,attrs,maxPriority,ignoreDirective){try{var match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){var nName=directiveNormalize(match[1]);addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2]))}}catch(e){}}(node,directives,attrs,maxPriority,ignoreDirective)}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart))do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType===NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0);else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;return eager?compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext):function(){return compiled||(compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext),$compileNodes=transcludeFn=previousCompileContext=null),compiled.apply(this,arguments)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,didScanForMultipleTransclusion=!1,mightHaveMultipleTransclusionError=!1,i=0,ii=directives.length;i<ii;i++){var attrStart=(directive=directives[i]).$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=void 0,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!didScanForMultipleTransclusion&&(directive.replace&&(directive.templateUrl||directive.template)||directive.transclude&&!directive.$$tlb)){for(var candidateDirective,scanningIndex=i+1;candidateDirective=directives[scanningIndex++];)if(candidateDirective.transclude&&!candidateDirective.$$tlb||candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template)){mightHaveMultipleTransclusionError=!0;break}didScanForMultipleTransclusion=!0}if(!directive.templateUrl&&directive.controller&&(controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),directiveValue=directive.transclude)if(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"===directiveValue)hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName])),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective});else{var slots=createMap();if(isObject(directiveValue)){$template=window.document.createDocumentFragment();var slotMap=createMap(),filledSlots=createMap();for(var slotName in forEach(directiveValue,function(elementSelector,slotName){var optional="?"===elementSelector.charAt(0);elementSelector=optional?elementSelector.substring(1):elementSelector,slotMap[elementSelector]=slotName,slots[slotName]=null,filledSlots[slotName]=optional}),forEach($compileNode.contents(),function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];slotName?(filledSlots[slotName]=!0,slots[slotName]=slots[slotName]||window.document.createDocumentFragment(),slots[slotName].appendChild(node)):$template.appendChild(node)}),forEach(filledSlots,function(filled,slotName){if(!filled)throw $compileMinErr("reqslot","Required transclusion slot `{0}` was not filled.",slotName)}),slots)if(slots[slotName]){var slotCompileNodes=jqLite(slots[slotName].childNodes);slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slotCompileNodes,transcludeFn)}$template=jqLite($template.childNodes)}else $template=jqLite(jqLiteClone(compileNode)).contents();$compileNode.empty(),(childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,void 0,void 0,{needsNewScope:directive.$$isolateScope||directive.$$newScope})).$$slots=slots}if(directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!==$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));(newIsolateScopeDirective||newScopeDirective)&&markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);var context=directive.$$originalDirective||directive;isFunction(linkFn)?addLinkFns(null,bind(context,linkFn),attrStart,attrEnd):linkFn&&addLinkFns(bind(context,linkFn.pre),bind(context,linkFn.post),attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&!0===newScopeDirective.scope,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn;function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,scopeBindingInfo;for(var name in compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):attrs=new Attributes($element=jqLite(linkNode),templateAttrs),controllerScope=scope,newIsolateScopeDirective?isolateScope=scope.$new(!0):newScopeDirective&&(controllerScope=scope.$parent),boundTranscludeFn&&((transcludeFn=function(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;isScope(scope)||(slotName=futureParentElement,futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=void 0);hasElementTranscludeDirective&&(transcludeControllers=elementControllers);futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element);if(!slotName)return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn)return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);if(isUndefined(slotTranscludeFn))throw $compileMinErr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',slotName,startingTag($element))}).$$boundTransclude=boundTranscludeFn,transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}),controllerDirectives&&(elementControllers=function($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"===controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,(scopeBindingInfo=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective)).removeWatches&&isolateScope.$on("$destroy",scopeBindingInfo.removeWatches)),elementControllers){var controllerDirective=controllerDirectives[name],controller=elementControllers[name],bindings=controllerDirective.$$bindings.bindToController;controller.instance=controller(),$element.data("$"+controllerDirective.name+"Controller",controller.instance),controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective)}for(forEach(controllerDirectives,function(controllerDirective,name){var require=controllerDirective.require;controllerDirective.bindToController&&!isArray(require)&&isObject(require)&&extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))}),forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$onChanges))try{controllerInstance.$onChanges(controller.bindingInfo.initialChanges)}catch(e){$exceptionHandler(e)}if(isFunction(controllerInstance.$onInit))try{controllerInstance.$onInit()}catch(e){$exceptionHandler(e)}isFunction(controllerInstance.$doCheck)&&(controllerScope.$watch(function(){controllerInstance.$doCheck()}),controllerInstance.$doCheck()),isFunction(controllerInstance.$onDestroy)&&controllerScope.$on("$destroy",function(){controllerInstance.$onDestroy()})}),i=0,ii=preLinkFns.length;i<ii;i++)invokeLinkFn(linkFn=preLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,void 0,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)invokeLinkFn(linkFn=postLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);forEach(elementControllers,function(controller){var controllerInstance=controller.instance;isFunction(controllerInstance.$postLink)&&controllerInstance.$postLink()})}}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():value=(value=elementControllers&&elementControllers[name])&&value.instance,!value){var dataName="$"+name+"Controller";value="^^"===inheritType&&$element[0]&&$element[0].nodeType===NODE_TYPE_DOCUMENT?null:inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}else isObject(require)&&(value={},forEach(require,function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)}));return value||null}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++)directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directive=directives[i],(isUndefined(maxPriority)||maxPriority>directive.priority)&&-1!==directive.restrict.indexOf(location)){if(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope)}tDirectives.push(directive),match=directive}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directives[i].multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr;forEach(dst,function(value,key){"$"!==key.charAt(0)&&(src[key]&&src[key]!==value&&(value.length?value+=("style"===key?";":" ")+src[key]:value=src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){dst.hasOwnProperty(key)||"$"===key.charAt(0)||(dst[key]=value,"class"!==key&&"style"!==key&&(dstAttr[key]=srcAttr[key]))})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!==$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectiveScope(templateDirectives,!0),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node===compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}).catch(function(error){isError(error)&&$exceptionHandler(error)}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=window.document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function sanitizeSrcsetPropertyValue(value){return sanitizeSrcset($sce.valueOf(value),"ng-prop-srcset")}function addPropertyDirective(node,directives,attrName,propName){if(EVENT_HANDLER_ATTR_REGEXP.test(propName))throw $compileMinErr("nodomevents","Property bindings for HTML DOM event properties are disallowed");var nodeName=nodeName_(node),trustedContext=function(nodeName,propNormalizedName){var prop=propNormalizedName.toLowerCase();return PROP_CONTEXTS[nodeName+"|"+prop]||PROP_CONTEXTS["*|"+prop]}(nodeName,propName),sanitizer=identity;"srcset"!==propName||"img"!==nodeName&&"source"!==nodeName?trustedContext&&(sanitizer=$sce.getTrusted.bind($sce,trustedContext)):sanitizer=sanitizeSrcsetPropertyValue,directives.push({priority:100,compile:function(_,attr){var ngPropGetter=$parse(attr[attrName]),ngPropWatch=$parse(attr[attrName],function(val){return $sce.valueOf(val)});return{pre:function(scope,$element){function applyPropValue(){var propValue=ngPropGetter(scope);$element[0][propName]=sanitizer(propValue)}applyPropValue(),scope.$watch(ngPropWatch,applyPropValue)}}}})}function addEventDirective(directives,attrName,eventName){directives.push(createEventDirective($parse,$rootScope,$exceptionHandler,attrName,eventName,!1))}function addAttrInterpolateDirective(node,directives,value,name,isNgAttr){var nodeName=nodeName_(node),trustedContext=function(nodeName,attrNormalizedName){return"srcdoc"===attrNormalizedName?$sce.HTML:"src"===attrNormalizedName||"ngSrc"===attrNormalizedName?-1===["img","video","audio","source","track"].indexOf(nodeName)?$sce.RESOURCE_URL:$sce.MEDIA_URL:"xlinkHref"===attrNormalizedName?"image"===nodeName?$sce.MEDIA_URL:"a"===nodeName?$sce.URL:$sce.RESOURCE_URL:"form"===nodeName&&"action"===attrNormalizedName||"base"===nodeName&&"href"===attrNormalizedName||"link"===nodeName&&"href"===attrNormalizedName?$sce.RESOURCE_URL:"a"!==nodeName||"href"!==attrNormalizedName&&"ngHref"!==attrNormalizedName?void 0:$sce.URL}(nodeName,name),mustHaveExpression=!isNgAttr,allOrNothing=ALL_OR_NOTHING_ATTRS[name]||isNgAttr,interpolateFn=$interpolate(value,mustHaveExpression,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName)throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed");directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap()),newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!==oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;i<ii;i++)if($rootElement[i]===firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++)j2<jj?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=window.document.createDocumentFragment();for(i=0;i<removeCount;i++)fragment.appendChild(elementsToRemove[i]);for(jqLite.hasData(firstElementToRemove)&&(jqLite.data(newNode,jqLite.data(firstElementToRemove)),jqLite(firstElementToRemove).off("$destroy")),jqLite.cleanData(fragment.querySelectorAll("*")),i=1;i<removeCount;i++)delete elementsToRemove[i];elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function strictBindingsCheck(attrName,directiveName){if(strictComponentBindingsEnabled)throw $compileMinErr("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",attrName,directiveName)}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){var changes,removeWatchCollection=[],initialChanges={};function recordChanges(key,currentValue,previousValue){isFunction(destination.$onChanges)&&!simpleCompare(currentValue,previousValue)&&(onChangesQueue||(scope.$$postDigest(flushOnChangesQueue),onChangesQueue=[]),changes||(changes={},onChangesQueue.push(triggerOnChangesHook)),changes[key]&&(previousValue=changes[key].previousValue),changes[key]=new SimpleChange(previousValue,currentValue))}function triggerOnChangesHook(){destination.$onChanges(changes),changes=void 0}return forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,removeWatch,attrName=definition.attrName,optional=definition.optional;switch(definition.mode){case"@":optional||hasOwnProperty.call(attrs,attrName)||(strictBindingsCheck(attrName,directive.name),destination[scopeName]=attrs[attrName]=void 0),removeWatch=attrs.$observe(attrName,function(value){if(isString(value)||isBoolean(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue),destination[scopeName]=value}}),attrs.$$observers[attrName].$$scope=scope,isString(lastValue=attrs[attrName])?destination[scopeName]=$interpolate(lastValue)(scope):isBoolean(lastValue)&&(destination[scopeName]=lastValue),initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatchCollection.push(removeWatch);break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;strictBindingsCheck(attrName,directive.name),attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:simpleCompare,parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",attrs[attrName],attrName,directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0,removeWatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),removeWatchCollection.push(removeWatch);break;case"<":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;strictBindingsCheck(attrName,directive.name),attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;var isLiteral=(parentGet=$parse(attrs[attrName])).literal,initialValue=destination[scopeName]=parentGet(scope);initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatch=scope[definition.collection?"$watchCollection":"$watch"](parentGet,function(newValue,oldValue){if(oldValue===newValue){if(oldValue===initialValue||isLiteral&&equals(oldValue,initialValue))return;oldValue=initialValue}recordChanges(scopeName,newValue,oldValue),destination[scopeName]=newValue}),removeWatchCollection.push(removeWatch);break;case"&":if(optional||hasOwnProperty.call(attrs,attrName)||strictBindingsCheck(attrName,directive.name),(parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop)===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}}),{initialChanges:initialChanges,removeWatches:removeWatchCollection.length&&function(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i)removeWatchCollection[i]()}}}}]}function SimpleChange(previous,current){this.previousValue=previous,this.currentValue=current}$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"],SimpleChange.prototype.isFirstChange=function(){return this.previousValue===_UNINITIALIZED_VALUE};var PREFIX_REGEXP=/^((?:x|data)[:\-_])/i,SPECIAL_CHARS_REGEXP=/[:\-_]+(.)/g;function directiveNormalize(name){return name.replace(PREFIX_REGEXP,"").replace(SPECIAL_CHARS_REGEXP,function(_,letter,offset){return offset?letter.toUpperCase():letter})}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){var i=(jqNodes=jqLite(jqNodes)).length;if(i<=1)return jqNodes;for(;i--;){var node=jqNodes[i];(node.nodeType===NODE_TYPE_COMMENT||node.nodeType===NODE_TYPE_TEXT&&""===node.nodeValue.trim())&&splice.call(jqNodes,i,1)}return jqNodes}var $controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/;function $ControllerProvider(){var controllers={};this.has=function(name){return controllers.hasOwnProperty(name)},this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.$get=["$injector",function($injector){return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=!0===later,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(!(match=expression.match(CNTRL_REG)))throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);if(constructor=match[1],identifier=identifier||match[3],!(expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:function(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;i<len;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}(locals.$scope,constructor,!0)))throw $controllerMinErr("ctrlreg","The controller with the name '{0}' is not registered.",constructor);assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;return instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance};function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $$IsDocumentHiddenProvider(){this.$get=["$document","$rootScope",function($document,$rootScope){var doc=$document[0],hidden=doc&&doc.hidden;function changeListener(){hidden=doc.hidden}return $document.on("visibilitychange",changeListener),$rootScope.$on("$destroy",function(){$document.off("visibilitychange",changeListener)}),function(){return hidden}}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}var $$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){return domNode?!domNode.nodeType&&domNode instanceof jqLite&&(domNode=domNode[0]):domNode=$document[0].body,domNode.offsetWidth+1}}]},APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)]\}',?\n/,$httpMinErr=minErr("$http");function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||isFunction(value)||(isArray(value)?forEach(value,function(v){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return function serialize(toSerialize,prefix,topLevel){isArray(toSerialize)?forEach(toSerialize,function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):(isFunction(toSerialize)&&(toSerialize=toSerialize()),parts.push(encodeUriQuery(prefix)+"="+(null==toSerialize?"":encodeUriQuery(serializeValue(toSerialize)))))}(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type"),hasJsonContentType=contentType&&0===contentType.indexOf(APPLICATION_JSON);if(hasJsonContentType||(jsonStart=(str=tempData).match(JSON_START))&&JSON_ENDS[jsonStart[0]].test(str))try{data=fromJson(tempData)}catch(e){if(!hasJsonContentType)return data;throw $httpMinErr("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',data,e)}}}var str,jsonStart;return data}function parseHeaders(headers){var i,parsed=createMap();function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||(obj=d,"[object File]"===toString.call(obj))||function(obj){return"[object Blob]"===toString.call(obj)}(d)||function(obj){return"[object FormData]"===toString.call(obj)}(d)?d:toJson(d);var obj}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[],xsrfWhitelistedOrigins=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function($browser,$httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector,$sce){var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))});var parsedAllowedOriginUrls,urlIsAllowedOrigin=(parsedAllowedOriginUrls=[originUrl].concat(xsrfWhitelistedOrigins.map(urlResolve)),function(requestUrl){var parsedUrl=urlResolve(requestUrl);return parsedAllowedOriginUrls.some(urlsAreSameOrigin.bind(null,parsedUrl))});function $http(requestConfig){if(!isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);if(!isString($sce.valueOf(requestConfig.url)))throw minErr("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",requestConfig.url);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer,jsonpCallbackParam:defaults.jsonpCallbackParam},requestConfig);config.headers=function(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){for(reqHeaderName in lowercaseDefHeaderName=lowercase(defHeaderName),reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return function(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?null!=(headerContent=headerFn(config))&&(processedHeaders[header]=headerContent):processedHeaders[header]=headerFn}),processedHeaders}(reqHeaders,shallowCopy(config))}(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer,$browser.$$incOutstandingRequestCount("$http");var requestInterceptors=[],responseInterceptors=[],promise=$q.resolve(config);return forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&requestInterceptors.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&responseInterceptors.push(interceptor.response,interceptor.responseError)}),promise=(promise=chainInterceptors(promise=(promise=chainInterceptors(promise,requestInterceptors)).then(function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),void 0,config.transformRequest);isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]});isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials);return function(config,reqData){var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,isJsonp="jsonp"===lowercase(config.method),url=config.url;isJsonp?url=$sce.getTrustedResourceUrl(url):isString(url)||(url=$sce.valueOf(url));url=function(url,serializedParams){return serializedParams.length>0&&(url+=(-1===url.indexOf("?")?"?":"&")+serializedParams),url}(url,config.paramSerializer(config.params)),isJsonp&&(url=function(url,cbKey){var parts=url.split("?");if(parts.length>2)throw $httpMinErr("badjsonp",'Illegal use more than one "?", in url, "{1}"',url);return forEach(parseKeyValue(parts[1]),function(value,key){if("JSON_CALLBACK"===value)throw $httpMinErr("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',url);if(key===cbKey)throw $httpMinErr("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',cbKey,url)}),url+=(-1===url.indexOf("?")?"?":"&")+cbKey+"=JSON_CALLBACK"}(url,config.jsonpCallbackParam));$http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache);cache&&(isDefined(cachedResp=cache.get(url))?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3],cachedResp[4]):resolvePromise(cachedResp,200,{},"OK","complete"):cache.put(url,promise));if(isUndefined(cachedResp)){var xsrfValue=urlIsAllowedOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:void 0;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,function(status,response,headersString,statusText,xhrStatus){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText,xhrStatus]):cache.remove(url));function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText,xhrStatus)}useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())},reqHeaders,config.timeout,config.withCredentials,config.responseType,createApplyHandlers(config.eventHandlers),createApplyHandlers(config.uploadEventHandlers))}return promise;function createApplyHandlers(eventHandlers){if(eventHandlers){var applyHandlers={};return forEach(eventHandlers,function(eventHandler,key){applyHandlers[key]=function(event){function callEventHandler(){eventHandler(event)}useApplyAsync?$rootScope.$applyAsync(callEventHandler):$rootScope.$$phase?callEventHandler():$rootScope.$apply(callEventHandler)}}),applyHandlers}}function resolvePromise(response,status,headers,statusText,xhrStatus){(isSuccess(status=status>=-1?status:0)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText,xhrStatus:xhrStatus})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText,result.xhrStatus)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}}(config,reqData).then(transformResponse,transformResponse)}),responseInterceptors)).finally(function(){$browser.$$completeOutstandingRequest(noop,"$http")});function chainInterceptors(promise,interceptors){for(var i=0,ii=interceptors.length;i<ii;){var thenFn=interceptors[i++],rejectFn=interceptors[i++];promise=promise.then(thenFn,rejectFn)}return interceptors.length=0,promise}function transformResponse(response){var resp=extend({},response);return resp.data=transformData(response.data,response.headers,response.status,config.transformResponse),isSuccess(response.status)?resp:$q.reject(resp)}}return $http.pendingRequests=[],function(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}("get","delete","head","jsonp"),function(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}("post","put","patch"),$http.defaults=defaults,$http}]}function $xhrFactoryProvider(){this.$get=function(){return function(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function($browser,$jsonpCallbacks,$document,$xhrFactory){return function($browser,createXhr,$browserDefer,callbacks,rawDocument){return function(method,url,post,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){if(url=url||$browser.url(),"jsonp"===lowercase(method))var callbackPath=callbacks.createCallback(url),jsonpDone=function(url,callbackPath,done){url=url.replace("JSON_CALLBACK",callbackPath);var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){script.removeEventListener("load",callback),script.removeEventListener("error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks.wasCalled(callbackPath)||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},script.addEventListener("load",callback),script.addEventListener("error",callback),rawDocument.body.appendChild(script),callback}(url,callbackPath,function(status,text){var response=200===status&&callbacks.getResponse(callbackPath);completeRequest(callback,status,response,"",text,"complete"),callbacks.removeCallback(callbackPath)});else{var xhr=createXhr(method,url),abortedByTimeout=!1;xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"===urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText,"complete")};if(xhr.onerror=function(){completeRequest(callback,-1,null,null,"","error")},xhr.ontimeout=function(){completeRequest(callback,-1,null,null,"","timeout")},xhr.onabort=function(){completeRequest(callback,-1,null,null,"",abortedByTimeout?"timeout":"abort")},forEach(eventHandlers,function(value,key){xhr.addEventListener(key,value)}),forEach(uploadEventHandlers,function(value,key){xhr.upload.addEventListener(key,value)}),withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(isUndefined(post)?null:post)}if(timeout>0)var timeoutId=$browserDefer(function(){timeoutRequest("timeout")},timeout);else isPromiseLike(timeout)&&timeout.then(function(){timeoutRequest(isDefined(timeout.$$timeoutId)?"timeout":"abort")});function timeoutRequest(reason){abortedByTimeout="timeout"===reason,jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText,xhrStatus){isDefined(timeoutId)&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText,xhrStatus)}}}($browser,$xhrFactory,$browser.defer,$jsonpCallbacks,$document[0])}]}var $interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch=scope.$watch(function(scope){return unwatch(),constantInterp(scope)},listener,objectEquality);return unwatch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){var contextAllowsConcatenation=trustedContext===$sce.URL||trustedContext===$sce.MEDIA_URL;if(!text.length||-1===text.indexOf(startSymbol)){if(mustHaveExpression)return;var unescapedText=unescapeText(text);contextAllowsConcatenation&&(unescapedText=$sce.getTrusted(trustedContext,unescapedText));var constantInterp=valueFn(unescapedText);return constantInterp.exp=text,constantInterp.expressions=[],constantInterp.$$watchDelegate=constantWatchDelegate,constantInterp}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,parseFns,exp,singleExpression,index=0,expressions=[],textLength=text.length,concat=[],expressionPositions=[];index<textLength;){if(-1===(startIndex=text.indexOf(startSymbol,index))||-1===(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}singleExpression=1===concat.length&&1===expressionPositions.length;var interceptor=contextAllowsConcatenation&&singleExpression?void 0:function(value){try{return value=trustedContext&&!contextAllowsConcatenation?$sce.getTrusted(trustedContext,value):$sce.valueOf(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}};if(parseFns=expressions.map(function(exp){return $parse(exp,interceptor)}),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return contextAllowsConcatenation?$sce.getTrusted(trustedContext,singleExpression?concat[0]:concat.join("")):(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),concat.join(""))};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;i<ii;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}}return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var $intervalMinErr=minErr("$interval");function $IntervalProvider(){this.$get=["$$intervalFactory","$window",function($$intervalFactory,$window){var intervals={},clearIntervalFn=function(id){$window.clearInterval(id),delete intervals[id]},interval=$$intervalFactory(function(tick,delay,deferred){var id=$window.setInterval(tick,delay);return intervals[id]=deferred,id},clearIntervalFn);return interval.cancel=function(promise){if(!promise)return!1;if(!promise.hasOwnProperty("$$intervalId"))throw $intervalMinErr("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!intervals.hasOwnProperty(promise.$$intervalId))return!1;var id=promise.$$intervalId,deferred=intervals[id];return markQExceptionHandled(deferred.promise),deferred.reject("canceled"),clearIntervalFn(id),!0},interval}]}function $$IntervalFactoryProvider(){this.$get=["$browser","$q","$$q","$rootScope",function($browser,$q,$$q,$rootScope){return function(setIntervalFn,clearIntervalFn){return function(fn,delay,count,invokeApply){var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;function callback(){hasParams?fn.apply(null,args):fn(iteration)}return count=isDefined(count)?count:0,promise.$$intervalId=setIntervalFn(function(){skipApply?$browser.defer(callback):$rootScope.$evalAsync(callback),deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearIntervalFn(promise.$$intervalId)),skipApply||$rootScope.$apply()},delay,deferred,skipApply),promise}}}]}var $jsonpCallbacksProvider=function(){this.$get=function(){var callbacks=angular.callbacks,callbackMap={};return{createCallback:function(url){var callbackId="_"+(callbacks.$$counter++).toString(36),callbackPath="angular.callbacks."+callbackId,callback=function(callbackId){var callback=function(data){callback.data=data,callback.called=!0};return callback.id=callbackId,callback}(callbackId);return callbackMap[callbackPath]=callbacks[callbackId]=callback,callbackPath},wasCalled:function(callbackPath){return callbackMap[callbackPath].called},getResponse:function(callbackPath){return callbackMap[callbackPath].data},removeCallback:function(callbackPath){var callback=callbackMap[callbackPath];delete callbacks[callback.id],delete callbackMap[callbackPath]}}}},PATH_MATCH=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");function normalizePath(pathValue,searchValue,hashValue){var parts,search=(parts=[],forEach(searchValue,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(!0===arrayValue?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(!0===value?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""),hash=hashValue?"#"+encodeUriSegment(hashValue):"";return function(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i].replace(/%2F/g,"/"));return segments.join("/")}(pathValue)+(search?"?"+search:"")+hash}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}var DOUBLE_SLASH_REGEX=/^\s*[\\/]{2,}/;function parseAppUrl(url,locationObj,html5Mode){if(DOUBLE_SLASH_REGEX.test(url))throw $locationMinErr("badpath",'Invalid url "{0}".',url);var prefixed="/"!==url.charAt(0);prefixed&&(url="/"+url);var match=urlResolve(url),path=prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname;locationObj.$$path=function(path,html5Mode){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=decodeURIComponent(segments[i]),html5Mode&&(segments[i]=segments[i].replace(/\//g,"%2F"));return segments.join("/")}(path,html5Mode),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!==locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function startsWith(str,search){return str.slice(0,search.length)===search}function stripBaseUrl(base,url){if(startsWith(url,base))return url.substr(base.length)}function stripHash(url){var index=url.indexOf("#");return-1===index?url:url.substr(0,index)}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"",parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=stripBaseUrl(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(url){return appBaseNoFile+url.substr(1)},this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(isDefined(appUrl=stripBaseUrl(appBase,url))?(prevAppUrl=appUrl,rewrittenUrl=basePrefix&&isDefined(appUrl=stripBaseUrl(basePrefix,appUrl))?appBaseNoFile+(stripBaseUrl("/",appUrl)||appUrl):appBase+prevAppUrl):isDefined(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var appUrl,prevAppUrl,rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var withoutHashUrl,withoutBaseUrl=stripBaseUrl(appBase,url)||stripBaseUrl(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):isUndefined(withoutHashUrl=stripBaseUrl(hashPrefix,withoutBaseUrl))&&(withoutHashUrl=withoutBaseUrl),parseAppUrl(withoutHashUrl,this,!1),this.$$path=function(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;startsWith(url,base)&&(url=url.replace(base,""));if(windowsFilePathExp.exec(url))return path;return(firstPathSegmentMatch=windowsFilePathExp.exec(path))?firstPathSegmentMatch[1]:path}(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$normalizeUrl=function(url){return appBase+(url?hashPrefix+url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)===stripHash(url)&&(this.$$parse(url),!0)}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(appBase===stripHash(url)?rewrittenUrl=url:(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var rewrittenUrl,appUrl},this.$$normalizeUrl=function(url){return appBase+hashPrefix+url}}var locationPrototype={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=normalizePath(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"===(path=null!==path?path.toString():"").charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search=copy(search,{}),function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="!",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),(isBoolean(mode.rewriteLinks)||isString(mode.rewriteLinks))&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){var $location,LocationMode,appBase,url,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=(url=initialUrl).substring(0,url.indexOf("/",url.indexOf("//")+2))+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;var appBaseNoFile=function(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}(appBase);($location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix)).$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}$rootElement.on("click",function(event){var rewriteLinks=html5Mode.rewriteLinks;if(rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!==event.which&&2!==event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;if(!isString(rewriteLinks)||!isUndefined(elm.attr(rewriteLinks))){var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!==$browser.url()&&$rootScope.$apply())}}}),$location.absUrl()!==initialUrl&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){startsWith(newUrl,appBaseNoFile)?($rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest()):$window.location.href=newUrl}),$rootScope.$watch(function(){if(initializing||$location.$$urlUpdatedByLocation){$location.$$urlUpdatedByLocation=!1;var oldUrl=$browser.url(),newUrl=$location.absUrl(),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=!((a=oldUrl)===(b=newUrl)||urlResolve(a).href===urlResolve(b).href)||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))}))}var a,b;$location.$$replace=!1}),$location;function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){var fn,formatStackTrace=msie||/\bEdge\//.test($window.navigator&&$window.navigator.userAgent);return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:(fn=consoleLog("debug"),function(){debug&&fn.apply(self,arguments)})};function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop;return function(){var args=[];return forEach(arguments,function(arg){args.push(function(arg){return isError(arg)&&(arg.stack&&formatStackTrace?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}(arg))}),Function.prototype.apply.call(logFn,console,args)}}}]}forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this.$$urlUpdatedByLocation=!0,this}});var $parseMinErr=minErr("$parse"),objectValueOf={}.constructor.prototype.valueOf;function getStringValue(name){return name+""}var OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length&&this.text.charAt(this.index+num)},isNumber:function(ch){return"0"<=ch&&ch<="9"&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||" "===ch},isIdentifierStart:function(ch){return this.options.isIdentifierStart?this.options.isIdentifierStart(ch,this.codePointAt(ch)):this.isValidIdentifierStart(ch)},isValidIdentifierStart:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||"$"===ch},isIdentifierContinue:function(ch){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(ch,this.codePointAt(ch)):this.isValidIdentifierContinue(ch)},isValidIdentifierContinue:function(ch,cp){return this.isValidIdentifierStart(ch,cp)||this.isNumber(ch)},codePointAt:function(ch){return 1===ch.length?ch.charCodeAt(0):(ch.charCodeAt(0)<<10)+ch.charCodeAt(1)-56613888},peekMultichar:function(){var ch=this.text.charAt(this.index),peek=this.peek();if(!peek)return ch;var cp1=ch.charCodeAt(0),cp2=peek.charCodeAt(0);return cp1>=55296&&cp1<=56319&&cp2>=56320&&cp2<=57343?ch+peek:ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."===ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"===ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"===number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!==number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){var start=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var ch=this.peekMultichar();if(!this.isIdentifierContinue(ch))break;this.index+=ch.length}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{string+=ESCAPE[ch]||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};function ifDefined(v,d){return void 0!==v?v:d}function plusFn(l,r){return void 0===l?r:void 0===r?l:l+r}AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.LocalsExpression="LocalsExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var left=this.expression();this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();if(this.expect("=")){if(!isAssignable(result))throw $parseMinErr("lval","Trying to assign a value to a non l-value");result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}}return result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary,next;for(this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?primary=copy(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?primary={type:AST.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do{args.push(this.filterChain())}while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?(property.key=this.constant(),property.computed=!1,this.consume(":"),property.value=this.expression()):this.peek().identifier?(property.key=this.identifier(),property.computed=!1,this.peek(":")?(this.consume(":"),property.value=this.expression()):property.value=property.key):this.peek("[")?(this.consume("["),property.key=this.expression(),this.consume("]"),property.computed=!0,this.consume(":"),property.value=this.expression()):this.throwError("invalid key",this.peek()),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return!!token&&(this.tokens.shift(),token)},selfReferential:{this:{type:AST.ThisExpression},$locals:{type:AST.LocalsExpression}}};var PURITY_ABSOLUTE=1,PURITY_RELATIVE=2;function findConstantAndWatchExpressions(ast,$filter,parentIsPure){var allConstants,argsToWatch,isStatelessFilter,astIsPure=ast.isPure=function(node,parentIsPure){switch(node.type){case AST.MemberExpression:if(node.computed)return!1;break;case AST.UnaryExpression:return PURITY_ABSOLUTE;case AST.BinaryExpression:return"+"!==node.operator&&PURITY_ABSOLUTE;case AST.CallExpression:return!1}return void 0===parentIsPure?PURITY_RELATIVE:parentIsPure}(ast,parentIsPure);switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter,astIsPure),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter,astIsPure),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure),findConstantAndWatchExpressions(ast.right,$filter,astIsPure),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure),findConstantAndWatchExpressions(ast.right,$filter,astIsPure),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter,astIsPure),findConstantAndWatchExpressions(ast.alternate,$filter,astIsPure),findConstantAndWatchExpressions(ast.consequent,$filter,astIsPure),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter,astIsPure),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter,astIsPure),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=ast.constant?[]:[ast];break;case AST.CallExpression:isStatelessFilter=!!ast.filter&&function($filter,filterName){return!$filter(filterName).$stateful}($filter,ast.callee.name),allConstants=isStatelessFilter,argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter,astIsPure),allConstants=allConstants&&expr.constant,argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=isStatelessFilter?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure),findConstantAndWatchExpressions(ast.right,$filter,astIsPure),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter,astIsPure),allConstants=allConstants&&expr.constant,argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter,astIsPure),allConstants=allConstants&&property.value.constant,argsToWatch.push.apply(argsToWatch,property.value.toWatch),property.computed&&(findConstantAndWatchExpressions(property.key,$filter,!1),allConstants=allConstants&&property.key.constant,argsToWatch.push.apply(argsToWatch,property.key.toWatch))}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:case AST.LocalsExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1===body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:void 0}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(1===ast.body.length&&isAssignable(ast.body[0].expression))return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}function ASTCompiler($filter){this.$filter=$filter}function ASTInterpreter($filter){this.$filter=$filter}function Parser(lexer,$filter,options){this.ast=new AST(lexer,options),this.astCompiler=options.csp?new ASTInterpreter($filter):new ASTCompiler($filter)}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var identStart,identContinue,cache=createMap(),literals={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue},this.setIdentifierFns=function(identifierStart,identifierContinue){return identStart=identifierStart,identContinue=identifierContinue,this},this.$get=["$filter",function($filter){var $parseOptions={csp:csp().noUnsafeEval,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue};return $parse.$$getAst=function(exp){return new Parser(new Lexer($parseOptions),$filter,$parseOptions).getAst(exp).ast},$parse;function $parse(exp,interceptorFn){var parsedExpression,cacheKey;switch(typeof exp){case"string":if(exp=exp.trim(),!(parsedExpression=cache[cacheKey=exp]))parsedExpression=new Parser(new Lexer($parseOptions),$filter,$parseOptions).parse(exp),cache[cacheKey]=addWatchDelegate(parsedExpression);return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}function expressionInputDirtyCheck(newValue,oldValueOfValue,compareObjectIdentity){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:!("object"==typeof newValue&&"object"==typeof(newValue=getValueOf(newValue))&&!compareObjectIdentity)&&(newValue===oldValueOfValue||newValue!=newValue&&oldValueOfValue!=oldValueOfValue)}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf,inputExpressions.isPure)||(lastResult=parsedExpression(scope,void 0,void 0,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;i<ii;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i],inputExpressions[i].isPure)))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,void 0,void 0,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var unwatch,lastValue,isDone=parsedExpression.literal?isAllDefined:isDefined,exp=parsedExpression.$$intercepted||parsedExpression,post=parsedExpression.$$interceptor||identity,useInputs=parsedExpression.inputs&&!exp.inputs;return oneTimeWatch.literal=parsedExpression.literal,oneTimeWatch.constant=parsedExpression.constant,oneTimeWatch.inputs=parsedExpression.inputs,addWatchDelegate(oneTimeWatch),unwatch=scope.$watch(oneTimeWatch,listener,objectEquality,prettyPrintExpression);function unwatchIfDone(){isDone(lastValue)&&unwatch()}function oneTimeWatch(scope,locals,assign,inputs){return lastValue=useInputs&&inputs?inputs[0]:exp(scope,locals,assign,inputs),isDone(lastValue)&&scope.$$postDigest(unwatchIfDone),post(lastValue)}}function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch=scope.$watch(function(scope){return unwatch(),parsedExpression(scope)},listener,objectEquality);return unwatch}function addWatchDelegate(parsedExpression){return parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:parsedExpression.oneTime?parsedExpression.$$watchDelegate=oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),parsedExpression}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;parsedExpression.$$interceptor&&(interceptorFn=function(first,second){function chainedInterceptor(value){return second(first(value))}return chainedInterceptor.$stateful=first.$stateful||second.$stateful,chainedInterceptor.$$pure=first.$$pure&&second.$$pure,chainedInterceptor}(parsedExpression.$$interceptor,interceptorFn),parsedExpression=parsedExpression.$$intercepted);var useInputs=!1,fn=function(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value)};return fn.$$intercepted=parsedExpression,fn.$$interceptor=interceptorFn,fn.literal=parsedExpression.literal,fn.oneTime=parsedExpression.oneTime,fn.constant=parsedExpression.constant,interceptorFn.$stateful||(useInputs=!parsedExpression.inputs,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression],interceptorFn.$$pure||(fn.inputs=fn.inputs.map(function(e){return e.isPure===PURITY_RELATIVE?function(s){return e(s)}:e}))),addWatchDelegate(fn)}}]}function $QProvider(){var errorOnUnhandledRejections=!0;this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler,errorOnUnhandledRejections)}],this.errorOnUnhandledRejections=function(value){return isDefined(value)?(errorOnUnhandledRejections=value,this):errorOnUnhandledRejections}}function $$QProvider(){var errorOnUnhandledRejections=!0;this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler,errorOnUnhandledRejections)}],this.errorOnUnhandledRejections=function(value){return isDefined(value)?(errorOnUnhandledRejections=value,this):errorOnUnhandledRejections}}function qFactory(nextTick,exceptionHandler,errorOnUnhandledRejections){var $qMinErr=minErr("$q",TypeError),queueSize=0,checkQueue=[];function defer(){return new function(){var promise=this.promise=new Promise;this.resolve=function(val){resolvePromise(promise,val)},this.reject=function(reason){rejectPromise(promise,reason)},this.notify=function(progress){notifyPromise(promise,progress)}}}function Promise(){this.$$state={status:0}}function processChecks(){for(;!queueSize&&checkQueue.length;){var toCheck=checkQueue.shift();if(!isStateExceptionHandled(toCheck)){markQStateExceptionHandled(toCheck);var errorMessage="Possibly unhandled rejection: "+toDebugString(toCheck.value);isError(toCheck.value)?exceptionHandler(toCheck.value,errorMessage):exceptionHandler(errorMessage)}}}function scheduleProcessQueue(state){!errorOnUnhandledRejections||state.pending||2!==state.status||isStateExceptionHandled(state)||(0===queueSize&&0===checkQueue.length&&nextTick(processChecks),checkQueue.push(state)),!state.processScheduled&&state.pending&&(state.processScheduled=!0,++queueSize,nextTick(function(){!function(state){var fn,promise,pending;pending=state.pending,state.processScheduled=!1,state.pending=void 0;try{for(var i=0,ii=pending.length;i<ii;++i){markQStateExceptionHandled(state),promise=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?resolvePromise(promise,fn(state.value)):1===state.status?resolvePromise(promise,state.value):rejectPromise(promise,state.value)}catch(e){rejectPromise(promise,e),e&&!0===e.$$passToExceptionHandler&&exceptionHandler(e)}}}finally{--queueSize,errorOnUnhandledRejections&&0===queueSize&&nextTick(processChecks)}}(state)}))}function resolvePromise(promise,val){promise.$$state.status||(val===promise?$$reject(promise,$qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):function $$resolve(promise,val){var then;var done=!1;try{(isObject(val)||isFunction(val))&&(then=val.then),isFunction(then)?(promise.$$state.status=-1,then.call(val,function doResolve(val){if(done)return;done=!0,function $$resolve(promise,val){var then;var done=!1;try{(isObject(val)||isFunction(val))&&(then=val.then),isFunction(then)?(promise.$$state.status=-1,then.call(val,doResolve,doReject,function(progress){notifyPromise(promise,progress)})):(promise.$$state.value=val,promise.$$state.status=1,scheduleProcessQueue(promise.$$state))}catch(e){doReject(e)}function doResolve(val){done||(done=!0,$$resolve(promise,val))}function doReject(val){done||(done=!0,$$reject(promise,val))}}(promise,val)},doReject,function(progress){notifyPromise(promise,progress)})):(promise.$$state.value=val,promise.$$state.status=1,scheduleProcessQueue(promise.$$state))}catch(e){doReject(e)}function doResolve(val){done||(done=!0,$$resolve(promise,val))}function doReject(val){done||(done=!0,$$reject(promise,val))}}(promise,val))}function rejectPromise(promise,reason){promise.$$state.status||$$reject(promise,reason)}function $$reject(promise,reason){promise.$$state.value=reason,promise.$$state.status=2,scheduleProcessQueue(promise.$$state)}function notifyPromise(promise,progress){var callbacks=promise.$$state.pending;promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0],callback=callbacks[i][3];try{notifyPromise(result,isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}function reject(reason){var result=new Promise;return rejectPromise(result,reason),result}function handleCallback(value,resolver,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return reject(e)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return resolver(value)},reject):resolver(value)}function when(value,callback,errback,progressBack){var result=new Promise;return resolvePromise(result,value),result.then(callback,errback,progressBack)}extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack))return this;var result=new Promise;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,resolve,callback)},function(error){return handleCallback(error,reject,callback)},progressBack)}});var resolve=when;function $Q(resolver){if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);var promise=new Promise;return resolver(function(value){resolvePromise(promise,value)},function(reason){rejectPromise(promise,reason)}),promise}return $Q.prototype=Promise.prototype,$Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.resolve=resolve,$Q.all=function(promises){var result=new Promise,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results[key]=value,--counter||resolvePromise(result,results)},function(reason){rejectPromise(result,reason)})}),0===counter&&resolvePromise(result,results),result},$Q.race=function(promises){var deferred=defer();return forEach(promises,function(promise){when(promise).then(deferred.resolve,deferred.reject)}),deferred.promise},$Q}function isStateExceptionHandled(state){return!!state.pur}function markQStateExceptionHandled(state){state.pur=!0}function markQExceptionHandled(q){q.$$state&&markQStateExceptionHandled(q.$$state)}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$exceptionHandler","$parse","$browser",function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null,this.$$suspended=!1}return ChildScope.prototype=parent,ChildScope}(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!==this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp),fn=isFunction(listener)?listener:noop;if(get.$$watchDelegate)return get.$$watchDelegate(this,fn,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:fn,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,array||((array=scope.$$watchers=[]).$$digestWatchIndex=-1),array.unshift(watcher),array.$$digestWatchIndex++,incrementWatchersCount(this,1),function(){var index=arrayRemove(array,watcher);index>=0&&(incrementWatchersCount(scope,-1),index<array.$$digestWatchIndex&&array.$$digestWatchIndex--),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}if(1===watchExpressions.length)return this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)});function watchGroupAction(){changeReactionScheduled=!1;try{firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}finally{for(var i=0;i<watchExpressions.length;i++)oldValues[i]=newValues[i]}}return forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value){newValues[i]=value,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()}},$watchCollection:function(obj,listener){$watchCollectionInterceptor.$$pure=$parse(obj).literal,$watchCollectionInterceptor.$stateful=!$watchCollectionInterceptor.$$pure;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;function $watchCollectionInterceptor(_value){var newLength,key,newItem,oldItem;if(!isUndefined(newValue=_value)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldLength=(oldValue=internalArray).length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;i<newLength;i++)oldItem=oldValue[i],newItem=newValue[i],oldItem!=oldItem&&newItem!=newItem||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{for(key in oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0,newValue)hasOwnProperty.call(newValue,key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?oldItem!=oldItem&&newItem!=newItem||oldItem===newItem||(changeDetected++,oldValue[key]=newItem):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength)for(key in changeDetected++,oldValue)hasOwnProperty.call(newValue,key)||(oldLength--,delete oldValue[key])}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}return this.$watch(changeDetector,function(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else for(var key in veryOldValue={},newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key]);else veryOldValue=newValue})},$digest:function(){var watch,value,last,watchers,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=asyncQueue.length?$rootScope:this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{dirty=!1,current=target;for(var asyncQueuePosition=0;asyncQueuePosition<asyncQueue.length;asyncQueuePosition++){try{(0,(asyncTask=asyncQueue[asyncQueuePosition]).fn)(asyncTask.scope,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}asyncQueue.length=0;traverseScopesLoop:do{if(watchers=!current.$$suspended&&current.$$watchers)for(watchers.$$digestWatchIndex=watchers.length;watchers.$$digestWatchIndex--;)try{if(watch=watchers[watchers.$$digestWatchIndex])if((value=(0,watch.get)(current))===(last=watch.last)||(watch.eq?equals(value,last):isNumberNaN(value)&&isNumberNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,(0,watch.fn)(value,last===initWatchVal?value:last,current),ttl<5&&(watchLog[logIdx=4-ttl]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=!current.$$suspended&&current.$$watchersCount&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueuePosition<postDigestQueue.length;)try{postDigestQueue[postDigestQueuePosition++]()}catch(e){$exceptionHandler(e)}postDigestQueue.length=postDigestQueuePosition=0,$browser.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;for(var eventName in this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount),this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead===this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail===this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,function cleanUpScope($scope){9===msie&&($scope.$$childHead&&cleanUpScope($scope.$$childHead),$scope.$$nextSibling&&cleanUpScope($scope.$$nextSibling)),$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}(this)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()},null,"$evalAsync"),asyncQueue.push({scope:this,fn:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){var scope=this;expr&&applyAsyncQueue.push(function(){scope.$eval(expr)}),expr=$parse(expr),null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)},null,"$applyAsync"))},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do{current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++}while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(delete namedListeners[indexOfListener],decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;i<length;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)break;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var current=this,next=this,event={name:name,targetScope:this,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,i=0,length=(listeners=current.$$listeners[name]||[]).length;i<length;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==this&&current.$$nextSibling))for(;current!==this&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[],postDigestQueuePosition=0;return $rootScope;function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do{current.$$watchersCount+=count}while(current=current.$parent)}function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name]}while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|s?ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isMediaUrl){var regex=isMediaUrl?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist,normalizedVal=urlResolve(uri&&uri.trim()).href;return""===normalizedVal||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}ASTCompiler.prototype={compile:function(ast){var self=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),this.return_(result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push({name:fnKey,isPure:watch.isPure}),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","getStringValue","ifDefined","plus",fnString)(this.$filter,getStringValue,ifDefined,plusFn);return this.state=this.stage=void 0,fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],inputs=this.state.inputs,self=this;return forEach(inputs,function(input){result.push("var "+input.name+"="+self.generateFunction(input.name,"s")),input.isPure&&result.push(input.name,".isPure="+JSON.stringify(input.isPure)+";")}),inputs.length&&result.push("fn.inputs=["+inputs.map(function(i){return i.name}).join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,computed,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,void 0,void 0,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(intoId||expression);break;case AST.UnaryExpression:this.recurse(ast.argument,void 0,void 0,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,void 0,void 0,function(expr){left=expr}),this.recurse(ast.right,void 0,void 0,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.isNull(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,void 0,function(){self.if_(self.notNull(left),function(){ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.getStringValue(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.computedMember(left,right),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(create&&1!==create&&self.if_(self.isNull(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){forEach(ast.arguments,function(expr){self.recurse(expr,ast.constant?void 0:self.nextId(),void 0,function(argument){args.push(argument)})}),expression=left.name?self.member(left.context,left.name,left.computed)+"("+args.join(",")+")":right+"("+args.join(",")+")",self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:right=this.nextId(),left={},this.recurse(ast.left,void 0,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,ast.constant?void 0:self.nextId(),void 0,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(intoId||expression);break;case AST.ObjectExpression:args=[],computed=!1,forEach(ast.properties,function(property){property.computed&&(computed=!0)}),computed?(intoId=intoId||this.nextId(),this.assign(intoId,"{}"),forEach(ast.properties,function(property){property.computed?(left=self.nextId(),self.recurse(property.key,left)):left=property.key.type===AST.Identifier?property.key.name:""+property.key.value,right=self.nextId(),self.recurse(property.value,right),self.assign(self.member(intoId,left,property.computed),right)})):(forEach(ast.properties,function(property){self.recurse(property.value,ast.constant?void 0:self.nextId(),void 0,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression)),recursionFn(intoId||expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn(intoId||"s");break;case AST.LocalsExpression:this.assign(intoId,"l"),recursionFn(intoId||"l");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn(intoId||"v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){if(id)return this.current().body.push(id,"=",value,";"),id},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(!0===test)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},isNull:function(expression){return expression+"==null"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(right)?left+"."+right:left+'["'+right.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},getStringValue:function(item){this.assign(item,"getStringValue("+item+")")},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(!0===value)return"true";if(!1===value)return"false";if(null===value)return"null";if(void 0===value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(ast){var assignable,assign,self=this;findConstantAndWatchExpressions(ast,self.$filter),(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);input.isPure=watch.isPure,watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?noop:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return self.identifier(ast.name,context,create);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create):this.nonComputedMember(left,right,context,create);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(void 0,values,inputs);return context?{context:void 0,name:void 0,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));value=rhs.value.apply(rhs.context,values)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){property.computed?args.push({key:self.recurse(property.key),computed:!0,value:self.recurse(property.value)}):args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,computed:!1,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)args[i].computed?value[args[i].key(scope,locals,assign,inputs)]=args[i].value(scope,locals,assign,inputs):value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:-0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var arg=plusFn(left(scope,locals,assign,inputs),right(scope,locals,assign,inputs));return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:void 0,name:void 0,value:value}:value}},identifier:function(name,context,create){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&null==base[name]&&(base[name]={});var value=base?base[name]:void 0;return context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(rhs=getStringValue(rhs=right(scope,locals,assign,inputs)),create&&1!==create&&lhs&&!lhs[rhs]&&(lhs[rhs]={}),value=lhs[rhs]),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&lhs&&null==lhs[right]&&(lhs[right]={});var value=null!=lhs?lhs[right]:void 0;return context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}},Parser.prototype={constructor:Parser,parse:function(text){var ast=this.getAst(text),fn=this.astCompiler.compile(ast.ast);return fn.literal=function(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}(ast.ast),fn.constant=function(ast){return ast.constant}(ast.ast),fn.oneTime=ast.oneTime,fn},getAst:function(exp){var oneTime=!1;return":"===(exp=exp.trim()).charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2)),{ast:this.ast.ast(exp),oneTime:oneTime}}};var $sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},UNDERSCORE_LOWERCASE_REGEXP=/_([a-z])/g;function snakeToCamel(name){return name.replace(UNDERSCORE_LOWERCASE_REGEXP,fnCamelCaseReplace)}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(function(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector","$$sanitizeUri",function($injector,$$sanitizeUri){var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};function matchUrl(matcher,parsedUrl){return"self"===matcher?urlsAreSameOrigin(parsedUrl,originUrl)||function(requestUrl){return urlsAreSameOrigin(requestUrl,function(){if(window.document.baseURI)return window.document.baseURI;baseUrlParsingNode||((baseUrlParsingNode=window.document.createElement("a")).href=".",baseUrlParsingNode=baseUrlParsingNode.cloneNode(!1));return baseUrlParsingNode.href}())}(parsedUrl):!!matcher.exec(parsedUrl.href)}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.MEDIA_URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(byType[SCE_CONTEXTS.MEDIA_URL]),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:function(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||isUndefined(trustedValue)||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)},getTrusted:function(type,maybeTrusted){if(null===maybeTrusted||isUndefined(maybeTrusted)||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(isFunction(maybeTrusted.$$unwrapTrustedValue)&&(maybeTrusted=maybeTrusted.$$unwrapTrustedValue()),type===SCE_CONTEXTS.MEDIA_URL||type===SCE_CONTEXTS.URL)return $$sanitizeUri(maybeTrusted.toString(),type===SCE_CONTEXTS.MEDIA_URL);if(type===SCE_CONTEXTS.RESOURCE_URL){if(function(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;i<n;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[snakeToCamel("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[snakeToCamel("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[snakeToCamel("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var eventSupport={},hasHistoryPushState=!(!($window.nw&&$window.nw.process)&&$window.chrome&&($window.chrome.app&&$window.chrome.app.runtime||!$window.chrome.app&&$window.chrome.runtime&&$window.chrome.runtime.id))&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;return bodyStyle&&(transitions=!!("transition"in bodyStyle||"webkitTransition"in bodyStyle),animations=!!("animation"in bodyStyle||"webkitAnimation"in bodyStyle)),{history:!(!hasHistoryPushState||android<4||boxee),hasEvent:function(event){if("input"===event&&msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),transitions:transitions,animations:animations,android:android}}]}function $$TaskTrackerFactoryProvider(){this.$get=valueFn(function(log){return new function(log){var taskCounts={},taskCallbacks=[],ALL_TASKS_TYPE=this.ALL_TASKS_TYPE="$$all$$",DEFAULT_TASK_TYPE=this.DEFAULT_TASK_TYPE="$$default$$";function getLastCallback(){var cbInfo=taskCallbacks.pop();return cbInfo&&cbInfo.cb}function getLastCallbackForType(taskType){for(var i=taskCallbacks.length-1;i>=0;--i){var cbInfo=taskCallbacks[i];if(cbInfo.type===taskType)return taskCallbacks.splice(i,1),cbInfo.cb}}this.completeTask=function(fn,taskType){taskType=taskType||DEFAULT_TASK_TYPE;try{fn()}finally{!function(taskType){taskCounts[taskType=taskType||DEFAULT_TASK_TYPE]&&(taskCounts[taskType]--,taskCounts[ALL_TASKS_TYPE]--)}(taskType);var countForType=taskCounts[taskType],countForAll=taskCounts[ALL_TASKS_TYPE];if(!countForAll||!countForType)for(var nextCb,getNextCallback=countForAll?getLastCallbackForType:getLastCallback;nextCb=getNextCallback(taskType);)try{nextCb()}catch(e){log.error(e)}}},this.incTaskCount=function(taskType){taskCounts[taskType=taskType||DEFAULT_TASK_TYPE]=(taskCounts[taskType]||0)+1,taskCounts[ALL_TASKS_TYPE]=(taskCounts[ALL_TASKS_TYPE]||0)+1},this.notifyWhenNoPendingTasks=function(callback,taskType){taskCounts[taskType=taskType||ALL_TASKS_TYPE]?taskCallbacks.push({type:taskType,cb:callback}):callback()}}(log)})}var $templateRequestMinErr=minErr("$templateRequest");function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){return val?(httpOptions=val,this):httpOptions},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function($exceptionHandler,$templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++,isString(tpl)&&!isUndefined($templateCache.get(tpl))||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;return isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null),$http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data)},function(resp){ignoreRequestError||(resp=$templateRequestMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText),$exceptionHandler(resp));return $q.reject(resp)})}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={findBindings:function(element,expression,opt_exactMatch){var matches=[];return forEach(element.getElementsByClassName("ng-binding"),function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){opt_exactMatch?new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)").test(bindingName)&&matches.push(binding):-1!==bindingName.indexOf(expression)&&matches.push(binding)})}),matches},findModels:function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var selector="["+prefixes[p]+"model"+(opt_exactMatch?"=":"*=")+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},getLocation:function(){return $location.url()},setLocation:function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},whenStable:function(callback){$browser.notifyWhenNoOutstandingRequests(callback)}};return testability}]}var $timeoutMinErr=minErr("$timeout");function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){var deferreds={};function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay,"$timeout"),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}return timeout.cancel=function(promise){if(!promise)return!1;if(!promise.hasOwnProperty("$$timeoutId"))throw $timeoutMinErr("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!deferreds.hasOwnProperty(promise.$$timeoutId))return!1;var id=promise.$$timeoutId,deferred=deferreds[id];return markQExceptionHandled(deferred.promise),deferred.reject("canceled"),delete deferreds[id],$browser.defer.cancel(id)},timeout}]}var baseUrlParsingNode,urlParsingNode=window.document.createElement("a"),originUrl=urlResolve(window.location.href);urlParsingNode.href="http://[::1]";var ipv6InBrackets="[::1]"===urlParsingNode.hostname;function urlResolve(url){if(!isString(url))return url;var href=url;msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href);var hostname=urlParsingNode.hostname;return!ipv6InBrackets&&hostname.indexOf(":")>-1&&(hostname="["+hostname+"]"),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlsAreSameOrigin(url1,url2){return url1=urlResolve(url1),url2=urlResolve(url2),url1.protocol===url2.protocol&&url1.host===url2.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}return function(){var cookieArray,cookie,i,index,name,currentCookieString=function(rawDocument){try{return rawDocument.cookie||""}catch(e){return""}}(rawDocument);if(currentCookieString!==lastCookieString)for(cookieArray=(lastCookieString=currentCookieString).split("; "),lastCookies={},i=0;i<cookieArray.length;i++)(index=(cookie=cookieArray[i]).indexOf("="))>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){var suffix="Filter";function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator,anyPropertyKey){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var predicateFn,matchAgainstAnyProp;switch(anyPropertyKey=anyPropertyKey||"$",getTypeForFilter(expression)){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=function(expression,comparator,anyPropertyKey,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&anyPropertyKey in expression;!0===comparator?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return!isUndefined(actual)&&(null===actual||null===expected?actual===expected:!(isObject(expected)||isObject(actual)&&!hasCustomToString(actual))&&(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected)))});return function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression[anyPropertyKey],comparator,anyPropertyKey,!1):deepCompare(item,expression,comparator,anyPropertyKey,matchAgainstAnyProp)}}(expression,comparator,anyPropertyKey,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function deepCompare(actual,expected,comparator,anyPropertyKey,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,anyPropertyKey,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,anyPropertyKey,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if(key.charAt&&"$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,anyPropertyKey,!0))return!0;return!dontMatchWholeObject&&deepCompare(actual,expected,comparator,anyPropertyKey,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty=key===anyPropertyKey;if(!deepCompare(matchAnyProperty?actual:actual[key],expectedVal,comparator,anyPropertyKey,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0";function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac);var currencySymbolRe=currencySymbol?/\u00A4/g:/\s*\u00A4\s*/g;return null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(currencySymbolRe,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isString(number)&&!isNumber(number)||isNaN(number))return"";var parsedNumber,isInfinity=!isFinite(number),isZero=!1,numStr=Math.abs(number)+"",formattedText="";if(isInfinity)formattedText="∞";else{(function(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d,fractionLen=digits.length-parsedNumber.i,roundAt=(fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize)+parsedNumber.i,digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++)digits[j]=0}else{fractionLen=Math.max(0,fractionLen),parsedNumber.i=1,digits.length=Math.max(1,roundAt=fractionSize+1),digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}if(digit>=5)if(roundAt-1<0){for(var k=0;k>roundAt;k--)digits.unshift(0),parsedNumber.i++;digits.unshift(1),parsedNumber.i++}else digits[roundAt-1]++;for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){return d+=carry,digits[i]=d%10,Math.floor(d/10)},0);carry&&(digits.unshift(carry),parsedNumber.i++)})(parsedNumber=function(numStr){var digits,numberOfIntegerDigits,i,j,zeros,exponent=0;for((numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))>-1&&(numStr=numStr.replace(DECIMAL_SEP,"")),(i=numStr.search(/e/i))>0?(numberOfIntegerDigits<0&&(numberOfIntegerDigits=i),numberOfIntegerDigits+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):numberOfIntegerDigits<0&&(numberOfIntegerDigits=numStr.length),i=0;numStr.charAt(i)===ZERO_CHAR;i++);if(i===(zeros=numStr.length))digits=[0],numberOfIntegerDigits=1;else{for(zeros--;numStr.charAt(zeros)===ZERO_CHAR;)zeros--;for(numberOfIntegerDigits-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=+numStr.charAt(i)}return numberOfIntegerDigits>MAX_DIGITS&&(digits=digits.splice(0,MAX_DIGITS-1),exponent=numberOfIntegerDigits-1,numberOfIntegerDigits=1),{d:digits,e:exponent,i:numberOfIntegerDigits}}(numStr),fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d,integerLen=parsedNumber.i,exponent=parsedNumber.e,decimals=[];for(isZero=digits.reduce(function(isZero,d){return isZero&&!d},!0);integerLen<0;)digits.unshift(0),integerLen++;integerLen>0?decimals=digits.splice(integerLen,digits.length):(decimals=digits,digits=[0]);var groups=[];for(digits.length>=pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize,digits.length).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(groupSep),decimals.length&&(formattedText+=decimalSep+decimals.join("")),exponent&&(formattedText+="e+"+exponent)}return number<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf}function padNumber(num,digits,trim,negWrap){var neg="";for((num<0||negWrap&&num<=0)&&(negWrap?num=1-num:(num=-num,neg="-")),num=""+num;num.length<digits;)num=ZERO_CHAR+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim,negWrap){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12===offset&&(value=12),padNumber(value,size,trim,negWrap)}}function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date["get"+name]();return formats[uppercase((standAlone?"STANDALONE":"")+(shortForm?"SHORT":"")+name)][value]}}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function weekGetter(size){return function(date){var datetime,firstThurs=getFirstThursdayOfYear(date.getFullYear()),diff=+(datetime=date,new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay())))-+firstThurs;return padNumber(1+Math.round(diff/6048e5),size)}}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DATE_FORMATS={yyyy:dateGetter("FullYear",4,0,!1,!0),yy:dateGetter("FullYear",2,0,!0,!0),y:dateGetter("FullYear",1,0,!1,!0),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",!1,!0),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:function(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]},Z:function(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)},ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:function(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}},DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,NUMBER_STRING=/^-?\d+$/;function dateFilter($locale){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):function(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)(match=DATE_FORMATS_SPLIT.exec(format))?format=(parts=concat(parts,match,1)).pop():(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):"''"===value?"'":value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNumberNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArrayLike(input)?(begin=(begin=!begin||isNaN(begin)?0:toInt(begin))<0?Math.max(0,input.length+begin):begin,limit>=0?sliceFn(input,begin,begin+limit):0===begin?sliceFn(input,limit,input.length):sliceFn(input,Math.max(0,begin+limit),begin)):input)}}function sliceFn(input,begin,end){return isString(input)?input.slice(begin,end):slice.call(input,begin,end)}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder,compareFn){if(null==array)return array;if(!isArrayLike(array))throw minErr("orderBy")("notarray","Expected array but received: {0}",array);isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=sortPredicate.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&("+"!==predicate.charAt(0)&&"-"!==predicate.charAt(0)||(descending="-"===predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate)).constant)){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending}}),descending=reverseOrder?-1:1,compare=isFunction(compareFn)?compareFn:defaultCompare,compareValues=Array.prototype.map.call(array,function(value,index){return{value:value,tieBreaker:{value:index,type:"number",index:index},predicateValues:predicates.map(function(predicate){return function(value,index){var type=typeof value;null===value?type="null":"object"===type&&(value=function(value){if(isFunction(value.valueOf)&&isPrimitive(value=value.valueOf()))return value;if(hasCustomToString(value)&&isPrimitive(value=value.toString()))return value;return value}(value));return{value:value,type:type,index:index}}(predicate.get(value),index)})}});return compareValues.sort(function(v1,v2){for(var i=0,ii=predicates.length;i<ii;i++){var result=compare(v1.predicateValues[i],v2.predicateValues[i]);if(result)return result*predicates[i].descending*descending}return(compare(v1.tieBreaker,v2.tieBreaker)||defaultCompare(v1.tieBreaker,v2.tieBreaker))*descending}),array=compareValues.map(function(item){return item.value})};function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function defaultCompare(v1,v2){var result=0,type1=v1.type,type2=v2.type;if(type1===type2){var value1=v1.value,value2=v2.value;"string"===type1?(value1=value1.toLowerCase(),value2=value2.toLowerCase()):"object"===type1&&(isObject(value1)&&(value1=v1.index),isObject(value2)&&(value2=v2.index)),value1!==value2&&(result=value1<value2?-1:1)}else result="undefined"===type1?1:"undefined"===type2?-1:"null"===type1?1:"null"===type2?-1:type1<type2?-1:1;return result}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref)return function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!==propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,0,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"===attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=["$sce",function($sce){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$set(normalized,$sce.getTrustedMediaUrl(attr[normalized])),attr.$observe(normalized,function(value){value?(attr.$set(name,value),msie&&propName&&element.prop(propName,attr[name])):"href"===attrName&&attr.$set(name,null)})}}}]});var nullFormCtrl={$addControl:noop,$getControls:valueFn([]),$$renameControl:function(control,name){control.$name=name},$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop,$$setSubmitted:noop},PENDING_CLASS="ng-pending";function FormController($element,$attrs,$scope,$animate,$interpolate){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attrs.name||$attrs.ngForm||"")($scope),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=nullFormCtrl,this.$$element=$element,this.$$animate=$animate,setupValidity(this)}FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"],FormController.prototype={$rollbackViewValue:function(){forEach(this.$$controls,function(control){control.$rollbackViewValue()})},$commitViewValue:function(){forEach(this.$$controls,function(control){control.$commitViewValue()})},$addControl:function(control){assertNotHasOwnProperty(control.$name,"input"),this.$$controls.push(control),control.$name&&(this[control.$name]=control),control.$$parentForm=this},$getControls:function(){return shallowCopy(this.$$controls)},$$renameControl:function(control,newName){var oldName=control.$name;this[oldName]===control&&delete this[oldName],this[newName]=control,control.$name=newName},$removeControl:function(control){control.$name&&this[control.$name]===control&&delete this[control.$name],forEach(this.$pending,function(value,name){this.$setValidity(name,null,control)},this),forEach(this.$error,function(value,name){this.$setValidity(name,null,control)},this),forEach(this.$$success,function(value,name){this.$setValidity(name,null,control)},this),arrayRemove(this.$$controls,control),control.$$parentForm=nullFormCtrl},$setDirty:function(){this.$$animate.removeClass(this.$$element,PRISTINE_CLASS),this.$$animate.addClass(this.$$element,DIRTY_CLASS),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,PRISTINE_CLASS,DIRTY_CLASS+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,forEach(this.$$controls,function(control){control.$setPristine()})},$setUntouched:function(){forEach(this.$$controls,function(control){control.$setUntouched()})},$setSubmitted:function(){for(var rootForm=this;rootForm.$$parentForm&&rootForm.$$parentForm!==nullFormCtrl;)rootForm=rootForm.$$parentForm;rootForm.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,forEach(this.$$controls,function(control){control.$$setSubmitted&&control.$$setSubmitted()})}},addSetValidityMethod({clazz:FormController,set:function(object,property,controller){var list=object[property];list?-1===list.indexOf(controller)&&list.push(controller):object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])}});var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){return{name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":!(!isNgForm||!attr.ngForm)&&"ngForm";return{pre:function(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};formElement[0].addEventListener("submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){formElement[0].removeEventListener("submit",handleFormSubmission)},0,!1)})}(ctrls[1]||controller.$$parentForm).$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;nameAttr&&(setter(scope,controller),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,void 0),controller.$$parentForm.$$renameControl(controller,newValue),(setter=getSetter(controller.$name))(scope,controller))})),formElement.on("$destroy",function(){controller.$$parentForm.$removeControl(controller),setter(scope,void 0),extend(controller,nullFormCtrl)})}}}};function getSetter(expression){return""===expression?$parse('this[""]').assign:$parse(expression).assign||noop}}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0);function setupValidity(instance){instance.$$classCache={},instance.$$classCache[INVALID_CLASS]=!(instance.$$classCache[VALID_CLASS]=instance.$$element.hasClass(VALID_CLASS))}function addSetValidityMethod(context){var clazz=context.clazz,set=context.set,unset=context.unset;function cachedToggleClass(ctrl,className,switchValue){switchValue&&!ctrl.$$classCache[className]?(ctrl.$$animate.addClass(ctrl.$$element,className),ctrl.$$classCache[className]=!0):!switchValue&&ctrl.$$classCache[className]&&(ctrl.$$animate.removeClass(ctrl.$$element,className),ctrl.$$classCache[className]=!1)}function toggleValidationCss(ctrl,validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(ctrl,VALID_CLASS+validationErrorKey,!0===isValid),cachedToggleClass(ctrl,INVALID_CLASS+validationErrorKey,!1===isValid)}clazz.prototype.$setValidity=function(validationErrorKey,state,controller){var combinedState;isUndefined(state)?function(ctrl,name,value,controller){ctrl[name]||(ctrl[name]={});set(ctrl[name],value,controller)}(this,"$pending",validationErrorKey,controller):function(ctrl,name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller);isObjectEmpty(ctrl[name])&&(ctrl[name]=void 0)}(this,"$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(this.$error,validationErrorKey,controller),set(this.$$success,validationErrorKey,controller)):(set(this.$error,validationErrorKey,controller),unset(this.$$success,validationErrorKey,controller)):(unset(this.$error,validationErrorKey,controller),unset(this.$$success,validationErrorKey,controller)),this.$pending?(cachedToggleClass(this,PENDING_CLASS,!0),this.$valid=this.$invalid=void 0,toggleValidationCss(this,"",null)):(cachedToggleClass(this,PENDING_CLASS,!1),this.$valid=isObjectEmpty(this.$error),this.$invalid=!this.$valid,toggleValidationCss(this,"",this.$valid)),toggleValidationCss(this,validationErrorKey,combinedState=this.$pending&&this.$pending[validationErrorKey]?void 0:!this.$error[validationErrorKey]&&(!!this.$$success[validationErrorKey]||null)),this.$$parentForm.$setValidity(validationErrorKey,combinedState,this)}}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,NUMBER_REGEXP=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4,})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4,})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,PARTIAL_VALIDATION_EVENTS="keydown wheel mousedown",PARTIAL_VALIDATION_TYPES=createMap();forEach("date,datetime-local,month,time,week".split(","),function(type){PARTIAL_VALIDATION_TYPES[type]=!0});var inputType={text:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)},date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,function(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN},"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:function(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var parsedMinVal;if(badInputChecker(scope,element,attr,ctrl,"number"),numberFormatterParser(ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),isDefined(attr.min)||attr.ngMin){var minVal=attr.min||$parse(attr.ngMin)(scope);parsedMinVal=parseNumberAttrVal(minVal),ctrl.$validators.min=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(parsedMinVal)||viewValue>=parsedMinVal},attr.$observe("min",function(val){val!==minVal&&(parsedMinVal=parseNumberAttrVal(val),minVal=val,ctrl.$validate())})}if(isDefined(attr.max)||attr.ngMax){var maxVal=attr.max||$parse(attr.ngMax)(scope),parsedMaxVal=parseNumberAttrVal(maxVal);ctrl.$validators.max=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(parsedMaxVal)||viewValue<=parsedMaxVal},attr.$observe("max",function(val){val!==maxVal&&(parsedMaxVal=parseNumberAttrVal(val),maxVal=val,ctrl.$validate())})}if(isDefined(attr.step)||attr.ngStep){var stepVal=attr.step||$parse(attr.ngStep)(scope),parsedStepVal=parseNumberAttrVal(stepVal);ctrl.$validators.step=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(parsedStepVal)||isValidForStep(viewValue,parsedMinVal||0,parsedStepVal)},attr.$observe("step",function(val){val!==stepVal&&(parsedStepVal=parseNumberAttrVal(val),stepVal=val,ctrl.$validate())})}},url:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}},email:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}},radio:function(scope,element,attr,ctrl){var doTrim=!attr.ngTrim||"false"!==trim(attr.ngTrim);isUndefined(attr.name)&&element.attr("name",nextUid());element.on("change",function(ev){var value;element[0].checked&&(value=attr.value,doTrim&&(value=trim(value)),ctrl.$setViewValue(value,ev&&ev.type))}),ctrl.$render=function(){var value=attr.value;doTrim&&(value=trim(value)),element[0].checked=value===ctrl.$viewValue},attr.$observe("value",ctrl.$render)},range:function(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl,"range"),numberFormatterParser(ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var supportsRange=ctrl.$$hasNativeValidators&&"range"===element[0].type,minVal=supportsRange?0:void 0,maxVal=supportsRange?100:void 0,stepVal=supportsRange?1:void 0,validity=element[0].validity,hasMinAttr=isDefined(attr.min),hasMaxAttr=isDefined(attr.max),hasStepAttr=isDefined(attr.step),originalRender=ctrl.$render;ctrl.$render=supportsRange&&isDefined(validity.rangeUnderflow)&&isDefined(validity.rangeOverflow)?function(){originalRender(),ctrl.$setViewValue(element.val())}:originalRender,hasMinAttr&&(minVal=parseNumberAttrVal(attr.min),ctrl.$validators.min=supportsRange?function(){return!0}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(minVal)||viewValue>=minVal},setInitialValueAndObserver("min",function(val){if(minVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue))return;if(supportsRange){var elVal=element.val();minVal>elVal&&(elVal=minVal,element.val(elVal)),ctrl.$setViewValue(elVal)}else ctrl.$validate()}));hasMaxAttr&&(maxVal=parseNumberAttrVal(attr.max),ctrl.$validators.max=supportsRange?function(){return!0}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(maxVal)||viewValue<=maxVal},setInitialValueAndObserver("max",function(val){if(maxVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue))return;if(supportsRange){var elVal=element.val();maxVal<elVal&&(element.val(maxVal),elVal=maxVal<minVal?minVal:maxVal),ctrl.$setViewValue(elVal)}else ctrl.$validate()}));hasStepAttr&&(stepVal=parseNumberAttrVal(attr.step),ctrl.$validators.step=supportsRange?function(){return!validity.stepMismatch}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)},setInitialValueAndObserver("step",function(val){if(stepVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue))return;supportsRange?ctrl.$viewValue!==element.val()&&ctrl.$setViewValue(element.val()):ctrl.$validate()}));function setInitialValueAndObserver(htmlAttrName,changeFn){element.attr(htmlAttrName,attr[htmlAttrName]);var oldVal=attr[htmlAttrName];attr.$observe(htmlAttrName,function(val){val!==oldVal&&(oldVal=val,changeFn(val))})}},checkbox:function(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1);element.on("change",function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return!1===value},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})},hidden:noop,button:noop,submit:noop,reset:noop,file:noop};function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var timeout,type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionupdate",function(ev){(isUndefined(ev.data)||""===ev.data)&&(composing=!1)}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut drop",deferListener)}element.on("change",listener),PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type&&element.on(PARTIAL_VALIDATION_EVENTS,function(ev){if(!timeout){var validity=this[VALIDITY_STATE_PROPERTY],origBadInput=validity.badInput,origTypeMismatch=validity.typeMismatch;timeout=$browser.defer(function(){timeout=null,validity.badInput===origBadInput&&validity.typeMismatch===origTypeMismatch||listener(ev)})}}),ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;element.val()!==value&&element.val(value)}}function createDateParser(regexp,mapping){return function(iso,previousDate){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'===iso.charAt(0)&&'"'===iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso)){parts.shift(),map=previousDate?{yyyy:previousDate.getFullYear(),MM:previousDate.getMonth()+1,dd:previousDate.getDate(),HH:previousDate.getHours(),mm:previousDate.getMinutes(),ss:previousDate.getSeconds(),sss:previousDate.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)});var date=new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0);return map.yyyy<100&&date.setFullYear(map.yyyy),date}}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){badInputChecker(scope,element,attr,ctrl,type),baseInputType(0,element,attr,ctrl,$sniffer,$browser);var previousDate,previousTimezone,isTimeType="time"===type||"datetimelocal"===type;if(ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:regexp.test(value)?parseDateAndConvertTimeZoneToLocal(value,previousDate):void(ctrl.$$parserName=type)}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value);if(isValidDate(value)){previousDate=value;var timezone=ctrl.$options.getOption("timezone");return timezone&&(previousTimezone=timezone,previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),function(value,timezone){var targetFormat=format;isTimeType&&isString(ctrl.$options.getOption("timeSecondsFormat"))&&(targetFormat=format.replace("ss.sss",ctrl.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var formatted=$filter("date")(value,targetFormat,timezone);isTimeType&&ctrl.$options.getOption("timeStripZeroSeconds")&&(formatted=formatted.replace(/(?::00)?(?:\.000)?$/,""));return formatted}(value,timezone)}return previousDate=null,previousTimezone=null,""}),isDefined(attr.min)||attr.ngMin){var minVal=attr.min||$parse(attr.ngMin)(scope),parsedMinVal=parseObservedDateValue(minVal);ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(parsedMinVal)||parseDate(value)>=parsedMinVal},attr.$observe("min",function(val){val!==minVal&&(parsedMinVal=parseObservedDateValue(val),minVal=val,ctrl.$validate())})}if(isDefined(attr.max)||attr.ngMax){var maxVal=attr.max||$parse(attr.ngMax)(scope),parsedMaxVal=parseObservedDateValue(maxVal);ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(parsedMaxVal)||parseDate(value)<=parsedMaxVal},attr.$observe("max",function(val){val!==maxVal&&(parsedMaxVal=parseObservedDateValue(val),maxVal=val,ctrl.$validate())})}function isValidDate(value){return value&&!(value.getTime&&value.getTime()!=value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDateAndConvertTimeZoneToLocal(val)||void 0:val}function parseDateAndConvertTimeZoneToLocal(value,previousDate){var timezone=ctrl.$options.getOption("timezone");previousTimezone&&previousTimezone!==timezone&&(previousDate=addDateMinutes(previousDate,timezoneToOffset(previousTimezone)));var parsedDate=parseDate(value,previousDate);return!isNaN(parsedDate)&&timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}}}function badInputChecker(scope,element,attr,ctrl,parserName){var node=element[0];(ctrl.$$hasNativeValidators=isObject(node.validity))&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};if(!validity.badInput&&!validity.typeMismatch)return value;ctrl.$$parserName=parserName})}function numberFormatterParser(ctrl){ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):void(ctrl.$$parserName="number")}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value})}function parseNumberAttrVal(val){return isDefined(val)&&!isNumber(val)&&(val=parseFloat(val)),isNumberNaN(val)?void 0:val}function isNumberInteger(num){return(0|num)===num}function countDecimals(num){var numString=num.toString(),decimalSymbolIndex=numString.indexOf(".");if(-1===decimalSymbolIndex){if(-1<num&&num<1){var match=/e-(\d+)$/.exec(numString);if(match)return Number(match[1])}return 0}return numString.length-decimalSymbolIndex-1}function isValidForStep(viewValue,stepBase,step){var value=Number(viewValue),isNonIntegerValue=!isNumberInteger(value),isNonIntegerStepBase=!isNumberInteger(stepBase),isNonIntegerStep=!isNumberInteger(step);if(isNonIntegerValue||isNonIntegerStepBase||isNonIntegerStep){var valueDecimals=isNonIntegerValue?countDecimals(value):0,stepBaseDecimals=isNonIntegerStepBase?countDecimals(stepBase):0,stepDecimals=isNonIntegerStep?countDecimals(step):0,decimalCount=Math.max(valueDecimals,stepBaseDecimals,stepDecimals),multiplier=Math.pow(10,decimalCount);value*=multiplier,stepBase*=multiplier,step*=multiplier,isNonIntegerValue&&(value=Math.round(value)),isNonIntegerStepBase&&(stepBase=Math.round(stepBase)),isNonIntegerStep&&(step=Math.round(step))}return(value-stepBase)%step==0}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(!(parseFn=$parse(expression)).constant)throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}var inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],hiddenInputBrowserCacheDirective=function(){var valueProperty={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(val){this.setAttribute("value",val)}};return{restrict:"E",priority:200,compile:function(_,attr){if("hidden"===lowercase(attr.type))return{pre:function(scope,element,attr,ctrls){var node=element[0];node.parentNode&&node.parentNode.insertBefore(node,node.nextSibling),Object.defineProperty&&Object.defineProperty(node,"value",valueProperty)}}}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){function updateElementValue(element,attr,value){var propValue=isDefined(value)?value:9===msie?"":null;element.prop("value",propValue),attr.$set("value",value)}return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){updateElementValue(elm,attr,scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){updateElementValue(elm,attr,value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=stringify(value)})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(val){return $sce.valueOf(val)});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){var value=ngBindHtmlGetter(scope);element.html($sce.getTrustedHtml(value)||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}});function classDirective(name,selector){var indexWatchExpression;return name="ngClass"+name,["$parse",function($parse){return{restrict:"AC",link:function(scope,element,attr){var oldClassString,classCounts=element.data("$classCounts"),oldModulo=!0;function digestClassCounts(classArray,count){var classesToUpdate=[];return forEach(classArray,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),classesToUpdate.join(" ")}classCounts||(classCounts=createMap(),element.data("$classCounts",classCounts)),"ngClass"!==name&&(indexWatchExpression||(indexWatchExpression=$parse("$index",function($index){return 1&$index})),scope.$watch(indexWatchExpression,function(newModulo){newModulo===selector?(classString=digestClassCounts(split(classString=oldClassString),1),attr.$addClass(classString)):function(classString){classString=digestClassCounts(split(classString),-1),attr.$removeClass(classString)}(oldClassString);var classString;oldModulo=newModulo})),scope.$watch($parse(attr[name],toClassString),function(newClassString){oldModulo===selector&&function(oldClassString,newClassString){var oldClassArray=split(oldClassString),newClassArray=split(newClassString),toRemoveArray=arrayDifference(oldClassArray,newClassArray),toAddArray=arrayDifference(newClassArray,oldClassArray),toRemoveString=digestClassCounts(toRemoveArray,-1),toAddString=digestClassCounts(toAddArray,1);attr.$addClass(toAddString),attr.$removeClass(toRemoveString)}(oldClassString,newClassString);oldClassString=newClassString})}}}];function arrayDifference(tokens1,tokens2){if(!tokens1||!tokens1.length)return[];if(!tokens2||!tokens2.length)return tokens1;var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values.push(token)}return values}function split(classString){return classString&&classString.split(" ")}function toClassString(classValue){if(!classValue)return classValue;var classString=classValue;return isArray(classValue)?classString=classValue.map(toClassString).join(" "):isObject(classValue)?classString=Object.keys(classValue).filter(function(key){return classValue[key]}).join(" "):isString(classValue)||(classString=classValue+""),classString}}var ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",void 0),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};function createEventDirective($parse,$rootScope,$exceptionHandler,directiveName,eventName,forceAsync){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName]);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};if($rootScope.$$phase)if(forceAsync)scope.$evalAsync(callback);else try{callback()}catch(error){$exceptionHandler(error)}else scope.$apply(callback)})}}}}forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope","$exceptionHandler",function($parse,$rootScope,$exceptionHandler){return createEventDirective($parse,$rootScope,$exceptionHandler,directiveName,eventName,forceAsyncEvents[eventName])}]});var ngIfDirective=["$animate","$compile",function($animate,$compile){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=$compile.$$createComment("end ngIf",$attr.ngIf),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).done(function(response){!1!==response&&(previousElements=null)}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).done(function(response){!1!==response&&(previousElement=null)}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(response){!1===response||!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(!scope.$$destroyed&&thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).done(afterAnimation)});currentElement=clone,(currentScope=newScope).$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){scope.$$destroyed||thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){if(toString.call($element[0]).match(/SVG/))return $element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,window.document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element});$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=attr.ngList||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList;ctrl.$parsers.push(function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}}),ctrl.$formatters.push(function(value){if(isArray(value))return value.join(ngList)}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",ngModelMinErr=minErr("ngModel");function NgModelController($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$q,$interpolate){var ctrl;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attr.name||"",!1)($scope),this.$$parentForm=nullFormCtrl,this.$options=defaultModelOptions,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=$parse($attr.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=$scope,this.$$rootScope=$scope.$root,this.$$attr=$attr,this.$$element=$element,this.$$animate=$animate,this.$$timeout=$timeout,this.$$parse=$parse,this.$$q=$q,this.$$exceptionHandler=$exceptionHandler,setupValidity(this),(ctrl=this).$$scope.$watch(function(scope){var modelValue=ctrl.$$ngModelGet(scope);return modelValue===ctrl.$modelValue||ctrl.$modelValue!=ctrl.$modelValue&&modelValue!=modelValue||ctrl.$$setModelValue(modelValue),modelValue})}NgModelController.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],NgModelController.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var invokeModelGetter=this.$$parse(this.$$attr.ngModel+"()"),invokeModelSetter=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function($scope){var modelValue=this.$$parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},this.$$ngModelSet=function($scope,newValue){isFunction(this.$$parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:newValue}):this.$$parsedNgModelAssign($scope,newValue)}}else if(!this.$$parsedNgModel.assign)throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,startingTag(this.$$element))},$render:noop,$isEmpty:function(value){return isUndefined(value)||""===value||null===value||value!=value},$$updateEmptyClasses:function(value){this.$isEmpty(value)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,DIRTY_CLASS),this.$$animate.addClass(this.$$element,PRISTINE_CLASS)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,PRISTINE_CLASS),this.$$animate.addClass(this.$$element,DIRTY_CLASS),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!isNumberNaN(this.$modelValue)){var viewValue=this.$$lastCommittedViewValue,modelValue=this.$$rawModelValue,prevValid=this.$valid,prevModelValue=this.$modelValue,allowInvalid=this.$options.getOption("allowInvalid"),that=this;this.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(that.$modelValue=allValid?modelValue:void 0,that.$modelValue!==prevModelValue&&that.$$writeModelToScope())})}},$$runValidators:function(modelValue,viewValue,doneCallback){this.$$currentValidationRunId++;var validatorPromises,allValid,localValidationRunId=this.$$currentValidationRunId,that=this;(function(){var errorKey=that.$$parserName;if(!isUndefined(that.$$parserValid))return that.$$parserValid||(forEach(that.$validators,function(v,name){setValidity(name,null)}),forEach(that.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,that.$$parserValid),that.$$parserValid;setValidity(errorKey,null);return!0})()?!function(){var syncValidatorsValid=!0;if(forEach(that.$validators,function(validator,name){var result=Boolean(validator(modelValue,viewValue));syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),!syncValidatorsValid)return forEach(that.$asyncValidators,function(v,name){setValidity(name,null)}),!1;return!0}()?validationDone(!1):(validatorPromises=[],allValid=!0,forEach(that.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,void 0),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?that.$$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)):validationDone(!1);function setValidity(name,isValid){localValidationRunId===that.$$currentValidationRunId&&that.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===that.$$currentValidationRunId&&doneCallback(allValid)}},$commitViewValue:function(){var viewValue=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==viewValue||""===viewValue&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(viewValue),this.$$lastCommittedViewValue=viewValue,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var modelValue=this.$$lastCommittedViewValue,that=this;if(this.$$parserValid=!isUndefined(modelValue)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(isUndefined(modelValue=this.$parsers[i](modelValue))){this.$$parserValid=!1;break}isNumberNaN(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var prevModelValue=this.$modelValue,allowInvalid=this.$options.getOption("allowInvalid");function writeToModelIfNeeded(){that.$modelValue!==prevModelValue&&that.$$writeModelToScope()}this.$$rawModelValue=modelValue,allowInvalid&&(this.$modelValue=modelValue,writeToModelIfNeeded()),this.$$runValidators(modelValue,this.$$lastCommittedViewValue,function(allValid){allowInvalid||(that.$modelValue=allValid?modelValue:void 0,writeToModelIfNeeded())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(value,trigger){this.$viewValue=value,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(trigger)},$$debounceViewValueCommit:function(trigger){var debounceDelay=this.$options.getOption("debounce");isNumber(debounceDelay[trigger])?debounceDelay=debounceDelay[trigger]:isNumber(debounceDelay.default)&&-1===this.$options.getOption("updateOn").indexOf(trigger)?debounceDelay=debounceDelay.default:isNumber(debounceDelay["*"])&&(debounceDelay=debounceDelay["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var that=this;debounceDelay>0?this.$$pendingDebounce=this.$$timeout(function(){that.$commitViewValue()},debounceDelay):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){that.$commitViewValue()})},$overrideModelOptions:function(options){this.$options=this.$options.createChild(options),this.$$setUpdateOnEvents()},$processModelValue:function(){var viewValue=this.$$format();this.$viewValue!==viewValue&&(this.$$updateEmptyClasses(viewValue),this.$viewValue=this.$$lastCommittedViewValue=viewValue,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,noop))},$$format:function(){for(var formatters=this.$formatters,idx=formatters.length,viewValue=this.$modelValue;idx--;)viewValue=formatters[idx](viewValue);return viewValue},$$setModelValue:function(modelValue){this.$modelValue=this.$$rawModelValue=modelValue,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(ev){this.$$debounceViewValueCommit(ev&&ev.type)}},addSetValidityMethod({clazz:NgModelController,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]}});var defaultModelOptions,ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass("ng-untouched").addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm,optionsCtrl=ctrls[2];optionsCtrl&&(modelCtrl.$options=optionsCtrl.$options),modelCtrl.$$initGetterSetters(),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];function setTouched(){modelCtrl.$setTouched()}modelCtrl.$$setUpdateOnEvents(),element.on("blur",function(){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(setTouched):scope.$apply(setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/;function ModelOptions(options){this.$$options=options}ModelOptions.prototype={getOption:function(name){return this.$$options[name]},createChild:function(options){var inheritAll=!1;return forEach(options=extend({},options),function(option,key){"$inherit"===option?"*"===key?inheritAll=!0:(options[key]=this.$$options[key],"updateOn"===key&&(options.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===key&&(options.updateOnDefault=!1,options[key]=trim(option.replace(DEFAULT_REGEXP,function(){return options.updateOnDefault=!0," "})))},this),inheritAll&&(delete options["*"],defaults(options,this.$$options)),defaults(options,defaultModelOptions.$$options),new ModelOptions(options)}},defaultModelOptions=new ModelOptions({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ngModelOptionsDirective=function(){function NgModelOptionsController($attrs,$scope){this.$$attrs=$attrs,this.$$scope=$scope}return NgModelOptionsController.$inject=["$attrs","$scope"],NgModelOptionsController.prototype={$onInit:function(){var parentOptions=this.parentCtrl?this.parentCtrl.$options:defaultModelOptions,modelOptionsDefinition=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=parentOptions.createChild(modelOptionsDefinition)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:NgModelOptionsController}};function defaults(dst,src){forEach(src,function(value,key){isDefined(dst[key])||(dst[key]=value)})}var ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$document","$parse",function($compile,$document,$parse){var optionTemplate=window.document.createElement("option"),optGroupTemplate=window.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:function(scope,selectElement,attr,ctrls){for(var selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;i<ii;i++)if(""===children[i].value){selectCtrl.hasEmptyOption=!0,selectCtrl.emptyOption=children.eq(i);break}selectElement.empty();var options,providedEmptyOption=!!selectCtrl.emptyOption;jqLite(optionTemplate.cloneNode(!1)).val("?");var ngOptions=function(optionsExp,selectElement,scope){var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),viewValueFn=selectAs&&$parse(selectAs)||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else for(var itemKey in optionValuesKeys=[],optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey);return optionValuesKeys}return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){for(var watchedArray=[],optionValuesKeys=getOptionValuesKeys(optionValues=optionValues||[]),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),selectValue=getTrackByValueFn(value,locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),optionItem=new Option(selectValue,viewValue,displayFn(scope,locals),groupByFn(scope,locals),disableWhenFn(scope,locals));optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?copy(option.viewValue):option.viewValue}}}}}(attr.ngOptions,selectElement,scope),listFragment=$document[0].createDocumentFragment();function addOptionElement(option,parent){var optionElement=optionTemplate.cloneNode(!1);parent.appendChild(optionElement),function(option,element){option.element=element,element.disabled=option.disabled,option.label!==element.label&&(element.label=option.label,element.textContent=option.label),element.value=option.selectValue}(option,optionElement)}function getAndUpdateSelectedOption(viewValue){var option=options.getOptionFromViewValue(viewValue),element=option&&option.element;return element&&!element.selected&&(element.selected=!0),option}selectCtrl.generateUnknownOptionValue=function(val){return"?"},multiple?(selectCtrl.writeValue=function(values){if(options){var selectedOptions=values&&values.map(getAndUpdateSelectedOption)||[];options.items.forEach(function(option){option.element.selected&&!includes(selectedOptions,option)&&(option.element.selected=!1)})}},selectCtrl.readValue=function(){var selections=[];return forEach(selectElement.val()||[],function(value){var option=options.selectValueMap[value];option&&!option.disabled&&selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue))return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){if(options){var selectedOption=selectElement[0].options[selectElement[0].selectedIndex],option=options.getOptionFromViewValue(value);selectedOption&&selectedOption.removeAttribute("selected"),option?(selectElement[0].value!==option.selectValue&&(selectCtrl.removeUnknownOption(),selectElement[0].value=option.selectValue,option.element.selected=!0),option.element.setAttribute("selected","selected")):selectCtrl.selectUnknownOrEmptyOption(value)}},selectCtrl.readValue=function(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(selectCtrl.unselectEmptyOption(),selectCtrl.removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption&&($compile(selectCtrl.emptyOption)(scope),selectElement.prepend(selectCtrl.emptyOption),selectCtrl.emptyOption[0].nodeType===NODE_TYPE_COMMENT?(selectCtrl.hasEmptyOption=!1,selectCtrl.registerOption=function(optionScope,optionEl){""===optionEl.val()&&(selectCtrl.hasEmptyOption=!0,selectCtrl.emptyOption=optionEl,selectCtrl.emptyOption.removeClass("ng-scope"),ngModelCtrl.$render(),optionEl.on("$destroy",function(){var needsRerender=selectCtrl.$isEmptyOptionSelected();selectCtrl.hasEmptyOption=!1,selectCtrl.emptyOption=void 0,needsRerender&&ngModelCtrl.$render()}))}):selectCtrl.emptyOption.removeClass("ng-scope")),scope.$watchCollection(ngOptions.getWatchables,function(){var previousValue=options&&selectCtrl.readValue();if(options)for(var i=options.items.length-1;i>=0;i--){var option=options.items[i];isDefined(option.group)?jqLiteRemove(option.element.parentNode):jqLiteRemove(option.element)}var groupElementMap={};if((options=ngOptions.getOptions()).items.forEach(function(option){var groupElement;isDefined(option.group)?((groupElement=groupElementMap[option.group])||(groupElement=optGroupTemplate.cloneNode(!1),listFragment.appendChild(groupElement),groupElement.label=null===option.group?"null":option.group,groupElementMap[option.group]=groupElement),addOptionElement(option,groupElement)):addOptionElement(option,listFragment)}),selectElement[0].appendChild(listFragment),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue(),isNotPrimitive=ngOptions.trackBy||multiple;(isNotPrimitive?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}})}}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;function updateElementText(newText){element.text(newText||"")}forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNumberNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),!(count===lastCount||countIsNaN&&isNumberNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRefMinErr=minErr("ngRef"),ngRefDirective=["$parse",function($parse){return{priority:-1,restrict:"A",compile:function(tElement,tAttrs){var controllerName=directiveNormalize(nodeName_(tElement)),getter=$parse(tAttrs.ngRef),setter=getter.assign||function(){throw ngRefMinErr("nonassign",'Expression in ngRef="{0}" is non-assignable!',tAttrs.ngRef)};return function(scope,element,attrs){var refValue;if(attrs.hasOwnProperty("ngRefRead")){if("$element"===attrs.ngRefRead)refValue=element;else if(!(refValue=element.data("$"+attrs.ngRefRead+"Controller")))throw ngRefMinErr("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',attrs.ngRefRead,tAttrs.ngRef)}else refValue=element.data("$"+controllerName+"Controller");setter(scope,refValue=refValue||element),element.on("$destroy",function(){getter(scope)===refValue&&setter(scope,null)})}}}}],ngRepeatDirective=["$parse","$animate","$compile",function($parse,$animate,$compile){var ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0==(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]},trackByIdArrayFn=function($scope,key,value){return hashKey(value)},trackByIdObjFn=function($scope,key){return key};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=$compile.$$createComment("end ngRepeat",expression),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(!(match=lhs.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var trackByIdExpFn,valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);if(trackByExp){var hashFnLocals={$id:hashKey},trackByExpGetter=$parse(trackByExp);trackByIdExpFn=function($scope,key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)}}return function($scope,$element,$attr,ctrl,$transclude){var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else for(var itemKey in trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[],collection)hasOwnProperty.call(collection,itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey);for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn($scope,key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:void 0,clone:void 0},nextBlockMap[trackById]=!0}for(var blockKey in hashFnLocals&&(hashFnLocals[valueIdentifier]=void 0),lastBlockMap){if(elementsToRemove=getBlockNodes((block=lastBlockMap[blockKey]).clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;index<length;index++)elementsToRemove[index].$$NG_REMOVED=!0;block.scope.$destroy()}for(index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],(block=nextBlockOrder[index]).scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling}while(nextNode&&nextNode.$$NG_REMOVED);getBlockStart(block)!==nextNode&&$animate.move(getBlockNodes(block.clone),null,previousNode),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,previousNode),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watchCollection(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&(newStyles||(newStyles={}),forEach(oldStyles,function(val,style){null==newStyles[style]&&(newStyles[style]="")})),newStyles&&element.css(newStyles)})}),ngSwitchDirective=["$animate","$compile",function($animate,$compile){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(response){!1!==response&&array.splice(index,1)}};scope.$watch(watchExpr,function(value){for(var i,ii;previousLeaveAnimations.length;)$animate.cancel(previousLeaveAnimations.pop());for(i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy(),(previousLeaveAnimations[i]=$animate.leave(selected)).done(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment("end ngSwitchWhen");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){forEach(attrs.ngSwitchWhen.split(attrs.ngSwitchWhenSeparator).sort().filter(function(element,index,array){return array[index-1]!==element}),function(whenCase){ctrl.cases["!"+whenCase]=ctrl.cases["!"+whenCase]||[],ctrl.cases["!"+whenCase].push({transclude:$transclude,element:element})})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeMinErr=minErr("ngTransclude"),ngTranscludeDirective=["$compile",function($compile){return{restrict:"EAC",compile:function(tElement){var fallbackLinkFn=$compile(tElement.contents());return tElement.empty(),function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw ngTranscludeMinErr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$attrs.ngTransclude===$attrs.$attr.ngTransclude&&($attrs.ngTransclude="");var slotName=$attrs.ngTransclude||$attrs.ngTranscludeSlot;function useFallbackContent(){fallbackLinkFn($scope,function(clone){$element.append(clone)})}$transclude(function(clone,transcludedScope){clone.length&&function(nodes){for(var i=0,ii=nodes.length;i<ii;i++){var node=nodes[i];if(node.nodeType!==NODE_TYPE_TEXT||node.nodeValue.trim())return!0}}(clone)?$element.append(clone):(useFallbackContent(),transcludedScope.$destroy())},null,slotName),slotName&&!$transclude.isSlotFilled(slotName)&&useFallbackContent()}}}}],scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"===attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop};function setOptionSelectedStatus(optionEl,value){optionEl.prop("selected",value),optionEl.attr("selected",value)}var SelectController=["$element","$scope",function($element,$scope){var self=this,optionsMap=new NgMap;self.selectValueMap={},self.ngModelCtrl=noopNgModelController,self.multiple=!1,self.unknownOption=jqLite(window.document.createElement("option")),self.hasEmptyOption=!1,self.emptyOption=void 0,self.renderUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),setOptionSelectedStatus(self.unknownOption,!0),$element.val(unknownVal)},self.updateUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal),setOptionSelectedStatus(self.unknownOption,!0),$element.val(unknownVal)},self.generateUnknownOptionValue=function(val){return"? "+hashKey(val)+" ?"},self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.selectEmptyOption=function(){self.emptyOption&&($element.val(""),setOptionSelectedStatus(self.emptyOption,!0))},self.unselectEmptyOption=function(){self.hasEmptyOption&&setOptionSelectedStatus(self.emptyOption,!1)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.readValue=function(){var val=$element.val(),realVal=val in self.selectValueMap?self.selectValueMap[val]:val;return self.hasOption(realVal)?realVal:null},self.writeValue=function(value){var currentlySelectedOption=$element[0].options[$element[0].selectedIndex];if(currentlySelectedOption&&setOptionSelectedStatus(jqLite(currentlySelectedOption),!1),self.hasOption(value)){self.removeUnknownOption();var hashedVal=hashKey(value);$element.val(hashedVal in self.selectValueMap?hashedVal:value);var selectedOption=$element[0].options[$element[0].selectedIndex];setOptionSelectedStatus(jqLite(selectedOption),!0)}else self.selectUnknownOrEmptyOption(value)},self.addOption=function(value,element){if(element[0].nodeType!==NODE_TYPE_COMMENT){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.hasEmptyOption=!0,self.emptyOption=element);var count=optionsMap.get(value)||0;optionsMap.set(value,count+1),scheduleRender()}},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.delete(value),""===value&&(self.hasEmptyOption=!1,self.emptyOption=void 0)):optionsMap.set(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)},self.$hasEmptyOption=function(){return self.hasEmptyOption},self.$isUnknownOptionSelected=function(){return $element[0].options[0]===self.unknownOption[0]},self.$isEmptyOptionSelected=function(){return self.hasEmptyOption&&$element[0].options[$element[0].selectedIndex]===self.emptyOption[0]},self.selectUnknownOrEmptyOption=function(value){null==value&&self.emptyOption?(self.removeUnknownOption(),self.selectEmptyOption()):self.unknownOption.parent().length?self.updateUnknownOption(value):self.renderUnknownOption(value)};var renderScheduled=!1;function scheduleRender(){renderScheduled||(renderScheduled=!0,$scope.$$postDigest(function(){renderScheduled=!1,self.ngModelCtrl.$render()}))}var updateScheduled=!1;function scheduleViewValueUpdate(renderAfter){updateScheduled||(updateScheduled=!0,$scope.$$postDigest(function(){$scope.$$destroyed||(updateScheduled=!1,self.ngModelCtrl.$setViewValue(self.readValue()),renderAfter&&self.ngModelCtrl.$render())}))}self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){var oldVal,hashedVal;optionAttrs.$attr.ngValue?optionAttrs.$observe("value",function(newVal){var removal,previouslySelected=optionElement.prop("selected");isDefined(hashedVal)&&(self.removeOption(oldVal),delete self.selectValueMap[hashedVal],removal=!0),hashedVal=hashKey(newVal),oldVal=newVal,self.selectValueMap[hashedVal]=newVal,self.addOption(newVal,optionElement),optionElement.attr("value",hashedVal),removal&&previouslySelected&&scheduleViewValueUpdate()}):interpolateValueFn?optionAttrs.$observe("value",function(newVal){var removal;self.readValue();var previouslySelected=optionElement.prop("selected");isDefined(oldVal)&&(self.removeOption(oldVal),removal=!0),oldVal=newVal,self.addOption(newVal,optionElement),removal&&previouslySelected&&scheduleViewValueUpdate()}):interpolateTextFn?optionScope.$watch(interpolateTextFn,function(newVal,oldVal){optionAttrs.$set("value",newVal);var previouslySelected=optionElement.prop("selected");oldVal!==newVal&&self.removeOption(oldVal),self.addOption(newVal,optionElement),oldVal&&previouslySelected&&scheduleViewValueUpdate()}):self.addOption(optionAttrs.value,optionElement);optionAttrs.$observe("disabled",function(newVal){("true"===newVal||newVal&&optionElement.prop("selected"))&&(self.multiple?scheduleViewValueUpdate(!0):(self.ngModelCtrl.$setViewValue(null),self.ngModelCtrl.$render()))}),optionElement.on("$destroy",function(){var currentValue=self.readValue(),removeValue=optionAttrs.value;self.removeOption(removeValue),scheduleRender(),(self.multiple&&currentValue&&-1!==currentValue.indexOf(removeValue)||currentValue===removeValue)&&scheduleViewValueUpdate(!0)})}}],selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:function(scope,element,attr,ctrls){var selectCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl)return void(selectCtrl.registerOption=noop);if(selectCtrl.ngModelCtrl=ngModelCtrl,element.on("change",function(){selectCtrl.removeUnknownOption(),scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.multiple=!0,selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){if(option.selected&&!option.disabled){var val=option.value;array.push(val in selectCtrl.selectValueMap?selectCtrl.selectValueMap[val]:val)}}),array},selectCtrl.writeValue=function(value){forEach(element.find("option"),function(option){var shouldBeSelected=!!value&&(includes(value,option.value)||includes(value,selectCtrl.selectValueMap[option.value])),currentlySelected=option.selected;shouldBeSelected!==currentlySelected&&setOptionSelectedStatus(jqLite(option),shouldBeSelected)})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}},post:function(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}}}},optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){var interpolateValueFn,interpolateTextFn;return isDefined(attr.ngValue)||(isDefined(attr.value)?interpolateValueFn=$interpolate(attr.value,!0):(interpolateTextFn=$interpolate(element.text(),!0))||attr.$set("value",element.text())),function(scope,element,attr){var parent=element.parent(),selectCtrl=parent.data("$selectController")||parent.parent().data("$selectController");selectCtrl&&selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}],requiredDirective=["$parse",function($parse){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var value=attr.hasOwnProperty("required")||$parse(attr.ngRequired)(scope);attr.ngRequired||(attr.required=!0),ctrl.$validators.required=function(modelValue,viewValue){return!value||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(newVal){value!==newVal&&(value=newVal,ctrl.$validate())})}}}}],patternDirective=["$parse",function($parse){return{restrict:"A",require:"?ngModel",compile:function(tElm,tAttr){var patternExp,parseFn;return tAttr.ngPattern&&(patternExp=tAttr.ngPattern,parseFn="/"===tAttr.ngPattern.charAt(0)&&REGEX_STRING_REGEXP.test(tAttr.ngPattern)?function(){return tAttr.ngPattern}:$parse(tAttr.ngPattern)),function(scope,elm,attr,ctrl){if(ctrl){var attrVal=attr.pattern;attr.ngPattern?attrVal=parseFn(scope):patternExp=attr.pattern;var regexp=parsePatternAttr(attrVal,patternExp,elm);attr.$observe("pattern",function(newVal){var oldRegexp=regexp;regexp=parsePatternAttr(newVal,patternExp,elm),(oldRegexp&&oldRegexp.toString())!==(regexp&&regexp.toString())&&ctrl.$validate()}),ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}}}],maxlengthDirective=["$parse",function($parse){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=attr.maxlength||$parse(attr.ngMaxlength)(scope),maxlengthParsed=parseLength(maxlength);attr.$observe("maxlength",function(value){maxlength!==value&&(maxlengthParsed=parseLength(value),maxlength=value,ctrl.$validate())}),ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlengthParsed<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlengthParsed}}}}}],minlengthDirective=["$parse",function($parse){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=attr.minlength||$parse(attr.ngMinlength)(scope),minlengthParsed=parseLength(minlength)||-1;attr.$observe("minlength",function(value){minlength!==value&&(minlengthParsed=parseLength(value)||-1,minlength=value,ctrl.$validate())}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlengthParsed}}}}}];function parsePatternAttr(regex,patternExp,elm){if(regex){if(isString(regex)&&(regex=new RegExp("^"+regex+"$")),!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));return regex}}function parseLength(val){var intVal=toInt(val);return isNumberNaN(intVal)?-1:intVal}window.angular.bootstrap?window.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();(jQuery=isUndefined(jqName)?window.jQuery:jqName?window[jqName]:void 0)&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData})):jqLite=JQLite,originalCleanData=jqLite.cleanData,jqLite.cleanData=function(elems){for(var events,elem,i=0;null!=(elem=elems[i]);i++)(events=(jqLite._data(elem)||{}).events)&&events.$destroy&&jqLite(elem).triggerHandler("$destroy");originalCleanData(elems)},angular.element=jqLite,bindJQueryFired=!0}}(),function(angular){extend(angular,{errorHandlingConfig:errorHandlingConfig,bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,callbacks:{$$counter:0},getTestability:getTestability,reloadWithDebugInfo:reloadWithDebugInfo,$$minErr:minErr,$$csp:csp,$$encodeUriSegment:encodeUriSegment,$$encodeUriQuery:encodeUriQuery,$$lowercase:lowercase,$$stringify:stringify,$$uppercase:uppercase}),(angularModule=function(window){var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng");function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var info={};return function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,info:function(value){if(isDefined(value)){if(!isObject(value))throw ngMinErr("aobj","Argument '{0}' must be an object","value");return info=value,this}return info},requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator",configBlocks),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance;function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method,queue){return queue||(queue=invokeQueue),function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),queue.push([provider,method,arguments]),moduleInstance}}})}})}(window))("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRef:ngRefDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective,input:hiddenInputBrowserCacheDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$$isDocumentHidden:$$IsDocumentHiddenProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$$intervalFactory:$$IntervalFactoryProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$jsonpCallbacks:$jsonpCallbacksProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$$taskTrackerFactory:$$TaskTrackerFactoryProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$Map:$$MapProvider,$$cookieReader:$$CookieReaderProvider})}]).info({angularVersion:"1.7.8"})}(angular),angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY_ONE="one",PLURAL_CATEGORY_OTHER="other";$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(n,opt_precision){var i=0|n,vf=function(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(function(n){var i=(n+="").indexOf(".");return-1==i?0:n.length-i-1}(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY_ONE:PLURAL_CATEGORY_OTHER}})}]),jqLite(function(){angularInit(window.document,bootstrap)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(module,exports,__webpack_require__){__webpack_require__(1),module.exports=angular},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__data_application_node_modules_angular_angular_js__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__data_application_node_modules_angular_touch_angular_touch_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__data_application_node_modules_angular_angular_js__),__webpack_require__(4)),__WEBPACK_IMPORTED_MODULE_2__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_angular_plugins_ngStorage_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__data_application_node_modules_angular_touch_angular_touch_js__),__webpack_require__(5)),__WEBPACK_IMPORTED_MODULE_3_script_loader_data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_modernizr_modernizr_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_angular_plugins_ngStorage_js__),__webpack_require__(6)),__WEBPACK_IMPORTED_MODULE_4__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_modernizr_tests_picturefill_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_script_loader_data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_modernizr_modernizr_js__),__webpack_require__(8)),__WEBPACK_IMPORTED_MODULE_5__data_application_node_modules_rollbar_dist_rollbar_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_modernizr_tests_picturefill_js__),__webpack_require__(9)),__WEBPACK_IMPORTED_MODULE_6__data_application_node_modules_gog_module_event_bus_dist_scripts_gog_module_event_bus_es5_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__data_application_node_modules_rollbar_dist_rollbar_js__),__webpack_require__(10)),__WEBPACK_IMPORTED_MODULE_7__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_utils_analytics_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__data_application_node_modules_gog_module_event_bus_dist_scripts_gog_module_event_bus_es5_js__),__webpack_require__(11)),__WEBPACK_IMPORTED_MODULE_8__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_app_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_utils_analytics_js__),__webpack_require__(12)),__WEBPACK_IMPORTED_MODULE_9__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_appManager_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_app_coffee__),__webpack_require__(13)),__WEBPACK_IMPORTED_MODULE_10_script_loader_data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_constants_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_appManager_coffee__),__webpack_require__(14)),__WEBPACK_IMPORTED_MODULE_11__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_environment_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_script_loader_data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_constants_coffee__),__webpack_require__(16)),__WEBPACK_IMPORTED_MODULE_12__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_gogAnalytics_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_environment_coffee__),__webpack_require__(17)),__WEBPACK_IMPORTED_MODULE_13__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_userResponse_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_gogAnalytics_coffee__),__webpack_require__(18)),__WEBPACK_IMPORTED_MODULE_14__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_newCart_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_userResponse_coffee__),__webpack_require__(19)),__WEBPACK_IMPORTED_MODULE_15__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_seekerFactory_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_newCart_coffee__),__webpack_require__(20)),__WEBPACK_IMPORTED_MODULE_16__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_ownedProductsPersonalizer_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_seekerFactory_coffee__),__webpack_require__(21)),__WEBPACK_IMPORTED_MODULE_17__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_userGamesProvider_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_ownedProductsPersonalizer_coffee__),__webpack_require__(22)),__WEBPACK_IMPORTED_MODULE_18__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_eventDispatcher_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_17__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_userGamesProvider_coffee__),__webpack_require__(23)),__WEBPACK_IMPORTED_MODULE_19__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_debounce_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_18__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_eventDispatcher_coffee__),__webpack_require__(24)),__WEBPACK_IMPORTED_MODULE_20__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_scrollManager_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_19__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_debounce_coffee__),__webpack_require__(25)),__WEBPACK_IMPORTED_MODULE_21__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogCssData_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_20__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_scrollManager_coffee__),__webpack_require__(26)),__WEBPACK_IMPORTED_MODULE_22__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogHrefSwapper_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_21__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogCssData_coffee__),__webpack_require__(27)),__WEBPACK_IMPORTED_MODULE_23__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogDropdown_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_22__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogHrefSwapper_coffee__),__webpack_require__(28)),__WEBPACK_IMPORTED_MODULE_24__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_picture_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_23__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogDropdown_coffee__),__webpack_require__(29)),__WEBPACK_IMPORTED_MODULE_25__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_picture_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_24__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_picture_coffee__),__webpack_require__(30)),__WEBPACK_IMPORTED_MODULE_26__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_user_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_25__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_picture_coffee__),__webpack_require__(31)),__WEBPACK_IMPORTED_MODULE_27__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_config_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_26__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_user_coffee__),__webpack_require__(32)),__WEBPACK_IMPORTED_MODULE_28__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_cartBackend_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_27__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_config_coffee__),__webpack_require__(33)),__WEBPACK_IMPORTED_MODULE_29__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_wishlist_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_28__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_cartBackend_coffee__),__webpack_require__(34)),__WEBPACK_IMPORTED_MODULE_30__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_notificationRelatedPageEnterCaller_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_29__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_wishlist_coffee__),__webpack_require__(35)),__WEBPACK_IMPORTED_MODULE_31__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_notificationRelatedPageEnterAdapter_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_30__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_notificationRelatedPageEnterCaller_coffee__),__webpack_require__(36)),__WEBPACK_IMPORTED_MODULE_32__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_chatMonitor_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_31__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_notificationRelatedPageEnterAdapter_coffee__),__webpack_require__(37)),__WEBPACK_IMPORTED_MODULE_33__data_application_node_modules_gog_module_user_storage_dist_scripts_gog_module_user_storage_es5_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_32__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_chatMonitor_coffee__),__webpack_require__(38)),__WEBPACK_IMPORTED_MODULE_34__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_filters_dictionaryOrderBy_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_33__data_application_node_modules_gog_module_user_storage_dist_scripts_gog_module_user_storage_es5_js__),__webpack_require__(39)),__WEBPACK_IMPORTED_MODULE_35__data_application_node_modules_gog_module_image_filter_dist_gog_module_image_filter_es5_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_34__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_filters_dictionaryOrderBy_coffee__),__webpack_require__(40)),__WEBPACK_IMPORTED_MODULE_36__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_filters_toMilis_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_35__data_application_node_modules_gog_module_image_filter_dist_gog_module_image_filter_es5_js__),__webpack_require__(41)),__WEBPACK_IMPORTED_MODULE_37__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_picturefill_gog_picturefill_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_36__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_filters_toMilis_coffee__),__webpack_require__(42)),__WEBPACK_IMPORTED_MODULE_38__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_modal_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_37__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_vendor_picturefill_gog_picturefill_js__),__webpack_require__(43)),__WEBPACK_IMPORTED_MODULE_39__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_productFactory_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_38__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_modal_coffee__),__webpack_require__(44)),__WEBPACK_IMPORTED_MODULE_40__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_services_productsRepository_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_39__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_productFactory_coffee__),__webpack_require__(45)),__WEBPACK_IMPORTED_MODULE_41__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_productRepositoriesManager_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_40__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_services_productsRepository_coffee__),__webpack_require__(46)),__WEBPACK_IMPORTED_MODULE_42__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_enabledFeatures_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_41__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_productRepositoriesManager_coffee__),__webpack_require__(47)),__WEBPACK_IMPORTED_MODULE_43__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_factories_productsRepositoryFactory_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_42__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_enabledFeatures_coffee__),__webpack_require__(48)),__WEBPACK_IMPORTED_MODULE_44__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_directives_gogProduct_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_43__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_factories_productsRepositoryFactory_coffee__),__webpack_require__(49)),__WEBPACK_IMPORTED_MODULE_45__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_productsPersonalizer_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_44__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_directives_gogProduct_coffee__),__webpack_require__(50)),__WEBPACK_IMPORTED_MODULE_46__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_dataRepository_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_45__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_productsPersonalizer_coffee__),__webpack_require__(51)),__WEBPACK_IMPORTED_MODULE_47__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_storageRepository_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_46__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_dataRepository_coffee__),__webpack_require__(52)),__WEBPACK_IMPORTED_MODULE_48__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_logout_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_47__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_storageRepository_coffee__),__webpack_require__(53)),__WEBPACK_IMPORTED_MODULE_49__data_application_node_modules_gog_module_listeners_manager_dist_gog_module_listeners_manager_es5_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_48__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_logout_coffee__),__webpack_require__(54)),__WEBPACK_IMPORTED_MODULE_50__data_application_node_modules_gog_module_tracking_dist_scripts_tracking_utils_es5_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_49__data_application_node_modules_gog_module_listeners_manager_dist_gog_module_listeners_manager_es5_js__),__webpack_require__(55)),__WEBPACK_IMPORTED_MODULE_51__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_redirectionService_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_50__data_application_node_modules_gog_module_tracking_dist_scripts_tracking_utils_es5_js__),__webpack_require__(56)),__WEBPACK_IMPORTED_MODULE_52__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_wishlistedProductsPersonalizer_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_51__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_redirectionService_coffee__),__webpack_require__(57)),__WEBPACK_IMPORTED_MODULE_53__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogLoginRequired_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_52__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_wishlistedProductsPersonalizer_coffee__),__webpack_require__(58)),__WEBPACK_IMPORTED_MODULE_54__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_userDataCache_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_53__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogLoginRequired_coffee__),__webpack_require__(59)),__WEBPACK_IMPORTED_MODULE_55__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_usersRepository_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_54__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_services_userDataCache_coffee__),__webpack_require__(60)),__WEBPACK_IMPORTED_MODULE_56__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_property_usersPropertyBlock_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_55__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_usersRepository_coffee__),__webpack_require__(61)),__WEBPACK_IMPORTED_MODULE_57__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_userStatuses_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_56__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_property_usersPropertyBlock_coffee__),__webpack_require__(62)),__WEBPACK_IMPORTED_MODULE_58__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_userEvents_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_57__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_userStatuses_coffee__),__webpack_require__(63)),__WEBPACK_IMPORTED_MODULE_59__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_gogUser_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_58__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_userEvents_coffee__),__webpack_require__(64)),__WEBPACK_IMPORTED_MODULE_60_script_loader_data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_component_iscroll_iscroll_gog_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_59__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_users_gogUser_coffee__),__webpack_require__(65)),__WEBPACK_IMPORTED_MODULE_61__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogIscroll_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_60_script_loader_data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_component_iscroll_iscroll_gog_js__),__webpack_require__(67)),__WEBPACK_IMPORTED_MODULE_62__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogIscrollToResult_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_61__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogIscroll_coffee__),__webpack_require__(68)),__WEBPACK_IMPORTED_MODULE_63__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_notifications_notifications_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_62__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_directives_gogIscrollToResult_coffee__),__webpack_require__(69)),__WEBPACK_IMPORTED_MODULE_64__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_utils_dataLayer_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_63__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_notifications_notifications_coffee__),__webpack_require__(70)),__WEBPACK_IMPORTED_MODULE_65__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_utils_legacyDataLayer_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_64__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_utils_dataLayer_coffee__),__webpack_require__(71)),__WEBPACK_IMPORTED_MODULE_66__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_consoleLogo_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_65__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_utils_legacyDataLayer_coffee__),__webpack_require__(72)),__WEBPACK_IMPORTED_MODULE_67__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_components_productState_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_66__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_consoleLogo_coffee__),__webpack_require__(73)),__WEBPACK_IMPORTED_MODULE_68__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_components_badge_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_67__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_components_productState_coffee__),__webpack_require__(74)),__WEBPACK_IMPORTED_MODULE_69__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_services_badges_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_68__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_components_badge_coffee__),__webpack_require__(75)),__WEBPACK_IMPORTED_MODULE_70__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_Badge_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_69__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_services_badges_coffee__),__webpack_require__(76)),__WEBPACK_IMPORTED_MODULE_71__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_components_productOsSupport_coffee__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_70__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_Badge_coffee__),__webpack_require__(77)),__WEBPACK_IMPORTED_MODULE_72_script_loader_data_application_node_modules_gog_module_galaxy_accounts_dist_scripts_gog_module_galaxy_accounts_es5_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_71__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_products_components_productOsSupport_coffee__),__webpack_require__(78)),__WEBPACK_IMPORTED_MODULE_73__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_insights_pageViewEvent_js__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_72_script_loader_data_application_node_modules_gog_module_galaxy_accounts_dist_scripts_gog_module_galaxy_accounts_es5_js__),__webpack_require__(80));__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_73__data_application_src_GOG_Website_CommonBundle_Resources_assets_scripts_insights_pageViewEvent_js__)},function(module,exports){
/**
 * @license AngularJS v1.7.7
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(window,angular){"use strict";var ngTouch=angular.module("ngTouch",[]);function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){var MAX_VERTICAL_DISTANCE=75,MAX_VERTICAL_RATIO=.3,MIN_HORIZONTAL_DISTANCE=30;return function(scope,element,attr){var startCoords,valid,swipeHandler=$parse(attr[directiveName]);var pointerTypes=["touch"];angular.isDefined(attr.ngSwipeDisableMouse)||pointerTypes.push("mouse"),$swipe.bind(element,{start:function(coords,event){startCoords=coords,valid=!0},cancel:function(event){valid=!1},end:function(coords,event){(function(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&deltaY<MAX_VERTICAL_DISTANCE&&deltaX>0&&deltaX>MIN_HORIZONTAL_DISTANCE&&deltaY/deltaX<MAX_VERTICAL_RATIO})(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}},pointerTypes)}}])}ngTouch.info({angularVersion:"1.7.7"}),ngTouch.factory("$swipe",[function(){var POINTER_EVENTS={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function getCoordinates(event){var originalEvent=event.originalEvent||event,touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=originalEvent.changedTouches&&originalEvent.changedTouches[0]||touches[0];return{x:e.clientX,y:e.clientY}}function getEvents(pointerTypes,eventType){var res=[];return angular.forEach(pointerTypes,function(pointerType){var eventName=POINTER_EVENTS[pointerType][eventType];eventName&&res.push(eventName)}),res.join(" ")}return{bind:function(element,eventHandlers,pointerTypes){var totalX,totalY,startCoords,lastPos,active=!1;pointerTypes=pointerTypes||["mouse","touch","pointer"],element.on(getEvents(pointerTypes,"start"),function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)});var events=getEvents(pointerTypes,"cancel");events&&element.on(events,function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on(getEvents(pointerTypes,"move"),function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(totalX<10&&totalY<10))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on(getEvents(pointerTypes,"end"),function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]),makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular)},function(module,exports,__webpack_require__){"use strict";!function(){function _storageFactory(storageType){return["$rootScope","$window",function($rootScope,$window){var _last$storage,_debounce,webStorage=function($window,storageType){var supported;try{supported=$window[storageType]}catch(err){supported=!1}if(supported){var key="__"+Math.round(1e7*Math.random());try{$window[storageType].setItem(key,key),$window[storageType].removeItem(key,key)}catch(err){supported=!1}}return supported}($window,storageType),$storage={};if(!webStorage)throw new Error("This browser does not support Web Storage!");$storage={$default:function(items,currentStorage){for(var k in currentStorage=currentStorage||$storage,items)angular.isDefined(currentStorage[k])?angular.isObject(currentStorage[k])&&$storage.$default(items[k],currentStorage[k]):currentStorage[k]=items[k];return $storage},$reset:function(items){for(var k in $storage)"$"===k[0]||delete $storage[k];return $storage.$default(items)}};for(var k,i=0;i<webStorage.length;i++)(k=webStorage.key(i))&&"ngStorage-"===k.slice(0,10)&&($storage[k.slice(10)]=angular.fromJson(webStorage.getItem(k)));return _last$storage=angular.copy($storage),$rootScope.$watch(function(){_debounce||(_debounce=setTimeout(function(){if(_debounce=null,!angular.equals($storage,_last$storage)){for(var k in angular.forEach($storage,function(v,k){angular.isDefined(v)&&"$"!==k[0]&&webStorage.setItem("ngStorage-"+k,angular.toJson(v)),delete _last$storage[k]}),_last$storage)webStorage.removeItem("ngStorage-"+k);_last$storage=angular.copy($storage)}},100))}),"localStorage"===storageType&&$window.addEventListener&&$window.addEventListener("storage",function(event){"ngStorage-"===event.key.slice(0,10)&&(event.newValue?$storage[event.key.slice(10)]=angular.fromJson(event.newValue):delete $storage[event.key.slice(10)],_last$storage=angular.copy($storage),$rootScope.$apply())}),$storage}]}angular.module("ngStorage",[]).factory("$localStorage",_storageFactory("localStorage")).factory("$sessionStorage",_storageFactory("sessionStorage"))}()},function(module,exports,__webpack_require__){__webpack_require__(0)(__webpack_require__(7))},function(module,exports){module.exports="/* Modernizr 2.8.3 (Custom Build) | MIT & BSD\n * Build: http://modernizr.com/download/#-cssanimations-csstransforms-csstransforms3d-csstransitions-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-css_positionsticky\n */\n;\n\n\n\nwindow.Modernizr = (function( window, document, undefined ) {\n\n    var version = '2.8.3',\n\n    Modernizr = {},\n\n    enableClasses = true,\n\n    docElement = document.documentElement,\n\n    mod = 'modernizr',\n    modElem = document.createElement(mod),\n    mStyle = modElem.style,\n\n    inputElem  ,\n\n\n    toString = {}.toString,\n\n    prefixes = ' -webkit- -moz- -o- -ms- '.split(' '),\n\n\n\n    omPrefixes = 'Webkit Moz O ms',\n\n    cssomPrefixes = omPrefixes.split(' '),\n\n    domPrefixes = omPrefixes.toLowerCase().split(' '),\n\n\n    tests = {},\n    inputs = {},\n    attrs = {},\n\n    classes = [],\n\n    slice = classes.slice,\n\n    featureName,\n\n\n    injectElementWithStyles = function( rule, callback, nodes, testnames ) {\n\n      var style, ret, node, docOverflow,\n          div = document.createElement('div'),\n                body = document.body,\n                fakeBody = body || document.createElement('body');\n\n      if ( parseInt(nodes, 10) ) {\n                      while ( nodes-- ) {\n              node = document.createElement('div');\n              node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n              div.appendChild(node);\n          }\n      }\n\n                style = ['&#173;','<style id=\"s', mod, '\">', rule, '</style>'].join('');\n      div.id = mod;\n          (body ? div : fakeBody).innerHTML += style;\n      fakeBody.appendChild(div);\n      if ( !body ) {\n                fakeBody.style.background = '';\n                fakeBody.style.overflow = 'hidden';\n          docOverflow = docElement.style.overflow;\n          docElement.style.overflow = 'hidden';\n          docElement.appendChild(fakeBody);\n      }\n\n      ret = callback(div, rule);\n        if ( !body ) {\n          fakeBody.parentNode.removeChild(fakeBody);\n          docElement.style.overflow = docOverflow;\n      } else {\n          div.parentNode.removeChild(div);\n      }\n\n      return !!ret;\n\n    },\n\n\n\n    isEventSupported = (function() {\n\n      var TAGNAMES = {\n        'select': 'input', 'change': 'input',\n        'submit': 'form', 'reset': 'form',\n        'error': 'img', 'load': 'img', 'abort': 'img'\n      };\n\n      function isEventSupported( eventName, element ) {\n\n        element = element || document.createElement(TAGNAMES[eventName] || 'div');\n        eventName = 'on' + eventName;\n\n            var isSupported = eventName in element;\n\n        if ( !isSupported ) {\n                if ( !element.setAttribute ) {\n            element = document.createElement('div');\n          }\n          if ( element.setAttribute && element.removeAttribute ) {\n            element.setAttribute(eventName, '');\n            isSupported = is(element[eventName], 'function');\n\n                    if ( !is(element[eventName], 'undefined') ) {\n              element[eventName] = undefined;\n            }\n            element.removeAttribute(eventName);\n          }\n        }\n\n        element = null;\n        return isSupported;\n      }\n      return isEventSupported;\n    })(),\n\n\n    _hasOwnProperty = ({}).hasOwnProperty, hasOwnProp;\n\n    if ( !is(_hasOwnProperty, 'undefined') && !is(_hasOwnProperty.call, 'undefined') ) {\n      hasOwnProp = function (object, property) {\n        return _hasOwnProperty.call(object, property);\n      };\n    }\n    else {\n      hasOwnProp = function (object, property) {\n        return ((property in object) && is(object.constructor.prototype[property], 'undefined'));\n      };\n    }\n\n\n    if (!Function.prototype.bind) {\n      Function.prototype.bind = function bind(that) {\n\n        var target = this;\n\n        if (typeof target != \"function\") {\n            throw new TypeError();\n        }\n\n        var args = slice.call(arguments, 1),\n            bound = function () {\n\n            if (this instanceof bound) {\n\n              var F = function(){};\n              F.prototype = target.prototype;\n              var self = new F();\n\n              var result = target.apply(\n                  self,\n                  args.concat(slice.call(arguments))\n              );\n              if (Object(result) === result) {\n                  return result;\n              }\n              return self;\n\n            } else {\n\n              return target.apply(\n                  that,\n                  args.concat(slice.call(arguments))\n              );\n\n            }\n\n        };\n\n        return bound;\n      };\n    }\n\n    function setCss( str ) {\n        mStyle.cssText = str;\n    }\n\n    function setCssAll( str1, str2 ) {\n        return setCss(prefixes.join(str1 + ';') + ( str2 || '' ));\n    }\n\n    function is( obj, type ) {\n        return typeof obj === type;\n    }\n\n    function contains( str, substr ) {\n        return !!~('' + str).indexOf(substr);\n    }\n\n    function testProps( props, prefixed ) {\n        for ( var i in props ) {\n            var prop = props[i];\n            if ( !contains(prop, \"-\") && mStyle[prop] !== undefined ) {\n                return prefixed == 'pfx' ? prop : true;\n            }\n        }\n        return false;\n    }\n\n    function testDOMProps( props, obj, elem ) {\n        for ( var i in props ) {\n            var item = obj[props[i]];\n            if ( item !== undefined) {\n\n                            if (elem === false) return props[i];\n\n                            if (is(item, 'function')){\n                                return item.bind(elem || obj);\n                }\n\n                            return item;\n            }\n        }\n        return false;\n    }\n\n    function testPropsAll( prop, prefixed, elem ) {\n\n        var ucProp  = prop.charAt(0).toUpperCase() + prop.slice(1),\n            props   = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n            if(is(prefixed, \"string\") || is(prefixed, \"undefined\")) {\n          return testProps(props, prefixed);\n\n            } else {\n          props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n          return testDOMProps(props, prefixed, elem);\n        }\n    }    tests['cssanimations'] = function() {\n        return testPropsAll('animationName');\n    };\n\n\n\n    tests['csstransforms'] = function() {\n        return !!testPropsAll('transform');\n    };\n\n\n    tests['csstransforms3d'] = function() {\n\n        var ret = !!testPropsAll('perspective');\n\n                        if ( ret && 'webkitPerspective' in docElement.style ) {\n\n                      injectElementWithStyles('@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}', function( node, rule ) {\n            ret = node.offsetLeft === 9 && node.offsetHeight === 3;\n          });\n        }\n        return ret;\n    };\n\n\n    tests['csstransitions'] = function() {\n        return testPropsAll('transition');\n    };\n\n\n\n    for ( var feature in tests ) {\n        if ( hasOwnProp(tests, feature) ) {\n                                    featureName  = feature.toLowerCase();\n            Modernizr[featureName] = tests[feature]();\n\n            classes.push((Modernizr[featureName] ? '' : 'no-') + featureName);\n        }\n    }\n\n\n\n     Modernizr.addTest = function ( feature, test ) {\n       if ( typeof feature == 'object' ) {\n         for ( var key in feature ) {\n           if ( hasOwnProp( feature, key ) ) {\n             Modernizr.addTest( key, feature[ key ] );\n           }\n         }\n       } else {\n\n         feature = feature.toLowerCase();\n\n         if ( Modernizr[feature] !== undefined ) {\n                                              return Modernizr;\n         }\n\n         test = typeof test == 'function' ? test() : test;\n\n         if (typeof enableClasses !== \"undefined\" && enableClasses) {\n           docElement.className += ' ' + (test ? '' : 'no-') + feature;\n         }\n         Modernizr[feature] = test;\n\n       }\n\n       return Modernizr;\n     };\n\n\n    setCss('');\n    modElem = inputElem = null;\n\n\n    Modernizr._version      = version;\n\n    Modernizr._prefixes     = prefixes;\n    Modernizr._domPrefixes  = domPrefixes;\n    Modernizr._cssomPrefixes  = cssomPrefixes;\n\n\n    Modernizr.hasEvent      = isEventSupported;\n\n    Modernizr.testProp      = function(prop){\n        return testProps([prop]);\n    };\n\n    Modernizr.testAllProps  = testPropsAll;\n\n\n    Modernizr.testStyles    = injectElementWithStyles;\n    Modernizr.prefixed      = function(prop, obj, elem){\n      if(!obj) {\n        return testPropsAll(prop, 'pfx');\n      } else {\n            return testPropsAll(prop, obj, elem);\n      }\n    };\n\n\n    docElement.className = docElement.className.replace(/(^|\\s)no-js(\\s|$)/, '$1$2') +\n\n                                                    (enableClasses ? ' js ' + classes.join(' ') : '');\n\n    return Modernizr;\n\n})(this, this.document);\n// Sticky positioning - constrains an element to be positioned inside the\n// intersection of its container box, and the viewport.\nModernizr.addTest('csspositionsticky', function () {\n\n    var prop = 'position:';\n    var value = 'sticky';\n    var el = document.createElement('modernizr');\n    var mStyle = el.style;\n\n    mStyle.cssText = prop + Modernizr._prefixes.join(value + ';' + prop).slice(0, -prop.length);\n\n    return mStyle.position.indexOf(value) !== -1;\n});\n;"},function(module,exports){Modernizr.addTest("pictureelement",function(){return Boolean(window.HTMLPictureElement)}),Modernizr.addTest("srcset",function(){return"srcset"in window.HTMLImageElement.prototype})},function(module,exports){!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var rollbar=__webpack_require__(1),options="undefined"!=typeof window&&window._rollbarConfig,alias=options&&options.globalAlias||"Rollbar",shimRunning="undefined"!=typeof window&&window[alias]&&"function"==typeof window[alias].shimId&&void 0!==window[alias].shimId();if("undefined"==typeof window||window._rollbarStartTime||(window._rollbarStartTime=(new Date).getTime()),!shimRunning&&options){var Rollbar=new rollbar(options);window[alias]=Rollbar}else"undefined"!=typeof window?(window.rollbar=rollbar,window._rollbarDidLoad=!0):"undefined"!=typeof self&&(self.rollbar=rollbar,self._rollbarDidLoad=!0);module.exports=rollbar},function(module,exports,__webpack_require__){"use strict";var Client=__webpack_require__(2),_=__webpack_require__(4),API=__webpack_require__(10),logger=__webpack_require__(12),globals=__webpack_require__(15),transport=__webpack_require__(16),urllib=__webpack_require__(18),transforms=__webpack_require__(19),sharedTransforms=__webpack_require__(23),predicates=__webpack_require__(24),sharedPredicates=__webpack_require__(25),errorParser=__webpack_require__(20),Instrumenter=__webpack_require__(26);function Rollbar(options,client){this.options=_.handleOptions(defaultOptions,options);var api=new API(this.options,transport,urllib);this.client=client||new Client(this.options,api,logger,"browser");var gWindow="undefined"!=typeof window&&window||"undefined"!=typeof self&&self,gDocument="undefined"!=typeof document&&document;!function(notifier,gWindow){notifier.addTransform(transforms.handleItemWithError).addTransform(transforms.ensureItemHasSomethingToSay).addTransform(transforms.addBaseInfo).addTransform(transforms.addRequestInfo(gWindow)).addTransform(transforms.addClientInfo(gWindow)).addTransform(transforms.addPluginInfo(gWindow)).addTransform(transforms.addBody).addTransform(sharedTransforms.addMessageWithError).addTransform(sharedTransforms.addTelemetryData).addTransform(sharedTransforms.addConfigToPayload).addTransform(transforms.scrubPayload).addTransform(sharedTransforms.userTransform(logger)).addTransform(sharedTransforms.itemToPayload)}(this.client.notifier,gWindow),this.client.queue.addPredicate(sharedPredicates.checkLevel).addPredicate(predicates.checkIgnore).addPredicate(sharedPredicates.userCheckIgnore(logger)).addPredicate(sharedPredicates.urlIsNotBlacklisted(logger)).addPredicate(sharedPredicates.urlIsWhitelisted(logger)).addPredicate(sharedPredicates.messageIsIgnored(logger)),(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(globals.captureUncaughtExceptions(gWindow,this),globals.wrapGlobals(gWindow,this)),(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&globals.captureUnhandledRejections(gWindow,this),this.instrumenter=new Instrumenter(this.options,this.client.telemeter,this,gWindow,gDocument),this.instrumenter.instrument()}var _instance=null;function handleUninitialized(maybeCallback){var message="Rollbar is not initialized";logger.error(message),maybeCallback&&maybeCallback(new Error(message))}function _getFirstFunction(args){for(var i=0,len=args.length;i<len;++i)if(_.isFunction(args[i]))return args[i]}Rollbar.init=function(options,client){return _instance?_instance.global(options).configure(options):_instance=new Rollbar(options,client)},Rollbar.prototype.global=function(options){return this.client.global(options),this},Rollbar.global=function(options){if(_instance)return _instance.global(options);handleUninitialized()},Rollbar.prototype.configure=function(options,payloadData){var oldOptions=this.options,payload={};return payloadData&&(payload={payload:payloadData}),this.options=_.handleOptions(oldOptions,options,payload),this.client.configure(this.options,payloadData),this.instrumenter.configure(this.options),this},Rollbar.configure=function(options,payloadData){if(_instance)return _instance.configure(options,payloadData);handleUninitialized()},Rollbar.prototype.lastError=function(){return this.client.lastError},Rollbar.lastError=function(){if(_instance)return _instance.lastError();handleUninitialized()},Rollbar.prototype.log=function(){var item=this._createItem(arguments),uuid=item.uuid;return this.client.log(item),{uuid:uuid}},Rollbar.log=function(){if(_instance)return _instance.log.apply(_instance,arguments);handleUninitialized(_getFirstFunction(arguments))},Rollbar.prototype.debug=function(){var item=this._createItem(arguments),uuid=item.uuid;return this.client.debug(item),{uuid:uuid}},Rollbar.debug=function(){if(_instance)return _instance.debug.apply(_instance,arguments);handleUninitialized(_getFirstFunction(arguments))},Rollbar.prototype.info=function(){var item=this._createItem(arguments),uuid=item.uuid;return this.client.info(item),{uuid:uuid}},Rollbar.info=function(){if(_instance)return _instance.info.apply(_instance,arguments);handleUninitialized(_getFirstFunction(arguments))},Rollbar.prototype.warn=function(){var item=this._createItem(arguments),uuid=item.uuid;return this.client.warn(item),{uuid:uuid}},Rollbar.warn=function(){if(_instance)return _instance.warn.apply(_instance,arguments);handleUninitialized(_getFirstFunction(arguments))},Rollbar.prototype.warning=function(){var item=this._createItem(arguments),uuid=item.uuid;return this.client.warning(item),{uuid:uuid}},Rollbar.warning=function(){if(_instance)return _instance.warning.apply(_instance,arguments);handleUninitialized(_getFirstFunction(arguments))},Rollbar.prototype.error=function(){var item=this._createItem(arguments),uuid=item.uuid;return this.client.error(item),{uuid:uuid}},Rollbar.error=function(){if(_instance)return _instance.error.apply(_instance,arguments);handleUninitialized(_getFirstFunction(arguments))},Rollbar.prototype.critical=function(){var item=this._createItem(arguments),uuid=item.uuid;return this.client.critical(item),{uuid:uuid}},Rollbar.critical=function(){if(_instance)return _instance.critical.apply(_instance,arguments);handleUninitialized(_getFirstFunction(arguments))},Rollbar.prototype.handleUncaughtException=function(message,url,lineno,colno,error,context){var item,stackInfo=_.makeUnhandledStackInfo(message,url,lineno,colno,error,"onerror","uncaught exception",errorParser);_.isError(error)?(item=this._createItem([message,error,context]))._unhandledStackInfo=stackInfo:_.isError(url)?(item=this._createItem([message,url,context]))._unhandledStackInfo=stackInfo:(item=this._createItem([message,context])).stackInfo=stackInfo,item.level=this.options.uncaughtErrorLevel,item._isUncaught=!0,this.client.log(item)},Rollbar.prototype.handleUnhandledRejection=function(reason,promise){var message="unhandled rejection was null or undefined!";if(reason)if(reason.message)message=reason.message;else{var reasonResult=_.stringify(reason);reasonResult.value&&(message=reasonResult.value)}var item,context=reason&&reason._rollbarContext||promise&&promise._rollbarContext;_.isError(reason)?item=this._createItem([message,reason,context]):(item=this._createItem([message,reason,context])).stackInfo=_.makeUnhandledStackInfo(message,"",0,0,null,"unhandledrejection","",errorParser),item.level=this.options.uncaughtErrorLevel,item._isUncaught=!0,item._originalArgs=item._originalArgs||[],item._originalArgs.push(promise),this.client.log(item)},Rollbar.prototype.wrap=function(f,context,_before){try{var ctxFn;if(ctxFn=_.isFunction(context)?context:function(){return context||{}},!_.isFunction(f))return f;if(f._isWrap)return f;if(!f._rollbar_wrapped&&(f._rollbar_wrapped=function(){_before&&_.isFunction(_before)&&_before.apply(this,arguments);try{return f.apply(this,arguments)}catch(exc){var e=exc;throw e&&(_.isType(e,"string")&&(e=new String(e)),e._rollbarContext=ctxFn()||{},e._rollbarContext._wrappedSource=f.toString(),window._rollbarWrappedError=e),e}},f._rollbar_wrapped._isWrap=!0,f.hasOwnProperty))for(var prop in f)f.hasOwnProperty(prop)&&(f._rollbar_wrapped[prop]=f[prop]);return f._rollbar_wrapped}catch(e){return f}},Rollbar.wrap=function(f,context){if(_instance)return _instance.wrap(f,context);handleUninitialized()},Rollbar.prototype.captureEvent=function(metadata,level){return this.client.captureEvent(metadata,level)},Rollbar.captureEvent=function(metadata,level){if(_instance)return _instance.captureEvent(metadata,level);handleUninitialized()},Rollbar.prototype.captureDomContentLoaded=function(e,ts){return ts||(ts=new Date),this.client.captureDomContentLoaded(ts)},Rollbar.prototype.captureLoad=function(e,ts){return ts||(ts=new Date),this.client.captureLoad(ts)},Rollbar.prototype._createItem=function(args){return _.createItem(args,logger,this)};var defaultOptions={version:"2.5.3",scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp"],logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",endpoint:"api.rollbar.com/api/1/item/",verbose:!1,enabled:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0};module.exports=Rollbar},function(module,exports,__webpack_require__){"use strict";var RateLimiter=__webpack_require__(3),Queue=__webpack_require__(7),Notifier=__webpack_require__(8),Telemeter=__webpack_require__(9),_=__webpack_require__(4);function Rollbar(options,api,logger,platform){this.options=_.merge(options),this.logger=logger,Rollbar.rateLimiter.configureGlobal(this.options),Rollbar.rateLimiter.setPlatformOptions(platform,this.options),this.queue=new Queue(Rollbar.rateLimiter,api,logger,this.options),this.notifier=new Notifier(this.queue,this.options),this.telemeter=new Telemeter(this.options),this.lastError=null,this.lastErrorHash="none"}Rollbar.rateLimiter=new RateLimiter({maxItems:0,itemsPerMinute:60}),Rollbar.prototype.global=function(options){return Rollbar.rateLimiter.configureGlobal(options),this},Rollbar.prototype.configure=function(options,payloadData){var oldOptions=this.options,payload={};return payloadData&&(payload={payload:payloadData}),this.options=_.merge(oldOptions,options,payload),this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),this.global(this.options),this},Rollbar.prototype.log=function(item){var level=this._defaultLogLevel();return this._log(level,item)},Rollbar.prototype.debug=function(item){this._log("debug",item)},Rollbar.prototype.info=function(item){this._log("info",item)},Rollbar.prototype.warn=function(item){this._log("warning",item)},Rollbar.prototype.warning=function(item){this._log("warning",item)},Rollbar.prototype.error=function(item){this._log("error",item)},Rollbar.prototype.critical=function(item){this._log("critical",item)},Rollbar.prototype.wait=function(callback){this.queue.wait(callback)},Rollbar.prototype.captureEvent=function(metadata,level){return this.telemeter.captureEvent(metadata,level)},Rollbar.prototype.captureDomContentLoaded=function(ts){return this.telemeter.captureDomContentLoaded(ts)},Rollbar.prototype.captureLoad=function(ts){return this.telemeter.captureLoad(ts)},Rollbar.prototype._log=function(defaultLevel,item){var callback;if(item.callback&&(callback=item.callback,delete item.callback),this._sameAsLastError(item)){if(callback){var error=new Error("ignored identical item");error.item=item,callback(error)}}else try{item.level=item.level||defaultLevel,this.telemeter._captureRollbarItem(item),item.telemetryEvents=this.telemeter.copyEvents(),this.notifier.log(item,callback)}catch(e){this.logger.error(e)}},Rollbar.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},Rollbar.prototype._sameAsLastError=function(item){if(!item._isUncaught)return!1;var itemHash=function(item){var message=item.message||"",stack=(item.err||{}).stack||String(item.err);return message+"::"+stack}(item);return this.lastErrorHash===itemHash||(this.lastError=item.err,this.lastErrorHash=itemHash,!1)},module.exports=Rollbar},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);function RateLimiter(options){this.startTime=_.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(options)}function checkRate(item,limit,counter){return!item.ignoreRateLimit&&limit>=1&&counter>limit}function shouldSendValue(platform,options,error,shouldSend,globalRateLimit,limitPerMin,perMinute){var payload=null;return error&&(error=new Error(error)),error||shouldSend||(payload=function(platform,options,globalRateLimit,limitPerMin,perMinute){var msg,environment=options.environment||options.payload&&options.payload.environment;msg=perMinute?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.";var item={body:{message:{body:msg,extra:{maxItems:globalRateLimit,itemsPerMinute:limitPerMin}}},language:"javascript",environment:environment,notifier:{version:options.notifier&&options.notifier.version||options.version}};"browser"===platform?(item.platform="browser",item.framework="browser-js",item.notifier.name="rollbar-browser-js"):"server"===platform?(item.framework=options.framework||"node-js",item.notifier.name=options.notifier.name):"react-native"===platform&&(item.framework=options.framework||"react-native",item.notifier.name=options.notifier.name);return item}(platform,options,globalRateLimit,limitPerMin,perMinute)),{error:error,shouldSend:shouldSend,payload:payload}}RateLimiter.globalSettings={startTime:_.now(),maxItems:void 0,itemsPerMinute:void 0},RateLimiter.prototype.configureGlobal=function(options){void 0!==options.startTime&&(RateLimiter.globalSettings.startTime=options.startTime),void 0!==options.maxItems&&(RateLimiter.globalSettings.maxItems=options.maxItems),void 0!==options.itemsPerMinute&&(RateLimiter.globalSettings.itemsPerMinute=options.itemsPerMinute)},RateLimiter.prototype.shouldSend=function(item,now){var elapsedTime=(now=now||_.now())-this.startTime;(elapsedTime<0||elapsedTime>=6e4)&&(this.startTime=now,this.perMinCounter=0);var globalRateLimit=RateLimiter.globalSettings.maxItems,globalRateLimitPerMin=RateLimiter.globalSettings.itemsPerMinute;if(checkRate(item,globalRateLimit,this.counter))return shouldSendValue(this.platform,this.platformOptions,globalRateLimit+" max items reached",!1);if(checkRate(item,globalRateLimitPerMin,this.perMinCounter))return shouldSendValue(this.platform,this.platformOptions,globalRateLimitPerMin+" items per minute reached",!1);this.counter++,this.perMinCounter++;var shouldSend=!checkRate(item,globalRateLimit,this.counter),perMinute=shouldSend;return shouldSend=shouldSend&&!checkRate(item,globalRateLimitPerMin,this.perMinCounter),shouldSendValue(this.platform,this.platformOptions,null,shouldSend,globalRateLimit,globalRateLimitPerMin,perMinute)},RateLimiter.prototype.setPlatformOptions=function(platform,options){this.platform=platform,this.platformOptions=options},module.exports=RateLimiter},function(module,exports,__webpack_require__){"use strict";var merge=__webpack_require__(5),RollbarJSON={},__initRollbarJSON=!1;function isType(x,t){return t===typeName(x)}function typeName(x){var name=typeof x;return"object"!==name?name:x?x instanceof Error?"error":{}.toString.call(x).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function isFunction(f){return isType(f,"function")}function isNativeFunction(f){var value,type,funcMatchString=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),reIsNative=RegExp("^"+funcMatchString+"$");return type=typeof(value=f),null!=value&&("object"==type||"function"==type)&&reIsNative.test(f)}function traverse(obj,func,seen){var k,v,i,isObj=isType(obj,"object"),isArray=isType(obj,"array"),keys=[];if(isObj&&-1!==seen.indexOf(obj))return obj;if(seen.push(obj),isObj)for(k in obj)Object.prototype.hasOwnProperty.call(obj,k)&&keys.push(k);else if(isArray)for(i=0;i<obj.length;++i)keys.push(i);var result=isObj?{}:[],same=!0;for(i=0;i<keys.length;++i)v=obj[k=keys[i]],result[k]=func(k,v,seen),same=same&&result[k]===obj[k];return 0==keys.length||same?obj:result}function redact(){return"********"}function uuid4(){var d=now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===c?r:7&r|8).toString(16)})}__initRollbarJSON||(__initRollbarJSON=!0,isType(JSON,"undefined")||(isNativeFunction(JSON.stringify)&&(RollbarJSON.stringify=JSON.stringify),isNativeFunction(JSON.parse)&&(RollbarJSON.parse=JSON.parse)),isFunction(RollbarJSON.stringify)&&isFunction(RollbarJSON.parse)||__webpack_require__(6)(RollbarJSON));var parseUriOptions={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function stringify(obj,backup){var value,error;try{value=RollbarJSON.stringify(obj)}catch(jsonError){if(backup&&isFunction(backup))try{value=backup(obj)}catch(backupError){error=backupError}else error=jsonError}return{error:error,value:value}}function wrapCallback(logger,f){return function(err,resp){try{f(err,resp)}catch(e){logger.error(e)}}}function now(){return Date.now?+Date.now():+new Date}module.exports={addParamsAndAccessTokenToPath:function(accessToken,options,params){(params=params||{}).access_token=accessToken;var k,paramsArray=[];for(k in params)Object.prototype.hasOwnProperty.call(params,k)&&paramsArray.push([k,params[k]].join("="));var query="?"+paramsArray.sort().join("&");(options=options||{}).path=options.path||"";var p,qs=options.path.indexOf("?"),h=options.path.indexOf("#");-1!==qs&&(-1===h||h>qs)?(p=options.path,options.path=p.substring(0,qs)+query+"&"+p.substring(qs+1)):-1!==h?(p=options.path,options.path=p.substring(0,h)+query+p.substring(h)):options.path=options.path+query},createItem:function(args,logger,notifier,requestKeys,lambdaContext){for(var message,err,custom,callback,request,arg,extraArgs=[],i=0,l=args.length;i<l;++i){var typ=typeName(arg=args[i]);switch(typ){case"undefined":break;case"string":message?extraArgs.push(arg):message=arg;break;case"function":callback=wrapCallback(logger,arg);break;case"date":extraArgs.push(arg);break;case"error":case"domexception":err?extraArgs.push(arg):err=arg;break;case"object":case"array":if(arg instanceof Error||"undefined"!=typeof DOMException&&arg instanceof DOMException){err?extraArgs.push(arg):err=arg;break}if(requestKeys&&"object"===typ&&!request){for(var j=0,len=requestKeys.length;j<len;++j)if(void 0!==arg[requestKeys[j]]){request=arg;break}if(request)break}custom?extraArgs.push(arg):custom=arg;break;default:if(arg instanceof Error||"undefined"!=typeof DOMException&&arg instanceof DOMException){err?extraArgs.push(arg):err=arg;break}extraArgs.push(arg)}}extraArgs.length>0&&((custom=merge(custom)).extraArgs=extraArgs);var item={message:message,err:err,custom:custom,timestamp:now(),callback:callback,uuid:uuid4()};return custom&&void 0!==custom.level&&(item.level=custom.level,delete custom.level),requestKeys&&request&&(item.request=request),lambdaContext&&(item.lambdaContext=lambdaContext),item._originalArgs=args,item},filterIp:function(requestData,captureIp){if(requestData&&requestData.user_ip&&!0!==captureIp){var newIp=requestData.user_ip;if(captureIp)try{var parts;if(-1!==newIp.indexOf("."))(parts=newIp.split(".")).pop(),parts.push("0"),newIp=parts.join(".");else if(-1!==newIp.indexOf(":")){if((parts=newIp.split(":")).length>2){var beginning=parts.slice(0,3),slashIdx=beginning[2].indexOf("/");-1!==slashIdx&&(beginning[2]=beginning[2].substring(0,slashIdx)),newIp=beginning.concat("0000:0000:0000:0000:0000").join(":")}}else newIp=null}catch(e){newIp=null}else newIp=null;requestData.user_ip=newIp}},formatArgsAsString:function(args){var i,len,arg,result=[];for(i=0,len=args.length;i<len;i++){switch(typeName(arg=args[i])){case"object":(arg=(arg=stringify(arg)).error||arg.value).length>500&&(arg=arg.substr(0,497)+"...");break;case"null":arg="null";break;case"undefined":arg="undefined";break;case"symbol":arg=arg.toString()}result.push(arg)}return result.join(" ")},formatUrl:function(u,protocol){if(!(protocol=protocol||u.protocol)&&u.port&&(80===u.port?protocol="http:":443===u.port&&(protocol="https:")),protocol=protocol||"https:",!u.hostname)return null;var result=protocol+"//"+u.hostname;return u.port&&(result=result+":"+u.port),u.path&&(result+=u.path),result},get:function(obj,path){if(obj){var keys=path.split("."),result=obj;try{for(var i=0,len=keys.length;i<len;++i)result=result[keys[i]]}catch(e){result=void 0}return result}},handleOptions:function(current,input,payload){var result=merge(current,input,payload);return!input||input.overwriteScrubFields?result:(input.scrubFields&&(result.scrubFields=(current.scrubFields||[]).concat(input.scrubFields)),result)},isError:function(e){return isType(e,"error")},isFunction:isFunction,isIterable:function(i){var type=typeName(i);return"object"===type||"array"===type},isNativeFunction:isNativeFunction,isType:isType,jsonParse:function(s){var value,error;try{value=RollbarJSON.parse(s)}catch(e){error=e}return{error:error,value:value}},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(message,url,lineno,colno,error,mode,backupMessage,errorParser){var location={url:url||"",line:lineno,column:colno};location.func=errorParser.guessFunctionName(location.url,location.line),location.context=errorParser.gatherContext(location.url,location.line);var href=document&&document.location&&document.location.href,useragent=window&&window.navigator&&window.navigator.userAgent;return{mode:mode,message:error?String(error):message||backupMessage,url:href,stack:[location],useragent:useragent}},merge:merge,now:now,redact:redact,sanitizeUrl:function(url){var baseUrlParts=function(str){if(isType(str,"string")){for(var o=parseUriOptions,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=o.key.length;i--;)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)}),uri}}(url);return baseUrlParts?(""===baseUrlParts.anchor&&(baseUrlParts.source=baseUrlParts.source.replace("#","")),url=baseUrlParts.source.replace("?"+baseUrlParts.query,"")):"(unknown)"},scrub:function(data,scrubFields){var paramRes=function(scrubFields){for(var pat,ret=[],i=0;i<scrubFields.length;++i)pat="^\\[?(%5[bB])?"+scrubFields[i]+"\\[?(%5[bB])?\\]?(%5[dD])?$",ret.push(new RegExp(pat,"i"));return ret}(scrubFields=scrubFields||[]),queryRes=function(scrubFields){for(var pat,ret=[],i=0;i<scrubFields.length;++i)pat="\\[?(%5[bB])?"+scrubFields[i]+"\\[?(%5[bB])?\\]?(%5[dD])?",ret.push(new RegExp("("+pat+"=)([^&\\n]+)","igm"));return ret}(scrubFields);function redactQueryParam(dummy0,paramPart){return paramPart+"********"}return traverse(data,function scrubber(k,v,seen){var tmpV=function(k,v){var i;for(i=0;i<paramRes.length;++i)if(paramRes[i].test(k)){v="********";break}return v}(k,v);return tmpV===v?isType(v,"object")||isType(v,"array")?traverse(v,scrubber,seen):function(v){var i;if(isType(v,"string"))for(i=0;i<queryRes.length;++i)v=v.replace(queryRes[i],redactQueryParam);return v}(tmpV):tmpV},[])},set:function(obj,path,value){if(obj){var keys=path.split("."),len=keys.length;if(!(len<1))if(1!==len)try{for(var temp=obj[keys[0]]||{},replacement=temp,i=1;i<len-1;i++)temp[keys[i]]=temp[keys[i]]||{},temp=temp[keys[i]];temp[keys[len-1]]=value,obj[keys[0]]=replacement}catch(e){return}else obj[keys[0]]=value}},stringify:stringify,traverse:traverse,typeName:typeName,uuid4:uuid4}},function(module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isPlainObject=function(obj){if(!obj||"[object Object]"!==toStr.call(obj))return!1;var key,hasOwnConstructor=hasOwn.call(obj,"constructor"),hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf)return!1;for(key in obj);return void 0===key||hasOwn.call(obj,key)};module.exports=function merge(){var i,src,copy,clone,name,result={},current=null,length=arguments.length;for(i=0;i<length;i++)if(null!=(current=arguments[i]))for(name in current)src=result[name],result!==(copy=current[name])&&(copy&&isPlainObject(copy)?(clone=src&&isPlainObject(src)?src:{},result[name]=merge(clone,copy)):void 0!==copy&&(result[name]=copy));return result}},function(module,exports){module.exports=function(JSON){var gap,indent,meta,rep,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?"0"+n:n}function this_value(){return this.valueOf()}function quote(string){return rx_escapable.lastIndex=0,rx_escapable.test(string)?'"'+string.replace(rx_escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;i<space;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;i<length;i+=1)"string"==typeof rep[i]&&(v=str(k=rep[i],value))&&partial.push(quote(k)+(gap?": ":":")+v);else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value))&&partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}("",{"":value})}),"function"!=typeof JSON.parse&&(JSON.parse=(escapes={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},string={go:function(){state="ok"},firstokey:function(){key=value,state="colon"},okey:function(){key=value,state="colon"},ovalue:function(){state="ocomma"},firstavalue:function(){state="acomma"},avalue:function(){state="acomma"}},number={go:function(){state="ok"},ovalue:function(){state="ocomma"},firstavalue:function(){state="acomma"},avalue:function(){state="acomma"}},action={"{":{go:function(){stack.push({state:"ok"}),container={},state="firstokey"},ovalue:function(){stack.push({container:container,state:"ocomma",key:key}),container={},state="firstokey"},firstavalue:function(){stack.push({container:container,state:"acomma"}),container={},state="firstokey"},avalue:function(){stack.push({container:container,state:"acomma"}),container={},state="firstokey"}},"}":{firstokey:function(){var pop=stack.pop();value=container,container=pop.container,key=pop.key,state=pop.state},ocomma:function(){var pop=stack.pop();container[key]=value,value=container,container=pop.container,key=pop.key,state=pop.state}},"[":{go:function(){stack.push({state:"ok"}),container=[],state="firstavalue"},ovalue:function(){stack.push({container:container,state:"ocomma",key:key}),container=[],state="firstavalue"},firstavalue:function(){stack.push({container:container,state:"acomma"}),container=[],state="firstavalue"},avalue:function(){stack.push({container:container,state:"acomma"}),container=[],state="firstavalue"}},"]":{firstavalue:function(){var pop=stack.pop();value=container,container=pop.container,key=pop.key,state=pop.state},acomma:function(){var pop=stack.pop();container.push(value),value=container,container=pop.container,key=pop.key,state=pop.state}},":":{colon:function(){if(Object.hasOwnProperty.call(container,key))throw new SyntaxError("Duplicate key '"+key+'"');state="ovalue"}},",":{ocomma:function(){container[key]=value,state="okey"},acomma:function(){container.push(value),state="avalue"}},true:{go:function(){value=!0,state="ok"},ovalue:function(){value=!0,state="ocomma"},firstavalue:function(){value=!0,state="acomma"},avalue:function(){value=!0,state="acomma"}},false:{go:function(){value=!1,state="ok"},ovalue:function(){value=!1,state="ocomma"},firstavalue:function(){value=!1,state="acomma"},avalue:function(){value=!1,state="acomma"}},null:{go:function(){value=null,state="ok"},ovalue:function(){value=null,state="ocomma"},firstavalue:function(){value=null,state="acomma"},avalue:function(){value=null,state="acomma"}}},function(source,reviver){var result,text,tx=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;state="go",stack=[];try{for(;result=tx.exec(source);)result[1]?action[result[1]][state]():result[2]?(value=+result[2],number[state]()):(text=result[3],value=text.replace(/\\(?:u(.{4})|([^u]))/g,function(ignore,b,c){return b?String.fromCharCode(parseInt(b,16)):escapes[c]}),string[state]()),source=source.slice(result[0].length)}catch(e){state=e}if("ok"!==state||/[^\u0020\t\n\r]/.test(source))throw state instanceof SyntaxError?state:new SyntaxError("JSON");return"function"==typeof reviver?function walk(holder,key){var k,v,val=holder[key];if(val&&"object"==typeof val)for(k in value)Object.prototype.hasOwnProperty.call(val,k)&&(void 0!==(v=walk(val,k))?val[k]=v:delete val[k]);return reviver.call(holder,key,val)}({"":value},""):value}));var state,stack,container,key,value,escapes,string,number,action}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);function Queue(rateLimiter,api,logger,options){this.rateLimiter=rateLimiter,this.api=api,this.logger=logger,this.options=options,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}Queue.prototype.configure=function(options){this.api&&this.api.configure(options);var oldOptions=this.options;return this.options=_.merge(oldOptions,options),this},Queue.prototype.addPredicate=function(predicate){return _.isFunction(predicate)&&this.predicates.push(predicate),this},Queue.prototype.addPendingItem=function(item){this.pendingItems.push(item)},Queue.prototype.removePendingItem=function(item){var idx=this.pendingItems.indexOf(item);-1!==idx&&this.pendingItems.splice(idx,1)},Queue.prototype.addItem=function(item,callback,originalError,originalItem){callback&&_.isFunction(callback)||(callback=function(){});var predicateResult=this._applyPredicates(item);if(predicateResult.stop)return this.removePendingItem(originalItem),void callback(predicateResult.err);this._maybeLog(item,originalError),this.removePendingItem(originalItem),this.pendingRequests.push(item);try{this._makeApiRequest(item,function(err,resp){this._dequeuePendingRequest(item),callback(err,resp)}.bind(this))}catch(e){this._dequeuePendingRequest(item),callback(e)}},Queue.prototype.wait=function(callback){_.isFunction(callback)&&(this.waitCallback=callback,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},Queue.prototype._applyPredicates=function(item){for(var p=null,i=0,len=this.predicates.length;i<len;i++)if(!(p=this.predicates[i](item,this.options))||void 0!==p.err)return{stop:!0,err:p.err};return{stop:!1,err:null}},Queue.prototype._makeApiRequest=function(item,callback){var rateLimitResponse=this.rateLimiter.shouldSend(item);rateLimitResponse.shouldSend?this.api.postItem(item,function(err,resp){err?this._maybeRetry(err,item,callback):callback(err,resp)}.bind(this)):rateLimitResponse.error?callback(rateLimitResponse.error):this.api.postItem(rateLimitResponse.payload,callback)};var RETRIABLE_ERRORS=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];Queue.prototype._maybeRetry=function(err,item,callback){var shouldRetry=!1;if(this.options.retryInterval)for(var i=0,len=RETRIABLE_ERRORS.length;i<len;i++)if(err.code===RETRIABLE_ERRORS[i]){shouldRetry=!0;break}shouldRetry?this._retryApiRequest(item,callback):callback(err)},Queue.prototype._retryApiRequest=function(item,callback){this.retryQueue.push({item:item,callback:callback}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var retryObject=this.retryQueue.shift();this._makeApiRequest(retryObject.item,retryObject.callback)}}.bind(this),this.options.retryInterval))},Queue.prototype._dequeuePendingRequest=function(item){var idx=this.pendingRequests.indexOf(item);-1!==idx&&(this.pendingRequests.splice(idx,1),this._maybeCallWait())},Queue.prototype._maybeLog=function(data,originalError){if(this.logger&&this.options.verbose){var message=originalError;if(message=(message=message||_.get(data,"body.trace.exception.message"))||_.get(data,"body.trace_chain.0.exception.message"))return void this.logger.error(message);(message=_.get(data,"body.message.body"))&&this.logger.log(message)}},Queue.prototype._maybeCallWait=function(){return!(!_.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length)&&(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),!0)},module.exports=Queue},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);function Notifier(queue,options){this.queue=queue,this.options=options,this.transforms=[]}Notifier.prototype.configure=function(options){this.queue&&this.queue.configure(options);var oldOptions=this.options;return this.options=_.merge(oldOptions,options),this},Notifier.prototype.addTransform=function(transform){return _.isFunction(transform)&&this.transforms.push(transform),this},Notifier.prototype.log=function(item,callback){if(callback&&_.isFunction(callback)||(callback=function(){}),!this.options.enabled)return callback(new Error("Rollbar is not enabled"));this.queue.addPendingItem(item);var originalError=item.err;this._applyTransforms(item,function(err,i){if(err)return this.queue.removePendingItem(item),callback(err,null);this.queue.addItem(i,callback,originalError,item)}.bind(this))},Notifier.prototype._applyTransforms=function(item,callback){var transformIndex=-1,transformsLength=this.transforms.length,transforms=this.transforms,options=this.options,cb=function(err,i){err?callback(err,null):++transformIndex!==transformsLength?transforms[transformIndex](i,options,cb):callback(null,i)};cb(null,item)},module.exports=Notifier},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4),MAX_EVENTS=100;function Telemeter(options){this.queue=[],this.options=_.merge(options);var maxTelemetryEvents=this.options.maxTelemetryEvents||MAX_EVENTS;this.maxQueueSize=Math.max(0,Math.min(maxTelemetryEvents,MAX_EVENTS))}Telemeter.prototype.configure=function(options){var oldOptions=this.options;this.options=_.merge(oldOptions,options);var maxTelemetryEvents=this.options.maxTelemetryEvents||MAX_EVENTS,newMaxEvents=Math.max(0,Math.min(maxTelemetryEvents,MAX_EVENTS)),deleteCount=0;this.maxQueueSize>newMaxEvents&&(deleteCount=this.maxQueueSize-newMaxEvents),this.maxQueueSize=newMaxEvents,this.queue.splice(0,deleteCount)},Telemeter.prototype.copyEvents=function(){var events=Array.prototype.slice.call(this.queue,0);if(_.isFunction(this.options.filterTelemetry))try{for(var i=events.length;i--;)this.options.filterTelemetry(events[i])&&events.splice(i,1)}catch(e){this.options.filterTelemetry=null}return events},Telemeter.prototype.capture=function(type,metadata,level,rollbarUUID,timestamp){var e={level:function(type,level){if(level)return level;return{error:"error",manual:"info"}[type]||"info"}(type,level),type:type,timestamp_ms:timestamp||_.now(),body:metadata,source:"client"};rollbarUUID&&(e.uuid=rollbarUUID);try{if(_.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(e))return!1}catch(exc){this.options.filterTelemetry=null}return this.push(e),e},Telemeter.prototype.captureEvent=function(metadata,level,rollbarUUID){return this.capture("manual",metadata,level,rollbarUUID)},Telemeter.prototype.captureError=function(err,level,rollbarUUID,timestamp){var metadata={message:err.message||String(err)};return err.stack&&(metadata.stack=err.stack),this.capture("error",metadata,level,rollbarUUID,timestamp)},Telemeter.prototype.captureLog=function(message,level,rollbarUUID,timestamp){return this.capture("log",{message:message},level,rollbarUUID,timestamp)},Telemeter.prototype.captureNetwork=function(metadata,subtype,rollbarUUID,requestData){subtype=subtype||"xhr",metadata.subtype=metadata.subtype||subtype,requestData&&(metadata.request=requestData);var level=this.levelFromStatus(metadata.status_code);return this.capture("network",metadata,level,rollbarUUID)},Telemeter.prototype.levelFromStatus=function(statusCode){return statusCode>=200&&statusCode<400?"info":0===statusCode||statusCode>=400?"error":"info"},Telemeter.prototype.captureDom=function(subtype,element,value,checked,rollbarUUID){var metadata={subtype:subtype,element:element};return void 0!==value&&(metadata.value=value),void 0!==checked&&(metadata.checked=checked),this.capture("dom",metadata,"info",rollbarUUID)},Telemeter.prototype.captureNavigation=function(from,to,rollbarUUID){return this.capture("navigation",{from:from,to:to},"info",rollbarUUID)},Telemeter.prototype.captureDomContentLoaded=function(ts){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,ts&&ts.getTime())},Telemeter.prototype.captureLoad=function(ts){return this.capture("navigation",{subtype:"load"},"info",void 0,ts&&ts.getTime())},Telemeter.prototype.captureConnectivityChange=function(type,rollbarUUID){return this.captureNetwork({change:type},"connectivity",rollbarUUID)},Telemeter.prototype._captureRollbarItem=function(item){if(this.options.includeItemsInTelemetry)return item.err?this.captureError(item.err,item.level,item.uuid,item.timestamp):item.message?this.captureLog(item.message,item.level,item.uuid,item.timestamp):item.custom?this.capture("log",item.custom,item.level,item.uuid,item.timestamp):void 0},Telemeter.prototype.push=function(e){this.queue.push(e),this.queue.length>this.maxQueueSize&&this.queue.shift()},module.exports=Telemeter},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4),helpers=__webpack_require__(11),defaultOptions={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};function Api(options,t,u,j){this.options=options,this.transport=t,this.url=u,this.jsonBackup=j,this.accessToken=options.accessToken,this.transportOptions=_getTransport(options,u)}function _getTransport(options,url){return helpers.getTransportFromOptions(options,defaultOptions,url)}Api.prototype.postItem=function(data,callback){var transportOptions=helpers.transportOptions(this.transportOptions,"POST"),payload=helpers.buildPayload(this.accessToken,data,this.jsonBackup);this.transport.post(this.accessToken,transportOptions,payload,callback)},Api.prototype.configure=function(options){var oldOptions=this.oldOptions;return this.options=_.merge(oldOptions,options),this.transportOptions=_getTransport(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},module.exports=Api},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);module.exports={buildPayload:function(accessToken,data,jsonBackup){if(!_.isType(data.context,"string")){var contextResult=_.stringify(data.context,jsonBackup);contextResult.error?data.context="Error: could not serialize 'context'":data.context=contextResult.value||"",data.context.length>255&&(data.context=data.context.substr(0,255))}return{access_token:accessToken,data:data}},getTransportFromOptions:function(options,defaults,url){var hostname=defaults.hostname,protocol=defaults.protocol,port=defaults.port,path=defaults.path,search=defaults.search,proxy=options.proxy;if(options.endpoint){var opts=url.parse(options.endpoint);hostname=opts.hostname,protocol=opts.protocol,port=opts.port,path=opts.pathname,search=opts.search}return{hostname:hostname,protocol:protocol,port:port,path:path,search:search,proxy:proxy}},transportOptions:function(transport,method){var protocol=transport.protocol||"https:",port=transport.port||("http:"===protocol?80:"https:"===protocol?443:void 0),hostname=transport.hostname,path=transport.path;return transport.search&&(path+=transport.search),transport.proxy&&(path=protocol+"//"+hostname+path,hostname=transport.proxy.host||transport.proxy.hostname,port=transport.proxy.port,protocol=transport.proxy.protocol||protocol),{protocol:protocol,hostname:hostname,path:path,port:port,method:method}},appendPathToPath:function(base,path){var baseTrailingSlash=/\/$/.test(base),pathBeginningSlash=/^\//.test(path);return baseTrailingSlash&&pathBeginningSlash?path=path.substring(1):baseTrailingSlash||pathBeginningSlash||(path="/"+path),base+path}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13);var detection=__webpack_require__(14),_=__webpack_require__(4);module.exports={error:function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("Rollbar:"),detection.ieVersion()<=8?console.error(_.formatArgsAsString(args)):console.error.apply(console,args)},info:function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("Rollbar:"),detection.ieVersion()<=8?console.info(_.formatArgsAsString(args)):console.info.apply(console,args)},log:function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("Rollbar:"),detection.ieVersion()<=8?console.log(_.formatArgsAsString(args)):console.log.apply(console,args)}}},function(module,exports){!function(global){"use strict";global.console||(global.console={});for(var prop,method,con=global.console,dummy=function(){},properties=["memory"],methods="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");prop=properties.pop();)con[prop]||(con[prop]={});for(;method=methods.pop();)con[method]||(con[method]=dummy)}("undefined"==typeof window?this:window)},function(module,exports){"use strict";var Detection={ieVersion:function(){if(document){for(var v=3,div=document.createElement("div"),all=div.getElementsByTagName("i");div.innerHTML="\x3c!--[if gt IE "+ ++v+"]><i></i><![endif]--\x3e",all[0];);return v>4?v:void 0}}};module.exports=Detection},function(module,exports){"use strict";function _extendListenerPrototype(handler,prototype,shim){if(prototype.hasOwnProperty&&prototype.hasOwnProperty("addEventListener")){for(var oldAddEventListener=prototype.addEventListener;oldAddEventListener._rollbarOldAdd&&oldAddEventListener.belongsToShim;)oldAddEventListener=oldAddEventListener._rollbarOldAdd;var addFn=function(event,callback,bubble){oldAddEventListener.call(this,event,handler.wrap(callback),bubble)};addFn._rollbarOldAdd=oldAddEventListener,addFn.belongsToShim=shim,prototype.addEventListener=addFn;for(var oldRemoveEventListener=prototype.removeEventListener;oldRemoveEventListener._rollbarOldRemove&&oldRemoveEventListener.belongsToShim;)oldRemoveEventListener=oldRemoveEventListener._rollbarOldRemove;var removeFn=function(event,callback,bubble){oldRemoveEventListener.call(this,event,callback&&callback._rollbar_wrapped||callback,bubble)};removeFn._rollbarOldRemove=oldRemoveEventListener,removeFn.belongsToShim=shim,prototype.removeEventListener=removeFn}}module.exports={captureUncaughtExceptions:function(window,handler,shim){if(window){var oldOnError;if("function"==typeof handler._rollbarOldOnError)oldOnError=handler._rollbarOldOnError;else if(window.onerror){for(oldOnError=window.onerror;oldOnError._rollbarOldOnError;)oldOnError=oldOnError._rollbarOldOnError;handler._rollbarOldOnError=oldOnError}var fn=function(){var args=Array.prototype.slice.call(arguments,0);!function(window,r,old,args){window._rollbarWrappedError&&(args[4]||(args[4]=window._rollbarWrappedError),args[5]||(args[5]=window._rollbarWrappedError._rollbarContext),window._rollbarWrappedError=null),r.handleUncaughtException.apply(r,args),old&&old.apply(window,args)}(window,handler,oldOnError,args)};shim&&(fn._rollbarOldOnError=oldOnError),window.onerror=fn}},captureUnhandledRejections:function(window,handler,shim){if(window){"function"==typeof window._rollbarURH&&window._rollbarURH.belongsToShim&&window.removeEventListener("unhandledrejection",window._rollbarURH);var rejectionHandler=function(evt){var reason,promise,detail;try{reason=evt.reason}catch(e){reason=void 0}try{promise=evt.promise}catch(e){promise="[unhandledrejection] error getting `promise` from event"}try{detail=evt.detail,!reason&&detail&&(reason=detail.reason,promise=detail.promise)}catch(e){}reason||(reason="[unhandledrejection] error getting `reason` from event"),handler&&handler.handleUnhandledRejection&&handler.handleUnhandledRejection(reason,promise)};rejectionHandler.belongsToShim=shim,window._rollbarURH=rejectionHandler,window.addEventListener("unhandledrejection",rejectionHandler)}},wrapGlobals:function(window,handler,shim){if(window){var i,global,globals="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(i=0;i<globals.length;++i)window[global=globals[i]]&&window[global].prototype&&_extendListenerPrototype(handler,window[global].prototype,shim)}}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4),truncation=__webpack_require__(17),logger=__webpack_require__(12);function _makeRequest(accessToken,url,method,data,callback,requestFactory){var request;if(!(request=requestFactory?requestFactory():function(){var xmlhttp,i,factories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],numFactories=factories.length;for(i=0;i<numFactories;i++)try{xmlhttp=factories[i]();break}catch(e){}return xmlhttp}()))return callback(new Error("No way to send a request"));try{try{var onreadystatechange=function(){try{if(onreadystatechange&&4===request.readyState){onreadystatechange=void 0;var parseResponse=_.jsonParse(request.responseText);if((r=request)&&r.status&&200===r.status)return void callback(parseResponse.error,parseResponse.value);if(function(r){return r&&_.isType(r.status,"number")&&r.status>=400&&r.status<600}(request)){if(403===request.status){var message=parseResponse.value&&parseResponse.value.message;logger.error(message)}callback(new Error(String(request.status)))}else{callback(_newRetriableError("XHR response had no status code (likely connection failure)"))}}}catch(ex){var exc;exc=ex&&ex.stack?ex:new Error(ex),callback(exc)}var r};request.open(method,url,!0),request.setRequestHeader&&(request.setRequestHeader("Content-Type","application/json"),request.setRequestHeader("X-Rollbar-Access-Token",accessToken)),request.onreadystatechange=onreadystatechange,request.send(data)}catch(e1){if("undefined"!=typeof XDomainRequest){if(!window||!window.location)return callback(new Error("No window available during request, unknown environment"));"http:"===window.location.href.substring(0,5)&&"https"===url.substring(0,5)&&(url="http"+url.substring(5));var xdomainrequest=new XDomainRequest;xdomainrequest.onprogress=function(){},xdomainrequest.ontimeout=function(){callback(_newRetriableError("Request timed out","ETIMEDOUT"))},xdomainrequest.onerror=function(){callback(new Error("Error during request"))},xdomainrequest.onload=function(){var parseResponse=_.jsonParse(xdomainrequest.responseText);callback(parseResponse.error,parseResponse.value)},xdomainrequest.open(method,url,!0),xdomainrequest.send(data)}else callback(new Error("Cannot find a method to transport a request"))}}catch(e2){callback(e2)}}function _newRetriableError(message,code){var err=new Error(message);return err.code=code||"ENOTFOUND",err}module.exports={get:function(accessToken,options,params,callback,requestFactory){callback&&_.isFunction(callback)||(callback=function(){}),_.addParamsAndAccessTokenToPath(accessToken,options,params),_makeRequest(accessToken,_.formatUrl(options),"GET",null,callback,requestFactory)},post:function(accessToken,options,payload,callback,requestFactory){if(callback&&_.isFunction(callback)||(callback=function(){}),!payload)return callback(new Error("Cannot send empty request"));var stringifyResult=truncation.truncate(payload);if(stringifyResult.error)return callback(stringifyResult.error);var writeData=stringifyResult.value;_makeRequest(accessToken,_.formatUrl(options),"POST",writeData,callback,requestFactory)}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);function raw(payload,jsonBackup){return[payload,_.stringify(payload,jsonBackup)]}function selectFrames(frames,range){var len=frames.length;return len>2*range?frames.slice(0,range).concat(frames.slice(len-range)):frames}function truncateFrames(payload,jsonBackup,range){range=void 0===range?30:range;var frames,body=payload.data.body;if(body.trace_chain)for(var chain=body.trace_chain,i=0;i<chain.length;i++)frames=selectFrames(frames=chain[i].frames,range),chain[i].frames=frames;else body.trace&&(frames=selectFrames(frames=body.trace.frames,range),body.trace.frames=frames);return[payload,_.stringify(payload,jsonBackup)]}function maybeTruncateValue(len,val){return val&&val.length>len?val.slice(0,len-3).concat("..."):val}function truncateStrings(len,payload,jsonBackup){return[payload=_.traverse(payload,function truncator(k,v,seen){switch(_.typeName(v)){case"string":return maybeTruncateValue(len,v);case"object":case"array":return _.traverse(v,truncator,seen);default:return v}},[]),_.stringify(payload,jsonBackup)]}function truncateTraceData(traceData){return traceData.exception&&(delete traceData.exception.description,traceData.exception.message=maybeTruncateValue(255,traceData.exception.message)),traceData.frames=selectFrames(traceData.frames,1),traceData}function minBody(payload,jsonBackup){var body=payload.data.body;if(body.trace_chain)for(var chain=body.trace_chain,i=0;i<chain.length;i++)chain[i]=truncateTraceData(chain[i]);else body.trace&&(body.trace=truncateTraceData(body.trace));return[payload,_.stringify(payload,jsonBackup)]}function needsTruncation(payload,maxSize){return payload.length>maxSize}module.exports={truncate:function(payload,jsonBackup,maxSize){maxSize=void 0===maxSize?524288:maxSize;for(var strategy,results,result,strategies=[raw,truncateFrames,truncateStrings.bind(null,1024),truncateStrings.bind(null,512),truncateStrings.bind(null,256),minBody];strategy=strategies.shift();)if(payload=(results=strategy(payload,jsonBackup))[0],(result=results[1]).error||!needsTruncation(result.value,maxSize))return result;return result},raw:raw,truncateFrames:truncateFrames,truncateStrings:truncateStrings,maybeTruncateValue:maybeTruncateValue}},function(module,exports){"use strict";module.exports={parse:function(url){var i,last,result={protocol:null,auth:null,host:null,path:null,hash:null,href:url,hostname:null,port:null,pathname:null,search:null,query:null};if(-1!==(i=url.indexOf("//"))?(result.protocol=url.substring(0,i),last=i+2):last=0,-1!==(i=url.indexOf("@",last))&&(result.auth=url.substring(last,i),last=i+1),-1===(i=url.indexOf("/",last))){if(-1===(i=url.indexOf("?",last)))return-1===(i=url.indexOf("#",last))?result.host=url.substring(last):(result.host=url.substring(last,i),result.hash=url.substring(i)),result.hostname=result.host.split(":")[0],result.port=result.host.split(":")[1],result.port&&(result.port=parseInt(result.port,10)),result;result.host=url.substring(last,i),result.hostname=result.host.split(":")[0],result.port=result.host.split(":")[1],result.port&&(result.port=parseInt(result.port,10)),last=i}else result.host=url.substring(last,i),result.hostname=result.host.split(":")[0],result.port=result.host.split(":")[1],result.port&&(result.port=parseInt(result.port,10)),last=i;if(-1===(i=url.indexOf("#",last))?result.path=url.substring(last):(result.path=url.substring(last,i),result.hash=url.substring(i)),result.path){var pathParts=result.path.split("?");result.pathname=pathParts[0],result.query=pathParts[1],result.search=result.query?"?"+result.query:null}return result}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4),errorParser=__webpack_require__(20),logger=__webpack_require__(12);function addBodyMessage(item,options,callback){var message=item.message,custom=item.custom;if(!message)if(custom){var scrubFields=options.scrubFields,messageResult=_.stringify(_.scrub(custom,scrubFields));message=messageResult.error||messageResult.value||""}else message="";var result={body:message};custom&&(result.extra=_.merge(custom)),_.set(item,"data.body",{message:result}),callback(null,item)}module.exports={handleItemWithError:function(item,options,callback){if(item.data=item.data||{},item.err)try{item.stackInfo=item.err._savedStackTrace||errorParser.parse(item.err)}catch(e){logger.error("Error while parsing the error object.",e);try{item.message=item.err.message||item.err.description||item.message||String(item.err)}catch(e2){item.message=String(item.err)||String(e2)}delete item.err}callback(null,item)},ensureItemHasSomethingToSay:function(item,options,callback){item.message||item.stackInfo||item.custom||callback(new Error("No message, stack info, or custom data"),null),callback(null,item)},addBaseInfo:function(item,options,callback){var environment=options.payload&&options.payload.environment||options.environment;item.data=_.merge(item.data,{environment:environment,level:item.level,endpoint:options.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:item.uuid,notifier:{name:"rollbar-browser-js",version:options.version}}),callback(null,item)},addRequestInfo:function(window){return function(item,options,callback){if(!window||!window.location)return callback(null,item);var remoteString="$remote_ip";options.captureIp?!0!==options.captureIp&&(remoteString+="_anonymize"):remoteString=null,_.set(item,"data.request",{url:window.location.href,query_string:window.location.search,user_ip:remoteString}),callback(null,item)}},addClientInfo:function(window){return function(item,options,callback){if(!window)return callback(null,item);var nav=window.navigator||{},scr=window.screen||{};_.set(item,"data.client",{runtime_ms:item.timestamp-window._rollbarStartTime,timestamp:Math.round(item.timestamp/1e3),javascript:{browser:nav.userAgent,language:nav.language,cookie_enabled:nav.cookieEnabled,screen:{width:scr.width,height:scr.height}}}),callback(null,item)}},addPluginInfo:function(window){return function(item,options,callback){if(!window||!window.navigator)return callback(null,item);for(var cur,plugins=[],navPlugins=window.navigator.plugins||[],i=0,l=navPlugins.length;i<l;++i)cur=navPlugins[i],plugins.push({name:cur.name,description:cur.description});_.set(item,"data.client.javascript.plugins",plugins),callback(null,item)}},addBody:function(item,options,callback){item.stackInfo?function(item,options,callback){var description=item.data.description,stackInfo=item.stackInfo,custom=item.custom,guess=errorParser.guessErrorClass(stackInfo.message),className=stackInfo.name||guess[0],message=guess[1],trace={exception:{class:className,message:message}};description&&(trace.exception.description=description);var stack=stackInfo.stack;if(stack&&0===stack.length&&item._unhandledStackInfo&&item._unhandledStackInfo.stack&&(stack=item._unhandledStackInfo.stack),stack){var stackFrame,frame,code,pre,post,contextLength,i,mid;for(0===stack.length&&(trace.exception.stack=stackInfo.rawStack,trace.exception.raw=String(stackInfo.rawException)),trace.frames=[],i=0;i<stack.length;++i)stackFrame=stack[i],frame={filename:stackFrame.url?_.sanitizeUrl(stackFrame.url):"(unknown)",lineno:stackFrame.line||null,method:stackFrame.func&&"?"!==stackFrame.func?stackFrame.func:"[anonymous]",colno:stackFrame.column},options.sendFrameUrl&&(frame.url=stackFrame.url),frame.method&&frame.method.endsWith&&frame.method.endsWith("_rollbar_wrapped")||(code=pre=post=null,(contextLength=stackFrame.context?stackFrame.context.length:0)&&(mid=Math.floor(contextLength/2),pre=stackFrame.context.slice(0,mid),code=stackFrame.context[mid],post=stackFrame.context.slice(mid)),code&&(frame.code=code),(pre||post)&&(frame.context={},pre&&pre.length&&(frame.context.pre=pre),post&&post.length&&(frame.context.post=post)),stackFrame.args&&(frame.args=stackFrame.args),trace.frames.push(frame));trace.frames.reverse(),custom&&(trace.extra=_.merge(custom)),_.set(item,"data.body",{trace:trace}),callback(null,item)}else item.message=className+": "+message,addBodyMessage(item,options,callback)}(item,options,callback):addBodyMessage(item,options,callback)},scrubPayload:function(item,options,callback){var scrubFields=options.scrubFields;item.data=_.scrub(item.data,scrubFields),callback(null,item)}}},function(module,exports,__webpack_require__){"use strict";var ErrorStackParser=__webpack_require__(21),UNKNOWN_FUNCTION="?",ERR_CLASS_REGEXP=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function gatherContext(){return null}function Frame(stackFrame){var data={};return data._stackFrame=stackFrame,data.url=stackFrame.fileName,data.line=stackFrame.lineNumber,data.func=stackFrame.functionName,data.column=stackFrame.columnNumber,data.args=stackFrame.args,data.context=null,data}function Stack(exception){var name=exception.constructor&&exception.constructor.name;return(!name||!name.length||name.length<3)&&(name=exception.name),{stack:function(){var exc,parserStack=[];if(exception.stack)exc=exception;else try{throw exception}catch(e){exc=e}try{parserStack=ErrorStackParser.parse(exc)}catch(e){parserStack=[]}for(var stack=[],i=0;i<parserStack.length;i++)stack.push(new Frame(parserStack[i]));return stack}(),message:exception.message,name:name,rawStack:exception.stack,rawException:exception}}module.exports={guessFunctionName:function(){return UNKNOWN_FUNCTION},guessErrorClass:function(errMsg){if(!errMsg||!errMsg.match)return["Unknown error. There was no error message to display.",""];var errClassMatch=errMsg.match(ERR_CLASS_REGEXP),errClass="(unknown)";return errClassMatch&&(errClass=errClassMatch[errClassMatch.length-1],errMsg=(errMsg=errMsg.replace((errClassMatch[errClassMatch.length-2]||"")+errClass+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[errClass,errMsg]},gatherContext:gatherContext,parse:function(e){return new Stack(e)},Stack:Stack,Frame:Frame}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(22)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function(StackFrame){"use strict";var FIREFOX_SAFARI_STACK_REGEXP=/(^|@)\S+\:\d+/,CHROME_IE_STACK_REGEXP=/^\s*at .*(\S+\:\d+|\(native\))/m,SAFARI_NATIVE_CODE_REGEXP=/^(eval@)?(\[native code\])?$/;function _map(array,fn,thisArg){if("function"==typeof Array.prototype.map)return array.map(fn,thisArg);for(var output=new Array(array.length),i=0;i<array.length;i++)output[i]=fn.call(thisArg,array[i]);return output}function _filter(array,fn,thisArg){if("function"==typeof Array.prototype.filter)return array.filter(fn,thisArg);for(var output=[],i=0;i<array.length;i++)fn.call(thisArg,array[i])&&output.push(array[i]);return output}return{parse:function(error){if(void 0!==error.stacktrace||void 0!==error["opera#sourceloc"])return this.parseOpera(error);if(error.stack&&error.stack.match(CHROME_IE_STACK_REGEXP))return this.parseV8OrIE(error);if(error.stack)return this.parseFFOrSafari(error);throw new Error("Cannot parse given Error object")},extractLocation:function(urlLike){if(-1===urlLike.indexOf(":"))return[urlLike];var locationParts=urlLike.replace(/[\(\)\s]/g,"").split(":"),lastNumber=locationParts.pop(),possibleNumber=locationParts[locationParts.length-1];if(!isNaN(parseFloat(possibleNumber))&&isFinite(possibleNumber)){var lineNumber=locationParts.pop();return[locationParts.join(":"),lineNumber,lastNumber]}return[locationParts.join(":"),lastNumber,void 0]},parseV8OrIE:function(error){return _map(_filter(error.stack.split("\n"),function(line){return!!line.match(CHROME_IE_STACK_REGEXP)},this),function(line){line.indexOf("(eval ")>-1&&(line=line.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var tokens=line.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),locationParts=this.extractLocation(tokens.pop()),functionName=tokens.join(" ")||void 0,fileName="eval"===locationParts[0]?void 0:locationParts[0];return new StackFrame(functionName,void 0,fileName,locationParts[1],locationParts[2],line)},this)},parseFFOrSafari:function(error){return _map(_filter(error.stack.split("\n"),function(line){return!line.match(SAFARI_NATIVE_CODE_REGEXP)},this),function(line){if(line.indexOf(" > eval")>-1&&(line=line.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===line.indexOf("@")&&-1===line.indexOf(":"))return new StackFrame(line);var tokens=line.split("@"),locationParts=this.extractLocation(tokens.pop()),functionName=tokens.shift()||void 0;return new StackFrame(functionName,void 0,locationParts[0],locationParts[1],locationParts[2],line)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var lineRE=/Line (\d+).*script (?:in )?(\S+)/i,lines=e.message.split("\n"),result=[],i=2,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);match&&result.push(new StackFrame(void 0,void 0,match[2],match[1],void 0,lines[i]))}return result},parseOpera10:function(e){for(var lineRE=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,lines=e.stacktrace.split("\n"),result=[],i=0,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);match&&result.push(new StackFrame(match[3]||void 0,void 0,match[2],match[1],void 0,lines[i]))}return result},parseOpera11:function(error){return _map(_filter(error.stack.split("\n"),function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)&&!line.match(/^Error created at/)},this),function(line){var argsRaw,tokens=line.split("@"),locationParts=this.extractLocation(tokens.pop()),functionCall=tokens.shift()||"",functionName=functionCall.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;functionCall.match(/\(([^\)]*)\)/)&&(argsRaw=functionCall.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var args=void 0===argsRaw||"[arguments not available]"===argsRaw?void 0:argsRaw.split(",");return new StackFrame(functionName,args,locationParts[0],locationParts[1],locationParts[2],line)},this)}}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function(){"use strict";function _isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function StackFrame(functionName,args,fileName,lineNumber,columnNumber,source){void 0!==functionName&&this.setFunctionName(functionName),void 0!==args&&this.setArgs(args),void 0!==fileName&&this.setFileName(fileName),void 0!==lineNumber&&this.setLineNumber(lineNumber),void 0!==columnNumber&&this.setColumnNumber(columnNumber),void 0!==source&&this.setSource(source)}return StackFrame.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(v){this.functionName=String(v)},getArgs:function(){return this.args},setArgs:function(v){if("[object Array]"!==Object.prototype.toString.call(v))throw new TypeError("Args must be an Array");this.args=v},getFileName:function(){return this.fileName},setFileName:function(v){this.fileName=String(v)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(v){if(!_isNumber(v))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(v)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(v){if(!_isNumber(v))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(v)},getSource:function(){return this.source},setSource:function(v){this.source=String(v)},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(_isNumber(this.getLineNumber())?":"+this.getLineNumber():"")+(_isNumber(this.getColumnNumber())?":"+this.getColumnNumber():"")}},StackFrame})},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);module.exports={itemToPayload:function(item,options,callback){var payloadOptions=options.payload||{};payloadOptions.body&&delete payloadOptions.body;var data=_.merge(item.data,payloadOptions);item._isUncaught&&(data._isUncaught=!0),item._originalArgs&&(data._originalArgs=item._originalArgs),callback(null,data)},addTelemetryData:function(item,options,callback){item.telemetryEvents&&_.set(item,"data.body.telemetry",item.telemetryEvents),callback(null,item)},addMessageWithError:function(item,options,callback){if(item.message){var tracePath="data.body.trace_chain.0",trace=_.get(item,tracePath);if(trace||(tracePath="data.body.trace",trace=_.get(item,tracePath)),trace){if(!trace.exception||!trace.exception.description)return _.set(item,tracePath+".exception.description",item.message),void callback(null,item);var extra=_.get(item,tracePath+".extra")||{},newExtra=_.merge(extra,{message:item.message});_.set(item,tracePath+".extra",newExtra)}callback(null,item)}else callback(null,item)},userTransform:function(logger){return function(item,options,callback){var newItem=_.merge(item);try{_.isFunction(options.transform)&&options.transform(newItem.data,item)}catch(e){return options.transform=null,logger.error("Error while calling custom transform() function. Removing custom transform().",e),void callback(null,item)}callback(null,newItem)}},addConfigToPayload:function(item,options,callback){if(!options.sendConfig)return callback(null,item);var custom=_.get(item,"data.custom")||{};custom._rollbarConfig=options,item.data.custom=custom,callback(null,item)}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);module.exports={checkIgnore:function(item,settings){return!_.get(settings,"plugins.jquery.ignoreAjaxErrors")||!_.get(item,"body.message.extra.isAjax")}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4);function urlIsOnAList(item,settings,whiteOrBlack,logger){var list,trace,filename,frameLength,url,listLength,i,j,black=!1;"blacklist"===whiteOrBlack&&(black=!0);try{if(listLength=(list=black?settings.hostBlackList:settings.hostWhiteList)&&list.length,trace=_.get(item,"body.trace"),!list||0===listLength)return!black;if(!trace||!trace.frames||0===trace.frames.length)return!black;for(frameLength=trace.frames.length,i=0;i<frameLength;i++){if(filename=trace.frames[i].filename,!_.isType(filename,"string"))return!black;for(j=0;j<listLength;j++)if(url=list[j],new RegExp(url).test(filename))return!0}}catch(e){black?settings.hostBlackList=null:settings.hostWhiteList=null;var listName=black?"hostBlackList":"hostWhiteList";return logger.error("Error while reading your configuration's "+listName+" option. Removing custom "+listName+".",e),!black}return!1}module.exports={checkLevel:function(item,settings){var level=item.level,levelVal=_.LEVELS[level]||0,reportLevel=settings.reportLevel;return!(levelVal<(_.LEVELS[reportLevel]||0))},userCheckIgnore:function(logger){return function(item,settings){var isUncaught=!!item._isUncaught;delete item._isUncaught;var args=item._originalArgs;delete item._originalArgs;try{_.isFunction(settings.onSendCallback)&&settings.onSendCallback(isUncaught,args,item)}catch(e){settings.onSendCallback=null,logger.error("Error while calling onSendCallback, removing",e)}try{if(_.isFunction(settings.checkIgnore)&&settings.checkIgnore(isUncaught,args,item))return!1}catch(e){settings.checkIgnore=null,logger.error("Error while calling custom checkIgnore(), removing",e)}return!0}},urlIsNotBlacklisted:function(logger){return function(item,settings){return!urlIsOnAList(item,settings,"blacklist",logger)}},urlIsWhitelisted:function(logger){return function(item,settings){return urlIsOnAList(item,settings,"whitelist",logger)}},messageIsIgnored:function(logger){return function(item,settings){var exceptionMessage,i,ignoredMessages,len,messageIsIgnored,body,traceMessage,bodyMessage;try{if(messageIsIgnored=!1,!(ignoredMessages=settings.ignoredMessages)||0===ignoredMessages.length)return!0;if(body=item.body,traceMessage=_.get(body,"trace.exception.message"),bodyMessage=_.get(body,"message.body"),!(exceptionMessage=traceMessage||bodyMessage))return!0;for(len=ignoredMessages.length,i=0;i<len&&!(messageIsIgnored=new RegExp(ignoredMessages[i],"gi").test(exceptionMessage));i++);}catch(e){settings.ignoredMessages=null,logger.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!messageIsIgnored}}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(4),urlparser=__webpack_require__(18),domUtil=__webpack_require__(27),defaults={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestBody:!1,log:!0,dom:!0,navigation:!0,connectivity:!0};function replace(obj,name,replacement,replacements,type){var orig=obj[name];obj[name]=replacement(orig),replacements&&replacements[type].push([obj,name,orig])}function restore(replacements,type){for(var b;replacements[type].length;)(b=replacements[type].shift())[0][b[1]]=b[2]}function Instrumenter(options,telemeter,rollbar,_window,_document){var autoInstrument=options.autoInstrument;!1===options.enabled||!1===autoInstrument?this.autoInstrument={}:(_.isType(autoInstrument,"object")||(autoInstrument=defaults),this.autoInstrument=_.merge(defaults,autoInstrument)),this.scrubTelemetryInputs=!!options.scrubTelemetryInputs,this.telemetryScrubber=options.telemetryScrubber,this.defaultValueScrubber=function(scrubFields){for(var patterns=[],i=0;i<scrubFields.length;++i)patterns.push(new RegExp(scrubFields[i],"i"));return function(description){var name=function(description){if(!description||!description.attributes)return null;for(var attrs=description.attributes,a=0;a<attrs.length;++a)if("name"===attrs[a].key)return attrs[a].value;return null}(description);if(!name)return!1;for(var i=0;i<patterns.length;++i)if(patterns[i].test(name))return!0;return!1}}(options.scrubFields),this.telemeter=telemeter,this.rollbar=rollbar,this._window=_window||{},this._document=_document||{},this.replacements={network:[],log:[],navigation:[],connectivity:[]},this.eventRemovers={dom:[],connectivity:[]},this._location=this._window.location,this._lastHref=this._location&&this._location.href}Instrumenter.prototype.configure=function(options){var autoInstrument=options.autoInstrument,oldSettings=_.merge(this.autoInstrument);!1===options.enabled||!1===autoInstrument?this.autoInstrument={}:(_.isType(autoInstrument,"object")||(autoInstrument=defaults),this.autoInstrument=_.merge(defaults,autoInstrument)),this.instrument(oldSettings),void 0!==options.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!options.scrubTelemetryInputs),void 0!==options.telemetryScrubber&&(this.telemetryScrubber=options.telemetryScrubber)},Instrumenter.prototype.instrument=function(oldSettings){!this.autoInstrument.network||oldSettings&&oldSettings.network?!this.autoInstrument.network&&oldSettings&&oldSettings.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||oldSettings&&oldSettings.log?!this.autoInstrument.log&&oldSettings&&oldSettings.log&&this.deinstrumentConsole():this.instrumentConsole(),!this.autoInstrument.dom||oldSettings&&oldSettings.dom?!this.autoInstrument.dom&&oldSettings&&oldSettings.dom&&this.deinstrumentDom():this.instrumentDom(),!this.autoInstrument.navigation||oldSettings&&oldSettings.navigation?!this.autoInstrument.navigation&&oldSettings&&oldSettings.navigation&&this.deinstrumentNavigation():this.instrumentNavigation(),!this.autoInstrument.connectivity||oldSettings&&oldSettings.connectivity?!this.autoInstrument.connectivity&&oldSettings&&oldSettings.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity()},Instrumenter.prototype.deinstrumentNetwork=function(){restore(this.replacements,"network")},Instrumenter.prototype.instrumentNetwork=function(){var self=this;function wrapProp(prop,xhr){prop in xhr&&_.isFunction(xhr[prop])&&replace(xhr,prop,function(orig){return self.rollbar.wrap(orig)})}if("XMLHttpRequest"in this._window){var xhrp=this._window.XMLHttpRequest.prototype;replace(xhrp,"open",function(orig){return function(method,url){return _.isType(url,"string")&&(this.__rollbar_xhr={method:method,url:url,status_code:null,start_time_ms:_.now(),end_time_ms:null}),orig.apply(this,arguments)}},this.replacements,"network"),replace(xhrp,"send",function(orig){return function(data){var xhr=this;function onreadystatechangeHandler(){if(xhr.__rollbar_xhr){if(null===xhr.__rollbar_xhr.status_code){xhr.__rollbar_xhr.status_code=0;var requestData=null;self.autoInstrument.networkRequestBody&&(requestData=data),xhr.__rollbar_event=self.telemeter.captureNetwork(xhr.__rollbar_xhr,"xhr",void 0,requestData)}if(xhr.readyState<2&&(xhr.__rollbar_xhr.start_time_ms=_.now()),xhr.readyState>3){xhr.__rollbar_xhr.end_time_ms=_.now();var headers=null;if(self.autoInstrument.networkResponseHeaders){var headersConfig=self.autoInstrument.networkResponseHeaders;headers={};try{var header,i;if(!0===headersConfig){var allHeaders=xhr.getAllResponseHeaders();if(allHeaders){var parts,value,arr=allHeaders.trim().split(/[\r\n]+/);for(i=0;i<arr.length;i++)header=(parts=arr[i].split(": ")).shift(),value=parts.join(": "),headers[header]=value}}else for(i=0;i<headersConfig.length;i++)headers[header=headersConfig[i]]=xhr.getResponseHeader(header)}catch(e){}}var body=null;if(self.autoInstrument.networkResponseBody)try{body=xhr.responseText}catch(e){}var response=null;(body||headers)&&(response={},body&&(response.body=body),headers&&(response.headers=headers)),response&&(xhr.__rollbar_xhr.response=response);try{var code=xhr.status;code=1223===code?204:code,xhr.__rollbar_xhr.status_code=code,xhr.__rollbar_event.level=self.telemeter.levelFromStatus(code)}catch(e){}}}}return wrapProp("onload",xhr),wrapProp("onerror",xhr),wrapProp("onprogress",xhr),"onreadystatechange"in xhr&&_.isFunction(xhr.onreadystatechange)?replace(xhr,"onreadystatechange",function(orig){return self.rollbar.wrap(orig,void 0,onreadystatechangeHandler)}):xhr.onreadystatechange=onreadystatechangeHandler,orig.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&replace(this._window,"fetch",function(orig){return function(fn,t){for(var args=new Array(arguments.length),i=0,len=args.length;i<len;i++)args[i]=arguments[i];var url,input=args[0],method="GET";_.isType(input,"string")?url=input:input&&(url=input.url,input.method&&(method=input.method)),args[1]&&args[1].method&&(method=args[1].method);var metadata={method:method,url:url,status_code:null,start_time_ms:_.now(),end_time_ms:null},requestData=null;return self.autoInstrument.networkRequestBody&&(args[1]&&args[1].body?requestData=args[1].body:args[0]&&!_.isType(args[0],"string")&&args[0].body&&(requestData=args[0].body)),self.telemeter.captureNetwork(metadata,"fetch",void 0,requestData),orig.apply(this,args).then(function(resp){metadata.end_time_ms=_.now(),metadata.status_code=resp.status;var headers=null;if(self.autoInstrument.networkResponseHeaders){var headersConfig=self.autoInstrument.networkResponseHeaders;headers={};try{if(!0===headersConfig);else for(var i=0;i<headersConfig.length;i++){var header=headersConfig[i];headers[header]=resp.headers.get(header)}}catch(e){}}var response=null;return headers&&(response={headers:headers}),response&&(metadata.response=response),resp})}},this.replacements,"network")},Instrumenter.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var b;this.replacements.log.length;)b=this.replacements.log.shift(),this._window.console[b[0]]=b[1]},Instrumenter.prototype.instrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var self=this,c=this._window.console,methods=["debug","info","warn","error","log"],i=0,len=methods.length;i<len;i++)wrapConsole(methods[i]);function wrapConsole(method){var orig=c[method],origConsole=c,level="warn"===method?"warning":method;c[method]=function(){var args=Array.prototype.slice.call(arguments),message=_.formatArgsAsString(args);self.telemeter.captureLog(message,level),orig&&Function.prototype.apply.call(orig,origConsole,args)},self.replacements.log.push([method,orig])}},Instrumenter.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")},Instrumenter.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var clickHandler=this.handleClick.bind(this),blurHandler=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",clickHandler,!0),this.addListener("dom",this._window,"blur","onfocusout",blurHandler,!0)}},Instrumenter.prototype.handleClick=function(evt){try{var e=domUtil.getElementFromEvent(evt,this._document),hasTag=e&&e.tagName,anchorOrButton=domUtil.isDescribedElement(e,"a")||domUtil.isDescribedElement(e,"button");hasTag&&(anchorOrButton||domUtil.isDescribedElement(e,"input",["button","submit"]))?this.captureDomEvent("click",e):domUtil.isDescribedElement(e,"input",["checkbox","radio"])&&this.captureDomEvent("input",e,e.value,e.checked)}catch(exc){}},Instrumenter.prototype.handleBlur=function(evt){try{var e=domUtil.getElementFromEvent(evt,this._document);e&&e.tagName&&(domUtil.isDescribedElement(e,"textarea")?this.captureDomEvent("input",e,e.value):domUtil.isDescribedElement(e,"select")&&e.options&&e.options.length?this.handleSelectInputChanged(e):domUtil.isDescribedElement(e,"input")&&!domUtil.isDescribedElement(e,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",e,e.value))}catch(exc){}},Instrumenter.prototype.handleSelectInputChanged=function(elem){if(elem.multiple)for(var i=0;i<elem.options.length;i++)elem.options[i].selected&&this.captureDomEvent("input",elem,elem.options[i].value);else elem.selectedIndex>=0&&elem.options[elem.selectedIndex]&&this.captureDomEvent("input",elem,elem.options[elem.selectedIndex].value)},Instrumenter.prototype.captureDomEvent=function(subtype,element,value,isChecked){if(void 0!==value)if(this.scrubTelemetryInputs||"password"===domUtil.getElementType(element))value="[scrubbed]";else{var description=domUtil.describeElement(element);this.telemetryScrubber?this.telemetryScrubber(description)&&(value="[scrubbed]"):this.defaultValueScrubber(description)&&(value="[scrubbed]")}var elementString=domUtil.elementArrayToString(domUtil.treeToArray(element));this.telemeter.captureDom(subtype,elementString,value,isChecked)},Instrumenter.prototype.deinstrumentNavigation=function(){var chrome=this._window.chrome;!(chrome&&chrome.app&&chrome.app.runtime)&&this._window.history&&this._window.history.pushState&&restore(this.replacements,"navigation")},Instrumenter.prototype.instrumentNavigation=function(){var chrome=this._window.chrome;if(!(chrome&&chrome.app&&chrome.app.runtime)&&this._window.history&&this._window.history.pushState){var self=this;replace(this._window,"onpopstate",function(orig){return function(){var current=self._location.href;self.handleUrlChange(self._lastHref,current),orig&&orig.apply(this,arguments)}},this.replacements,"navigation"),replace(this._window.history,"pushState",function(orig){return function(){var url=arguments.length>2?arguments[2]:void 0;return url&&self.handleUrlChange(self._lastHref,url+""),orig.apply(this,arguments)}},this.replacements,"navigation")}},Instrumenter.prototype.handleUrlChange=function(from,to){var parsedHref=urlparser.parse(this._location.href),parsedTo=urlparser.parse(to),parsedFrom=urlparser.parse(from);this._lastHref=to,parsedHref.protocol===parsedTo.protocol&&parsedHref.host===parsedTo.host&&(to=parsedTo.path+(parsedTo.hash||"")),parsedHref.protocol===parsedFrom.protocol&&parsedHref.host===parsedFrom.host&&(from=parsedFrom.path+(parsedFrom.hash||"")),this.telemeter.captureNavigation(from,to)},Instrumenter.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):restore(this.replacements,"connectivity"))},Instrumenter.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var self=this;replace(this._document.body,"ononline",function(orig){return function(){self.telemeter.captureConnectivityChange("online"),orig&&orig.apply(this,arguments)}},this.replacements,"connectivity"),replace(this._document.body,"onoffline",function(orig){return function(){self.telemeter.captureConnectivityChange("offline"),orig&&orig.apply(this,arguments)}},this.replacements,"connectivity")}},Instrumenter.prototype.addListener=function(section,obj,type,altType,handler,capture){obj.addEventListener?(obj.addEventListener(type,handler,capture),this.eventRemovers[section].push(function(){obj.removeEventListener(type,handler,capture)})):altType&&(obj.attachEvent(altType,handler),this.eventRemovers[section].push(function(){obj.detachEvent(altType,handler)}))},Instrumenter.prototype.removeListeners=function(section){for(;this.eventRemovers[section].length;)this.eventRemovers[section].shift()()},module.exports=Instrumenter},function(module,exports){"use strict";function getElementType(e){return(e.getAttribute("type")||"").toLowerCase()}function descriptionToString(desc){if(!desc||!desc.tagName)return"";var out=[desc.tagName];desc.id&&out.push("#"+desc.id),desc.classes&&out.push("."+desc.classes.join("."));for(var i=0;i<desc.attributes.length;i++)out.push("["+desc.attributes[i].key+'="'+desc.attributes[i].value+'"]');return out.join("")}function describeElement(elem){if(!elem||!elem.tagName)return null;var className,key,attr,i,out={};out.tagName=elem.tagName.toLowerCase(),elem.id&&(out.id=elem.id),(className=elem.className)&&"string"==typeof className&&(out.classes=className.split(/\s+/));var attributes=["type","name","title","alt"];for(out.attributes=[],i=0;i<attributes.length;i++)key=attributes[i],(attr=elem.getAttribute(key))&&out.attributes.push({key:key,value:attr});return out}module.exports={describeElement:describeElement,descriptionToString:descriptionToString,elementArrayToString:function(a){for(var nextStr,totalLength,separatorLength=" > ".length,out=[],len=0,i=a.length-1;i>=0;i--){if(nextStr=descriptionToString(a[i]),totalLength=len+out.length*separatorLength+nextStr.length,i<a.length-1&&totalLength>=83){out.unshift("...");break}out.unshift(nextStr),len+=nextStr.length}return out.join(" > ")},treeToArray:function(elem){for(var nextDescription,out=[],height=0;elem&&height<5&&"html"!==(nextDescription=describeElement(elem)).tagName;height++)out.unshift(nextDescription),elem=elem.parentNode;return out},getElementFromEvent:function(evt,doc){return evt.target?evt.target:doc&&doc.elementFromPoint?doc.elementFromPoint(evt.clientX,evt.clientY):void 0},isDescribedElement:function(element,type,subtypes){if(element.tagName.toLowerCase()!==type.toLowerCase())return!1;if(!subtypes)return!0;element=getElementType(element);for(var i=0;i<subtypes.length;i++)if(subtypes[i]===element)return!0;return!1},getElementType:getElementType}}])},function(module,exports){!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EventBus=function(){function EventBus(){this.registerWindow(window.parent),window.addEventListener("message",this.parsePostMessage.bind(this))}return Object.defineProperty(EventBus,"instance",{get:function(){return EventBus._instance||(EventBus._instance=new this)},enumerable:!0,configurable:!0}),EventBus.prototype.publish=function(channelName,eventName,eventData,options){this.executeSubscribers(channelName,eventName,eventData),"object"==typeof options&&options.hasOwnProperty("crossFrame")&&options.crossFrame&&this.sendPostMessage(channelName,eventName,eventData)},EventBus.prototype.subscribe=function(channelName,eventName,subscriber,options){if("function"==typeof subscriber)return EventBus.SUBSCRIBERS.hasOwnProperty(channelName)||(EventBus.SUBSCRIBERS[channelName]={}),EventBus.SUBSCRIBERS[channelName].hasOwnProperty(eventName)||(EventBus.SUBSCRIBERS[channelName][eventName]=[]),EventBus.SUBSCRIBERS[channelName][eventName].push(subscriber),function(){var index=EventBus.SUBSCRIBERS[channelName][eventName].indexOf(subscriber);EventBus.SUBSCRIBERS[channelName][eventName].splice(index,1),0===Object.keys(EventBus.SUBSCRIBERS[channelName][eventName]).length&&delete EventBus.SUBSCRIBERS[channelName][eventName],0===Object.keys(EventBus.SUBSCRIBERS[channelName]).length&&delete EventBus.SUBSCRIBERS[channelName]}},EventBus.prototype.registerWindow=function(windowToRegister){if(!(windowToRegister===window||EventBus.registeredWindows.indexOf(windowToRegister)>-1))return EventBus.registeredWindows.push(windowToRegister),function(){var index=EventBus.registeredWindows.indexOf(windowToRegister);EventBus.registeredWindows.splice(index,1)}},EventBus.prototype.sendPostMessage=function(channelName,eventName,eventData){for(var _i=0,_a=EventBus.registeredWindows;_i<_a.length;_i++){var registeredWindow=_a[_i];"function"==typeof registeredWindow.postMessage&&registeredWindow.postMessage({action:"eventBus",data:{channelName:channelName,eventName:eventName,eventData:eventData}},"*")}},EventBus.prototype.parsePostMessage=function(event){"object"==typeof event.data&&null!==event.data&&event.data.hasOwnProperty("action")&&"eventBus"===event.data.action&&this.executeSubscribers(event.data.data.channelName,event.data.data.eventName,event.data.data.eventData)},EventBus.prototype.executeSubscribers=function(channelName,eventName,eventData){if(EventBus.SUBSCRIBERS.hasOwnProperty(channelName)&&EventBus.SUBSCRIBERS[channelName].hasOwnProperty(eventName))for(var _i=0,_a=EventBus.SUBSCRIBERS[channelName][eventName];_i<_a.length;_i++){(0,_a[_i])(eventData)}},EventBus.SUBSCRIBERS={},EventBus.registeredWindows=[],EventBus}();exports.EventBus=EventBus},function(module,exports,__webpack_require__){__webpack_require__(2),module.exports=__webpack_require__(0)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var eventBus_1=__webpack_require__(0);window.hasOwnProperty("gogEventBus")?console.warn("EventBus is duplicated!"):window.gogEventBus=eventBus_1.EventBus.instance}])},function(module,exports){window.hasOwnProperty("gogData")&&window.gogData.hasOwnProperty("features")&&window.gogData.features.gtm&&function(w,d,s,l,i){w[l]=w[l]||[];var gtmConfig={"gtm.start":(new Date).getTime(),event:"gtm.js"};w.gogData.features.gtm_blacklist&&(gtmConfig["gtm.blacklist"]=["cl"]),w[l].push(gtmConfig);var f=d.getElementsByTagName(s)[0],j=d.createElement(s);j.async=!0,j.src="//www.googletagmanager.com/gtm.js?id=GTM-NX39DH",f.parentNode.insertBefore(j,f)}(window,document,"script","dataLayer"),window.Analytics=(this.document,Analytics={},Analytics._isInitialized=!1,Analytics._callbackQueue=[],Analytics._gtmDefaultNamespace="analyticsEvent",Analytics._gtmEcommerceNamespace="analyticsEcommerceEvent",Analytics._gtmPostInitializationNamespace="gtm.postInitialization",Analytics._postInitialization=function(){Analytics._isInitialized=void 0!==window.google_tag_manager,Analytics._isInitialized||(Analytics._pushToGtm(Analytics._gtmPostInitializationNamespace,function(){Analytics._isInitialized=!0}),setTimeout(function(){for(;!Analytics._isInitialized&&Analytics._callbackQueue&&Analytics._callbackQueue.length>0;){var fn=Analytics._callbackQueue.shift();"function"==typeof fn&&fn()}},4e3))},Analytics._pushToGtm=function(namespace,data){if("object"==typeof window.dataLayer)return data.event=namespace,window.dataLayer.push(data)},Analytics.sendEvent=function(data){var nameSpace=Analytics._gtmDefaultNamespace;data.event&&(nameSpace=data.event),Analytics._pushToGtm(nameSpace,data)},Analytics.sendTransaction=function(orderId,amount,currency,country,cartProducts,paymentMethod,callback){Analytics._isInitialized||"function"!=typeof callback||Analytics._callbackQueue.push(callback);var transactionData={};Analytics._extendGATranslationData(transactionData,orderId,amount,currency,country,cartProducts,paymentMethod,callback),Analytics._extendPixelTranslationData(transactionData,orderId,amount,currency,country,cartProducts,paymentMethod),Analytics._pushToGtm(Analytics._gtmEcommerceNamespace,transactionData)},Analytics._extendGATranslationData=function(obj,orderId,amount,currency,country,cartProducts,paymentMethod,callback){for(var products=[],i=0;i<cartProducts.length;++i){var item=cartProducts[i];products.push({sku:item.id,name:item.title,category:item.isMovie?"movie":Analytics._unifyCategoryName(item.originalCategory),price:parseFloat(item.price.finalAmount),quantity:"1"})}angular.extend(obj,{transactionId:orderId,transactionAffiliation:paymentMethod||"NA",transactionTotal:amount,transactionTax:0,transactionShipping:0,transactionProducts:products,currencyCode:currency}),"function"==typeof callback&&(obj.eventCallback=callback)},Analytics._extendPixelTranslationData=function(obj,orderId,amount,currency,country,cartProducts,paymentMethod){angular.extend(obj,{content_type:"product",content_ids:cartProducts.map(function(product){return product.id+""}),content_name:cartProducts.map(function(product){return product.title}).join(", "),value:amount+"",currency:currency,num_items:cartProducts.length})},Analytics._unifyCategoryName=function(categoryName){return"role-playing"==(categoryName=categoryName.toLowerCase())&&(categoryName="rpg"),categoryName},Analytics._postInitialization(),Analytics)},function(module,exports){window.angularModules=window.angularModules||[],window.gogTools=window.gogTools||{},window.gogTools.featureIsActive=function(feature){return window.gogData.hasOwnProperty("features")&&window.gogData.features.hasOwnProperty(feature)&&window.gogData.features[feature]},window.angularModules.push("ngTouch","ngStorage","gogModuleImageFilter","gogModuleUserStorage","gogModuleListenersManager","gogModuleGalaxyAccounts","gogModuleTracking","gogModuleTrackingEventsProxy"),window.ignoreMenuAndFooter=window.ignoreMenuAndFooter||!1,window.gogTools.featureIsActive("new_navigation")&&window.angularModules.push("gogMenuModule"),window.gogTools.featureIsActive("new_footer")&&window.angularModules.push("gogFooterModule"),window.gog=angular.module("gog",window.angularModules).run(["productsPersonalizer","ownedProductsPersonalizer","wishlistedProductsPersonalizer","productsRepository","productRepositoriesManager","enabledFeatures","appManager","logout",function(productsPersonalizer,ownedProductsPersonalizer,wishlistedProductsPersonalizer,productsRepository,productRepositoriesManager,enabledFeatures,appManager){enabledFeatures.isEnabled("newCart")&&productRepositoriesManager.registerProductsRepository("regularProducts",productsRepository)}]).config(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!1)}]),"native"===window.gogData.mode&&window.gog.run(["galaxyAccounts","$window",function(galaxyAccounts,$window){return galaxyAccounts.registerExternalFlowListener(function(data){if(data.hasOwnProperty("redirectUrl"))return $window.location=data.redirectUrl})}])},function(module,exports){var AppManager;AppManager=function(){function AppManager($window,_userDataCache){this._userDataCache=_userDataCache,$window.addEventListener("message",this._onWindowMessage.bind(this))}return AppManager.$inject=["$window","userDataCache"],AppManager.AFTER_LOGGING_IN="login.after",AppManager.prototype._onWindowMessage=function(messageEvent){var parsedMessage;if(messageEvent.data)try{if(!(parsedMessage=JSON.parse(messageEvent.data)).action)return;return this._resolveMessage(parsedMessage)}catch(error){}},AppManager.prototype._resolveMessage=function(message){message.action===AppManager.AFTER_LOGGING_IN&&this._userDataCache.purge()},AppManager}(),gog.service("appManager",AppManager)},function(module,exports,__webpack_require__){__webpack_require__(0)(__webpack_require__(15))},function(module,exports){module.exports="var TopNav;\n\nTopNav = {\n  SHOW_NOTHING: 0,\n  SHOW_MENU: 1,\n  SHOW_CART: 2,\n  SHOW_FRIENDS: 3,\n  FOCUS_SEARCH: 4,\n  SHOW_SEARCH_RESULTS: 5\n};\n"},function(module,exports){var EnvironmentProvider;EnvironmentProvider=function(){function EnvironmentProvider(){this._isInEmbedMode=!1,this._isInGameMode=!1,this._isInNativeMode=!0}return EnvironmentProvider.prototype.setInEmbedMode=function(){this._isInEmbedMode=!0,this._isInNativeMode=!1},EnvironmentProvider.prototype.setInGameMode=function(){this._isInGameMode=!0,this._isInNativeMode=!1},EnvironmentProvider.prototype.$get=function(){return{isInEmbedMode:this._isInEmbedMode,isInGameMode:this._isInGameMode,isInNativeMode:this._isInNativeMode}},EnvironmentProvider}(),gog.provider("environment",EnvironmentProvider)},function(module,exports){var GogAnalyticsService;GogAnalyticsService=function(){function GogAnalyticsService($window){this._$window=$window}return GogAnalyticsService.$inject=["$window"],GogAnalyticsService.prototype.sendEvent=function(eventFieldObject){if("object"==typeof this._$window.Analytics)return this._$window.Analytics.sendEvent(eventFieldObject)},GogAnalyticsService}(),angular.module("gog").service("gogAnalytics",GogAnalyticsService)},function(module,exports){var UserResponse,UserResponseProvider;UserResponse=function(){function UserResponse(_dataRepository,$q,_config,_$window,$document,shouldAwaitProductIds){if(this._dataRepository=_dataRepository,this._config=_config,this._$window=_$window,this._isALCookieSet=-1!==$document[0].cookie.indexOf("gog-al"),this._personalizationEnabled=!(0===this._$window.gogData.personalization_enabled),this._anonymousPerosnalization=this._$window.gogData.anonymous_personalization,this._isPpPresent=-1!==this._$window.location.search.indexOf("?pp"),!1===this._shouldGetUserData())return!1;this.promise=$q.defer(),this._dataRepository.registerUserListener(this._onUserUpdate.bind(this)),this._requestData={data:{product_ids:[],series_ids:[]}},this._$window.gogData&&(this._requestData.data.product_ids=this._$window.gogData.product_ids||[],this._requestData.data.series_ids=this._$window.gogData.series_ids||[]),UserResponse.awaitProductsIds?(this._$window.gogEventBus.subscribe("user","productsToPersonaliseUpdated",this._addProductsToPersonalise.bind(this)),this._$window.gogEventBus.publish("user","awaitingProductsToPersonalise",{crossFrame:!0})):this._sendRequest(),this._$window.gogEventBus.subscribe(this._config.event.user.channel,this._config.event.user.events.userDataRequest,this._onUserDataRequest.bind(this))}return UserResponse.$inject=["dataRepository","$q","config","$window","$document"],UserResponse.awaitProductsIds=!1,UserResponse.prototype.success=function(callback){return!1===this._shouldGetUserData()?angular.noop:this.promise.promise.then(function(data){return callback(data)}).catch(angular.noop)},UserResponse.prototype._addProductsToPersonalise=function(data){var _this;data.productIds.map((_this=this,function(id){return _this._requestData.data.product_ids.push(parseInt(id))})),this._requestData.data.product_ids=this._dedupeArray(this._requestData.data.product_ids),this._sendRequest()},UserResponse.prototype._dedupeArray=function(arr){if(angular.isArray(arr))return arr.filter(function(element,index,arr){return arr.indexOf(element)===index})},UserResponse.prototype._sendRequest=function(){this._dataRepository.getUserData(this._$window.location.search,this._requestData)},UserResponse.prototype._onUserUpdate=function(userData){this._response=userData,this.promise.resolve(userData),this._publishSuccessEvent()},UserResponse.prototype._shouldGetUserData=function(){return!!this._isPpPresent||!!this._personalizationEnabled},UserResponse.prototype._onUserDataRequest=function(){null!=this._response&&this._publishSuccessEvent()},UserResponse.prototype._publishSuccessEvent=function(){this._$window.gogEventBus.publish(this._config.event.user.channel,this._config.event.user.events.userDataResponse,this._response,{crossFrame:!0})},UserResponse}(),UserResponseProvider=function(){function UserResponseProvider(){this.$get=["dataRepository","$q","config","$window","$document",function(dataRepository,$q,config,$window,$document){return new UserResponse(dataRepository,$q,config,$window,$document)}]}return UserResponseProvider.prototype.setAwaitProductIDs=function(){UserResponse.awaitProductsIds=!0},UserResponseProvider}(),angular.module("gog").provider("userResponse",UserResponseProvider)},function(module,exports){var NewCartProvider,NewCartService,OrderNewCartService,hasProp={}.hasOwnProperty;null!=window.gogData&&window.gogData.hasOwnProperty("features")&&window.gogData.features.hasOwnProperty("newCart")&&window.gogData.features.newCart&&(NewCartService=function(){function NewCartService(listenersManager,_cartBackend,_userStorage,_userResponse,_user,_productsRepositoryFactory,_productRepositoriesManager,_$window){this._cartBackend=_cartBackend,this._userStorage=_userStorage,this._userResponse=_userResponse,this._user=_user,this._productsRepositoryFactory=_productsRepositoryFactory,this._productRepositoriesManager=_productRepositoriesManager,this._$window=_$window,this._productsIds=[],this._beforeCartUpdateListenersManager=listenersManager.getManager(),this._afterCartUpdateListenersManager=listenersManager.getManager(),this._isLocked=!1,this._checksum="",this._totalPrice=NewCartService.TOTAL_PRICE_DEFAULTS;try{this._productsRepository=this._productsRepositoryFactory.createMenuProductsRepository("menuProducts")}catch(error1){error1,this._productsRepository=this._productRepositoriesManager.getRepository("menuProducts")}this._restoreChecksum(),this._userResponse.success(this._verifyChecksum.bind(this))}return NewCartService.TOTAL_PRICE_DEFAULTS={isZero:!0,symbol:"$",rawAmount:0},NewCartService.prototype.registerBeforeCartUpdateListener=function(listener){this._beforeCartUpdateListenersManager.addListener(listener)},NewCartService.prototype.registerAfterCartUpdateListener=function(listener){this._afterCartUpdateListenersManager.addListener(listener)},NewCartService.prototype.has=function(productId){return-1!==this._productsIds.indexOf(productId)},NewCartService.prototype.getProducts=function(){return this._productsIds},NewCartService.prototype.getTotalPrice=function(){return this._totalPrice},NewCartService.prototype.getCount=function(){return this._productsIds.length},NewCartService.prototype.lock=function(){this._isLocked=!0},NewCartService.prototype.unlock=function(){this._isLocked=!1},NewCartService.prototype.add=function(productId,recommendationEngineSource,successResponse){null==successResponse&&(successResponse=null),this.has(productId)||this._isLocked||(this._productsIds.push(productId),this._isLocked=!0,this._beforeCartUpdateListenersManager.callListeners(productId),this._cartBackend.add(productId,recommendationEngineSource,successResponse).then(this._updateDataFromBackend.bind(this)).then(this._productAdded.bind(this)).then(this._notifyAnalyticsService.bind(this,productId)).catch(this._productAddingFailed.bind(this,[productId])))},NewCartService.prototype.addMany=function(productsIds,successResponse){var i,idsToAdd,len,productId;for(null==successResponse&&(successResponse=null),idsToAdd=[],i=0,len=productsIds.length;i<len;i++)productId=productsIds[i],this.has(productId)||(idsToAdd.push(productId),this._productsIds.push(productId));this._isLocked=!0,this._beforeCartUpdateListenersManager.callListeners(),this._cartBackend.addMany(idsToAdd,successResponse).then(this._updateDataFromBackend.bind(this)).then(this._productAdded.bind(this)).then(this._notifyAnalyticsService.bind(this,idsToAdd)).catch(this._productAddingFailed.bind(this,productsIds))},NewCartService.prototype.addSeries=function(seriesId,products,successResponse){var i,index,len,product,productsToAdd;for(null==successResponse&&(successResponse=null),productsToAdd=[],index=i=0,len=products.length;i<len;index=++i)product=products[index],this.has(product.id)||(productsToAdd.push(product.id),this._productsIds.push(product.id));this._isLocked=!0,this._beforeCartUpdateListenersManager.callListeners(),this._cartBackend.addSeries(seriesId,products,successResponse).then(this._updateDataFromBackend.bind(this)).then(this._productAdded.bind(this)).then(this._notifyAnalyticsService.bind(this,products)).catch(this._productAddingFailed.bind(this,productsToAdd))},NewCartService.prototype.remove=function(productId,successResponse){var productIndex;null==successResponse&&(successResponse=null),-1!==(productIndex=this._productsIds.indexOf(productId))&&(this._isLocked=!0,this._productsIds.splice(productIndex,1),this._beforeCartUpdateListenersManager.callListeners(),this._cartBackend.remove(productId,successResponse).then(this._updateDataFromBackend.bind(this)).then(this._productRemoved.bind(this)).catch(this._productRemovalFailed.bind(this)))},NewCartService.prototype._verifyChecksum=function(userData){null===userData.checksum.cart?this._clear():userData.checksum.cart&&userData.checksum.cart!==this._checksum?this.reload():this._restoreCart()},NewCartService.prototype._clear=function(){return this._beforeCartUpdateListenersManager.callListeners(),this._productsIds=[],this._checksum="",this._totalPrice=NewCartService.TOTAL_PRICE_DEFAULTS,this._afterCartUpdateListenersManager.callListeners()},NewCartService.prototype.reload=function(successResponse){null==successResponse&&(successResponse=null),this._cartBackend.reload(successResponse).then(this._updateDataFromBackend.bind(this)).then(this._cartReloaded.bind(this)).catch(this._cartReloadFailed.bind(this))},NewCartService.prototype._updateRepository=function(products){this._productsRepository.addProducts(products)},NewCartService.prototype._cartReloaded=function(){this._beforeCartUpdateListenersManager.callListeners(),this._afterCartUpdateListenersManager.callListeners(),this._isLocked=!1},NewCartService.prototype._cartReloadFailed=function(){this._afterCartUpdateListenersManager.callListeners()},NewCartService.prototype._store=function(){var products;products=this._productsRepository.getProducts(this._productsIds),this._userStorage.set("cart",{products:products,productsIds:this._productsIds,checksum:this._checksum,totalPrice:this._totalPrice})},NewCartService.prototype._restoreCart=function(){var storedProducts;this._userStorage.isSet("cart")&&(storedProducts=this._userStorage.get("cart").products,this._productsRepository.addProducts(storedProducts),this._productsIds=this._userStorage.get("cart").productsIds,this._totalPrice=this._userStorage.get("cart").totalPrice,this._publishCartUpdatedEvent(this._userStorage.get("cart").products),this._afterCartUpdateListenersManager.callListeners())},NewCartService.prototype._restoreChecksum=function(){this._userStorage.isSet("cart")&&(this._checksum=this._userStorage.get("cart").checksum)},NewCartService.prototype._productRemoved=function(){this._isLocked=!1,this._afterCartUpdateListenersManager.callListeners()},NewCartService.prototype._productRemovalFailed=function(){this._isLocked=!1,this._afterCartUpdateListenersManager.callListeners()},NewCartService.prototype._productAdded=function(){this._isLocked=!1,this._afterCartUpdateListenersManager.callListeners()},NewCartService.prototype._updateDataFromBackend=function(response){var product,productId,ref;if(null!=response.data.totalPrice&&(this._totalPrice=response.data.totalPrice),null!=response.data.checksum&&(this._checksum=response.data.checksum),response.data.cart){for(productId in this._productsIds=[],ref=response.data.cart)product=ref[productId],this._productsIds.push(product.id);this._updateRepository(response.data.cart),this._publishCartUpdatedEvent(response.data.cart)}null!=response.data.personalizedPricing&&this._productRepositoriesManager.updatePricesInAllRepositories(response.data.personalizedPricing.products),this._store()},NewCartService.prototype._publishCartUpdatedEvent=function(cartProducts){this._$window.gogEventBus.publish("cart","updated",{cartContent:Object.keys(cartProducts)},{crossFrame:!0})},NewCartService.prototype._productAddingFailed=function(productsIds){var i,len,productId,productIndex;for(this.isLocked=!1,i=0,len=productsIds.length;i<len;i++)productId=productsIds[i],-1!==(productIndex=this._productsIds.indexOf(productId))&&this._productsIds.splice(productIndex,1);this._afterCartUpdateListenersManager.callListeners()},NewCartService.prototype._notifyAnalyticsService=function(productsData){var i,len,product,productIds;if(productIds=[],productsData.length)for(i=0,len=productsData.length;i<len;i++)(product=productsData[i]).id?productIds.push(product.id):productIds.push(product);else productIds=[productsData];this._$window.gogEventBus.publish("analytics","addToCart",{productIds:productIds}),this._$window.gogEventBus.publish("cart","addProduct",{product:this._productRepositoriesManager.getRepository("regularProducts").getById(productsData)})},NewCartService}(),OrderNewCartService=function(superClass){function OrderNewCartService(listenersManager,_cartBackend,_userStorage,_userResponse,_user,_productsRepositoryFactory,productRepositoriesManager,_$window,_dataRepository){this._cartBackend=_cartBackend,this._userStorage=_userStorage,this._userResponse=_userResponse,this._user=_user,this._productsRepositoryFactory=_productsRepositoryFactory,this._$window=_$window,this._dataRepository=_dataRepository,OrderNewCartService.__super__.constructor.call(this,listenersManager,this._cartBackend,this._userStorage,this._userResponse,this._user,this._productsRepositoryFactory,productRepositoriesManager,this._$window),this._dataRepository.registerCartListener(this._updateDataFromDataRepository.bind(this))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(OrderNewCartService,NewCartService),OrderNewCartService.prototype.add=function(productId){this.has(productId)||this._isLocked||(this._productsIds.push(productId),this._dataRepository.addProduct(productId),this._isLocked=!0,this._beforeCartUpdateListenersManager.callListeners())},OrderNewCartService.prototype.remove=function(productId){var productIndex;-1!==(productIndex=this._productsIds.indexOf(productId))&&(this._isLocked=!0,this._productsIds.splice(productIndex,1),this._dataRepository.removeProduct(productId),this._beforeCartUpdateListenersManager.callListeners())},OrderNewCartService.prototype._updateDataFromDataRepository=function(response){var cartResponse;cartResponse={data:response},this._updateDataFromBackend(cartResponse),"native"===this._$window.gogData.mode?(this._updateDataFromBackend(cartResponse),this._cartReloaded()):this.reload()},OrderNewCartService}(),NewCartProvider=function(){function NewCartProvider(){this._serviceType="default",this.$get=["listenersManager","cartBackend","userStorage","userResponse","user","productsRepositoryFactory","productRepositoriesManager","$window",this._getService.bind(this)]}return NewCartProvider.prototype.setServiceType=function(newType){return this._serviceType=newType,"order"===this._serviceType?this.$get=["listenersManager","cartBackend","userStorage","userResponse","user","productsRepositoryFactory","productRepositoriesManager","$window","dataRepository",this._getService.bind(this)]:"default"===this._serviceType?this.$get=["listenersManager","cartBackend","userStorage","userResponse","user","productsRepositoryFactory","productRepositoriesManager","$window",this._getService.bind(this)]:void 0},NewCartProvider.prototype._services={default:NewCartService,order:OrderNewCartService},NewCartProvider.prototype._getService=function(listenersManager,cartBackend,userStorage,userResponse,user,productsRepositoryFactory,productRepositoriesManager,$window,dataRepository){return"order"!==this._serviceType?new this._services[this._serviceType](listenersManager,cartBackend,userStorage,userResponse,user,productsRepositoryFactory,productRepositoriesManager,$window):new this._services[this._serviceType](listenersManager,cartBackend,userStorage,userResponse,user,productsRepositoryFactory,productRepositoriesManager,$window,dataRepository)},NewCartProvider}(),gog.provider("cart",NewCartProvider))},function(module,exports){var extend=function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;gog.factory("seekerFactory",function(dataRepository,$q,$http,$cacheFactory,productsRepository,eventDispatcher,config,productsRepositoryFactory,productRepositoriesManager){var CustomProductsSeeker,MenuProductsSeeker,ProductsSeeker,Seeker;return Seeker=function(){function Seeker(ajaxURL){this.ajaxURL=ajaxURL,this.history=$cacheFactory.get("$http")}return Seeker.prototype.clearCache=function(){return this.history.removeAll()},Seeker.prototype.storeHistoryResult=function(params,data){return this.history.put(this._getCacheKey(params),data)},Seeker.prototype._getCacheKey=function(params){return this.ajaxURL+"?"+this._serialize(params)},Seeker.prototype.call=function(params){var deferred;return deferred=$q.defer(),$http({method:"GET",url:this.ajaxURL,params:params,cache:!0}).then(deferred.resolve,deferred.reject).finally(function(){return params=null}),deferred.promise},Seeker.prototype.setResponseIfValid=function(deferred,data){return deferred.resolve(data)},Seeker.prototype._serialize=function(params){var key,queryObjects,value;for(key in queryObjects=[],params)null!==(value=params[key])&&queryObjects.push(key+"="+value);return queryObjects.sort(),queryObjects.join("&")},Seeker}(),ProductsSeeker=function(superClass){function ProductsSeeker(ajaxUrl,cacheLimit){this.ajaxURL=ajaxUrl,this.history=$cacheFactory.get(ajaxUrl)||$cacheFactory(ajaxUrl),this._dispatcher=eventDispatcher,this._gamesUpdateEvent=config.event.user_games.reload,this._cacheLimit=cacheLimit,this._cacheKeys=[]}return extend(ProductsSeeker,Seeker),ProductsSeeker.prototype.call=function(params){var cachedResults,deferred;return this._pendingSerializedFilter=this._getCacheKey(params),(cachedResults=this.history.get(this._pendingSerializedFilter))?((deferred=$q.defer()).resolve(cachedResults),deferred.promise):dataRepository.getFilteredProducts(this.ajaxURL,params).then(this._onDataResponse.bind(this)).catch(angular.noop)},ProductsSeeker.prototype.storeHistoryResult=function(params,data){return ProductsSeeker.__super__.storeHistoryResult.call(this,params,data),this._registerProducts(data)},ProductsSeeker.prototype._onDataResponse=function(response){var filteredData;return filteredData=response.data,this._registerProducts(filteredData),this.history.put(this._pendingSerializedFilter,filteredData),this._cacheLimit&&(this._cacheKeys.push(this._pendingSerializedFilter),this.history.info().size>this._cacheLimit&&(this.history.remove(this._cacheKeys[0]),this._cacheKeys.shift())),filteredData},ProductsSeeker.prototype._registerProducts=function(productsData){return productsRepository.addProducts(productsData.products||productsData.wishlistedProducts),this._dispatcher.dispatch(this._gamesUpdateEvent)},ProductsSeeker}(),MenuProductsSeeker=function(superClass){function MenuProductsSeeker(ajaxUrl){MenuProductsSeeker.__super__.constructor.apply(this,arguments)}return extend(MenuProductsSeeker,ProductsSeeker),MenuProductsSeeker.prototype._registerProducts=function(productsData){var menuProductsRepository;try{menuProductsRepository=productsRepositoryFactory.createRegularProductsRepository("searchProducts")}catch(error1){error1,menuProductsRepository=productRepositoriesManager.getRepository("searchProducts")}return menuProductsRepository.addProducts(productsData.products||productsData.wishlistedProducts),this._dispatcher.dispatch(this._gamesUpdateEvent)},MenuProductsSeeker}(),CustomProductsSeeker=function(superClass){function CustomProductsSeeker(ajaxUrl,_customProductRepository){this._customProductRepository=_customProductRepository,CustomProductsSeeker.__super__.constructor.apply(this,arguments)}return extend(CustomProductsSeeker,ProductsSeeker),CustomProductsSeeker.prototype._registerProducts=function(productsData){return this._customProductRepository.addProducts(productsData.products||productsData.wishlistedProducts),this._dispatcher.dispatch(this._gamesUpdateEvent)},CustomProductsSeeker}(),{getSeeker:function(ajaxURL){return new Seeker(ajaxURL)},getProductsSeeker:function(ajaxURL,cacheLimit){return new ProductsSeeker(ajaxURL,cacheLimit,eventDispatcher,config)},getMenuProductsSeeker:function(ajaxURL){return new MenuProductsSeeker(ajaxURL)},getCustomProductsSeeker:function(ajaxURL,customProductRepository){return new CustomProductsSeeker(ajaxURL,customProductRepository)}}})},function(module,exports,__webpack_require__){"use strict";var OwnedProductsPersonalizerService;OwnedProductsPersonalizerService=function(){function OwnedProductsPersonalizerService(productsRepository,userGamesProvider,eventDispatcher,config){this._productsRepository=productsRepository,this._userGamesProvider=userGamesProvider,this._eventDispatcher=eventDispatcher,this._config=config,this._eventDispatcher.on(this._config.event.user_games.reload,this._peronalizeOwnedProducts.bind(this)),this._productsRepository.listenForNewProducts(this._peronalizeOwnedProducts.bind(this))}return OwnedProductsPersonalizerService.$inject=["productsRepository","userGamesProvider","eventDispatcher","config"],OwnedProductsPersonalizerService.prototype._peronalizeOwnedProducts=function(){var id,products;for(id in products=this._productsRepository.getProducts())products[id].isOwned=this._userGamesProvider.isOwned(id);return this._eventDispatcher.dispatch(this._config.event.user_games.post_personalization,products)},OwnedProductsPersonalizerService}(),gog.service("ownedProductsPersonalizer",OwnedProductsPersonalizerService)},function(module,exports){var UserGamesProviderService;UserGamesProviderService=function(){function UserGamesProviderService(userResponse,_$localStorage,_$http,_config,_eventDispatcher,listenersManager){this._$localStorage=_$localStorage,this._$http=_$http,this._config=_config,this._eventDispatcher=_eventDispatcher,this._storageDefaults={user:{games:{checksum:"",list:[]}}},this._ownedProductsListenersManager=listenersManager.getManager(),this._startStorage(),userResponse.success(this._onUserResponse.bind(this))}return UserGamesProviderService.$inject=["userResponse","$localStorage","$http","config","eventDispatcher","listenersManager"],UserGamesProviderService.prototype._onUserResponse=function(response){response.checksum.games&&response.isLoggedIn&&response.checksum.games!==this._getChecksum()?this._getGamesFromServer(response.checksum.games):response.isLoggedIn&&null!==response.checksum.games||(this._setUserGames([]),this._setChecksum("")),this._notifyAboutChanges()},UserGamesProviderService.prototype._startStorage=function(){this.storage=this._$localStorage.$default(this._storageDefaults)},UserGamesProviderService.prototype._getGamesFromServer=function(checksum){var _this;this._$http.get(this._config.urls.user.games).then((_this=this,function(response){_this._setUserGames(response.data.owned),_this._setChecksum(checksum)})).catch(angular.noop)},UserGamesProviderService.prototype.isOwned=function(id){var idInteger;return idInteger=parseInt(id),this.getUserGames().indexOf(idInteger)>-1},UserGamesProviderService.prototype._getChecksum=function(){return this.storage.user.games.checksum},UserGamesProviderService.prototype._setChecksum=function(checksum){this.storage.user.games.checksum=checksum},UserGamesProviderService.prototype.getUserGames=function(){return this.storage.user.games.list},UserGamesProviderService.prototype.registerOwnedGamesListChangeListener=function(listener){return this._ownedProductsListenersManager.addListener(listener)},UserGamesProviderService.prototype._setUserGames=function(games){this.storage.user.games.list=games,this._notifyAboutChanges()},UserGamesProviderService.prototype._notifyAboutChanges=function(){this._ownedProductsListenersManager.callListeners(this.storage.user.games.list),this._eventDispatcher.dispatch(this._config.event.user_games.reload)},UserGamesProviderService}(),angular.module("gog").service("userGamesProvider",UserGamesProviderService)},function(module,exports,__webpack_require__){"use strict";gog.factory("eventDispatcher",function($rootScope){return new(function(){function EventDispatcher(){}return EventDispatcher.prototype.dispatch=function(eventName,event){return $rootScope.$emit(eventName,event)},EventDispatcher.prototype.on=function(eventName,callback){return $rootScope.$on(eventName,callback)},EventDispatcher}())})},function(module,exports){gog.factory("debounce",function($timeout){return function(func,wait,immediate,withScopeApply){var debouncedFunc,timeout;return null==withScopeApply&&(withScopeApply=!0),timeout=null,(debouncedFunc=function(){var args,callNow,context,later;context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout,timeout&&$timeout.cancel(timeout),timeout=$timeout(later,wait,withScopeApply),callNow&&func.apply(context,args)}).cancel=function(){timeout&&$timeout.cancel(timeout)},debouncedFunc}})},function(module,exports){var ScrollManagerService,TOP_NAV_SELECTOR;TOP_NAV_SELECTOR="[gog-menu]",ScrollManagerService=function(){function ScrollManagerService(_$window,_$rootScope){this._$window=_$window,this._$rootScope=_$rootScope,this._onScrollClb=[],this._callbacksAmount=0,this._toDeregister=[],this._toDeregisterAmount=0,this._isObserverActive=!1,this._deregisterScopeListener=angular.noop,this._isRunningCallbacks=!1,this._runCallbacksBound=this._runCallbacks.bind(this),this._elTopNav=document.querySelector(TOP_NAV_SELECTOR),this._buildInterface(),this._scrollTop=this.getScrollTop()}return ScrollManagerService.$inject=["$window","$rootScope"],ScrollManagerService.prototype._buildInterface=function(){return"number"==typeof this._$window.pageYOffset?(this.getScrollTop=function(){return this._$window.pageYOffset},this.getScrollLeft=function(){return this._$window.pageXOffset}):"number"==typeof document.body.scrollTop?(this.getScrollTop=function(){return document.body.scrollTop},this.getScrollLeft=function(){return document.body.scrollLeft}):"number"==typeof document.documentElement.scrollTop?(this.getScrollTop=function(){return document.documentElement.scrollTop},this.getScrollLeft=function(){return document.documentElement.scrollLeft}):(this.getScrollTop=function(){return 0},this.getScrollLeft=function(){return 0})},ScrollManagerService.prototype.scrollBy=function(xOffset,yOffset){return this._$window.scrollBy(xOffset,yOffset)},ScrollManagerService.prototype.scrollTo=function(x,y){return this._$window.scrollTo(x,y)},ScrollManagerService.prototype.scrollToY=function(y){return this._$window.scrollTo(this.getScrollLeft(),y)},ScrollManagerService.prototype.scrollToElement=function(element,offset){var scrollTargetY;null==offset&&(offset=0),(scrollTargetY=this._getScrollToElementTargetY(element,offset))&&this.scrollToY(scrollTargetY)},ScrollManagerService.prototype.scrollToAnchor=function(anchorHash){this._$window.location.hash=anchorHash},ScrollManagerService.prototype.registerClb=function(clb){if(this._removeCallbacks(),this._callbacksAmount=this._onScrollClb.push(clb),clb(this._scrollTop),!this._isObserverActive)return this._activateObserver()},ScrollManagerService.prototype.deregisterClb=function(clb){if(-1!==this._onScrollClb.indexOf(clb))return this._toDeregisterAmount=this._toDeregister.push(clb)},ScrollManagerService.prototype._activateObserver=function(){return this._isObserverActive=!0,this._$window.addEventListener("scroll",this._onScrollListener.bind(this),!1),this._deregisterScopeListener=this._$rootScope.$on("sectionResize",this._onContentResize.bind(this))},ScrollManagerService.prototype._onContentResize=function(){return this._$window.requestAnimationFrame(this._runCallbacksBound)},ScrollManagerService.prototype._deactivateObserver=function(){return this._isObserverActive=!1,this._$window.removeEventListener("scroll",this._onScrollListener.bind(this)),this._deregisterScopeListener()},ScrollManagerService.prototype._onScrollListener=function(){if(!this._isRunningCallbacks)return this._scrollTop=this.getScrollTop(),this._isRunningCallbacks=!0,this._$window.requestAnimationFrame(this._runCallbacksBound)},ScrollManagerService.prototype._getScrollToElementTargetY=function(element,offset){if(null==offset&&(offset=0),element)return element.getBoundingClientRect().top+this.getScrollTop()+offset+this._calcTopNavOffset()},ScrollManagerService.prototype._calcTopNavOffset=function(){var topNavOffset;return topNavOffset=0,Math.max(document.documentElement.clientWidth,this._$window.innerWidth||0)>890&&null!=this._elTopNav?topNavOffset=-1*this._elTopNav.getBoundingClientRect().height:this._isEmbedMode&&(topNavOffset=-56),topNavOffset},ScrollManagerService.prototype._runCallbacks=function(){var callback,i,len,ref,results;if(this._isRunningCallbacks=!1,this._removeCallbacks(),0!==this._callbacksAmount){if(1===this._callbacksAmount)return this._onScrollClb[0](this._scrollTop);for(results=[],i=0,len=(ref=this._onScrollClb).length;i<len;i++)callback=ref[i],results.push(callback(this._scrollTop));return results}},ScrollManagerService.prototype._removeCallbacks=function(){var clb,i,len,ref;if(0!==this._toDeregisterAmount){for(i=0,len=(ref=this._toDeregister).length;i<len;i++)clb=ref[i],this._onScrollClb.splice(this._onScrollClb.indexOf(clb),1);return this._callbacksAmount=this._onScrollClb.length,this._toDeregisterAmount=0,this._toDeregister=[],this._isObserverActive&&0===this._callbacksAmount?this._deactivateObserver():void 0}},ScrollManagerService}(),gog.service("scrollManager",ScrollManagerService),window.ScrollManagerService=ScrollManagerService},function(module,exports){gog.directive("gogCssData",function($timeout,debounce){return{restrict:"A",scope:!1,link:function(scope,elem,attrs){var cssDataStr,cssDataUpdated,debounceDelay,getCssData,oldDataStr,windowResize,windowResizeDebounced;return cssDataStr=void 0,oldDataStr="",cssDataUpdated=!1,debounceDelay=parseInt(attrs.gogCssData)||200,windowResizeDebounced=debounce(windowResize=function(){(cssDataStr=getCssData(elem))&&cssDataStr!==oldDataStr&&(oldDataStr=cssDataStr,scope.cssData=JSON.parse(cssDataStr),cssDataUpdated=!0,$timeout(function(){cssDataUpdated&&(scope.$digest(),cssDataUpdated=!1)}))},debounceDelay,!1),getCssData=function(e){var data,dataHolder;return data="",dataHolder=e[0].querySelector(".css-data-holder"),window.getComputedStyle&&window.getComputedStyle(dataHolder,"::before")&&(data=(data=window.getComputedStyle(dataHolder,"::before")).content),0===(data=data.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"")).length&&(data=!1),data},function(){return angular.element(window).on("resize orientationchange",windowResizeDebounced),windowResize()}()}}})},function(module,exports){var GOGHrefSwapperController;GOGHrefSwapperController=function(){function GOGHrefSwapperController(_scope,_attrs){var _this;this._scope=_scope,this._attrs=_attrs,this._defaultHref=this._attrs.href,this._swapHref=this._attrs.gogHrefSwapper,this._scope.cssData={swapHrefs:!1},this._scope.$watch((_this=this,function(){return _this._scope.cssData.swapHrefs}),this._swapHrefs.bind(this))}return GOGHrefSwapperController.$inject=["$scope","$attrs"],GOGHrefSwapperController.prototype._swapHrefs=function(shouldSwapHrefs){var newHref;return newHref=shouldSwapHrefs?this._swapHref:this._defaultHref,this._attrs.$set("href",newHref)},GOGHrefSwapperController}(),gog.directive("gogHrefSwapper",function(){return{scope:!0,restrict:"A",controller:GOGHrefSwapperController}})},function(module,exports){gog.directive("gogDropdown",function($window,$timeout,eventDispatcher){return{restrict:"A",scope:!0,controller:function(){function GogDropdownController(_$scope){this._$scope=_$scope}return GogDropdownController.$inject=["$scope"],GogDropdownController.prototype.close=function(){return this._$scope.dropdownClose(!0)},GogDropdownController}(),link:function(scope,e_dropdown,attrs){var bindBodyClick,bindBodyEsc,bindOffCanvasEvents,bindStopPropagation,bodyNgEl,bodyOneClick,classes,closeDropdown,closeOnEsc,closingTimer,currentOptions,defaultOptions,dropdownBindHoverEvents,dropdownDisable,dropdownEnable,dropdownFlashing,dropdownItemClick,dropdownMouseenter,dropdownMouseleave,dropdownToggleClick,dropdownUnBindHoverEvents,e_forceToggle,e_items,e_toggle,hasTogglesOutside,hoverDelay,hoverEventOpen,hoverEventsMouseenter,hoverEventsMouseleave,hoverTimer,init,isAlreadyOpened,isBodyClickBound,isDropdownOpened,is_turned_on,offCanvasState,onCloseCanvas,onCloseCanvasTransitionEnd,onCssDataChange,onGogDropdownOpen,onOffCanvasStateChange,openDropdown,removeOnGogDropdownOpen,stopCssDataWatch,supportsTransitionEnd,toggleClickable,toggleDropdown,unBindBodyClick,unBindBodyEsc;return classes={isContracted:"is-contracted",isExpanded:"is-expanded"},offCanvasState=0,isAlreadyOpened=!1,!1,supportsTransitionEnd=angular.isDefined($window.TransitionEvent),isBodyClickBound=!1,bodyNgEl=angular.element(document.body),e_items=e_forceToggle=e_toggle=closingTimer=hoverTimer=scope.cssData=hoverDelay=toggleClickable=hasTogglesOutside=!1,dropdownFlashing=!1,!1,is_turned_on=!1,250,2e3,currentOptions=defaultOptions={dropdownEnabled:!0,dropdownForceOpen:!1,ignoreMouseEvents:!1},stopCssDataWatch=removeOnGogDropdownOpen=angular.noop,init=function(){var dropdownGroup,elAllItems,toggles;return dropdownGroup=attrs.gogDropdownGroup,angular.isDefined(attrs.gogDropdownOffcanvas)&&(offCanvasState=parseInt(attrs.gogDropdownOffcanvas,10),bindOffCanvasEvents()),elAllItems=e_dropdown[0].querySelectorAll("._dropdown__item"),e_items=angular.element(Array.prototype.filter.call(elAllItems,function(elItem){return!elItem.classList.contains("js-ignore-by-dropdown")})),e_forceToggle=angular.element(e_dropdown[0].querySelectorAll("._dropdown__force-toggle")),toggles=(hasTogglesOutside=angular.isDefined(attrs.gogDropdownGroup))?angular.element(document.querySelectorAll("[gog-dropdown-toggle="+dropdownGroup+"]")):angular.element(e_dropdown[0].querySelectorAll("._dropdown__toggle")),e_toggle=toggles.length>0?toggles:e_dropdown,angular.element(e_toggle[0].querySelectorAll(".js-not-toggle")).on("click",function($event){return $event.stopPropagation()}),hoverDelay=parseInt(attrs.gogDropdown),toggleClickable=!!attrs.gogDropdownToggleClickable,stopCssDataWatch=scope.$watch(function(){return scope.cssData},onCssDataChange)},isDropdownOpened=function(){return e_dropdown.hasClass(classes.isExpanded)},openDropdown=function(){if(e_dropdown.addClass(classes.isExpanded).removeClass(classes.isContracted),null!=currentOptions.ignoreMouseEvents)return bindBodyEsc()},closeDropdown=function(){if(e_dropdown.removeClass(classes.isExpanded).addClass(classes.isContracted),null!=currentOptions.ignoreMouseEvents)return unBindBodyEsc()},toggleDropdown=function(){return isDropdownOpened()?closeDropdown():openDropdown()},bindOffCanvasEvents=function(){return eventDispatcher.on("offCanvasChange",onOffCanvasStateChange),eventDispatcher.on("offCanvasDestroy",closeDropdown)},onCssDataChange=function(newData){if("object"!=typeof newData&&stopCssDataWatch(),currentOptions=angular.extend(angular.copy(defaultOptions),newData),!0,currentOptions.dropdownEnabled!==is_turned_on)return currentOptions.dropdownEnabled?dropdownEnable():dropdownDisable()},dropdownEnable=function(){if(is_turned_on=!0,e_items.on("click",dropdownItemClick),e_toggle.on("click",dropdownToggleClick),e_forceToggle.on("click",dropdownToggleClick),removeOnGogDropdownOpen=eventDispatcher.on("gogDropdownOpen",onGogDropdownOpen),isNaN(hoverDelay)||dropdownBindHoverEvents(),currentOptions.ignoreMouseEvents&&(bindStopPropagation(e_dropdown),hasTogglesOutside))return bindStopPropagation(e_toggle)},dropdownDisable=function(){if(is_turned_on=!1,e_items.off("click",dropdownItemClick),e_toggle.off("click",dropdownToggleClick),e_forceToggle.off("click",dropdownToggleClick),removeOnGogDropdownOpen(),!isNaN(hoverDelay))return dropdownUnBindHoverEvents()},onGogDropdownOpen=function(e,openScopeId){if(openScopeId!==scope.$id)return scope.dropdownClose(!0)},onOffCanvasStateChange=function(event,newOffCanvasState){return newOffCanvasState===offCanvasState?(isAlreadyOpened=!0,openDropdown()):(isAlreadyOpened=!1,onCloseCanvas())},onCloseCanvas=function(){if(isDropdownOpened())return supportsTransitionEnd?bodyNgEl.on("transitionend",onCloseCanvasTransitionEnd):closeDropdown()},onCloseCanvasTransitionEnd=function(){return isAlreadyOpened||closeDropdown(),bodyNgEl.off("transitionend",onCloseCanvasTransitionEnd)},dropdownToggleClick=function(e){if(!toggleClickable)return angular.element(this).attr("gog-dropdown-toggle")||e.stopPropagation(),toggleDropdown(),isDropdownOpened()?scope.dropdownOpen(!0):scope.dropdownClose(!0)},scope.dropdownFlash=function(){if(!currentOptions.dropdownForceOpen)return dropdownFlashing=!0,scope.dropdownOpen(!0),$timeout.cancel(closingTimer),closingTimer=$timeout(function(){return scope.dropdownClose(!0),dropdownFlashing=!1},2e3)},scope.dropdownOpen=function(force){if(currentOptions.dropdownEnabled&&(force&&openDropdown(),hasTogglesOutside&&e_toggle.addClass("is-dropdown-open"),eventDispatcher.dispatch("gogDropdownOpen",scope.$id),$timeout.cancel(hoverTimer),$timeout.cancel(closingTimer),!currentOptions.dropdownForceOpen))return currentOptions.ignoreMouseEvents?(dropdownFlashing||$timeout(bindBodyClick,100),e_dropdown.on("mouseenter",dropdownMouseenter)):(e_dropdown.on("mouseleave",dropdownMouseleave).on("mouseenter",dropdownMouseenter),hasTogglesOutside?e_toggle.on("mouseleave",dropdownMouseleave).on("mouseenter",dropdownMouseenter):void 0)},dropdownMouseleave=function(e){return $timeout.cancel(closingTimer),closingTimer=$timeout(function(){return scope.dropdownClose(!0)},250)},dropdownMouseenter=function(e){return dropdownFlashing&&bindBodyClick(),$timeout.cancel(closingTimer)},scope.dropdownClose=function(force){if(currentOptions.ignoreMouseEvents?unBindBodyClick():e_dropdown.off("mouseleave",dropdownMouseleave).off("mouseenter",dropdownMouseenter),force&&closeDropdown(),$timeout.cancel(closingTimer),$timeout.cancel(hoverTimer),hasTogglesOutside)return e_toggle.removeClass("is-dropdown-open")},dropdownItemClick=function(e){var ngThis;if(this.classList.contains("js-propagate-event")||e.stopPropagation(),e_items.removeClass("is-dropdown-item-selected"),(ngThis=angular.element(this)).addClass("is-dropdown-item-selected"),scope.selectedText=angular.element(this).text(),!ngThis.hasClass("js-not-toggle"))return scope.dropdownClose(!0)},dropdownBindHoverEvents=function(){if(!currentOptions.ignoreMouseEvents&&(e_dropdown.on("mouseenter",hoverEventsMouseenter).on("mouseleave",hoverEventsMouseleave),hasTogglesOutside))return e_toggle.on("mouseenter",hoverEventsMouseenter).on("mouseleave",hoverEventsMouseleave)},dropdownUnBindHoverEvents=function(){if(!currentOptions.ignoreMouseEvents&&(e_dropdown.off("mouseenter",hoverEventsMouseenter).off("mouseleave",hoverEventsMouseleave),hasTogglesOutside))return e_toggle.off("mouseenter",hoverEventsMouseenter).off("mouseleave",hoverEventsMouseleave)},hoverEventsMouseenter=function(){return hoverTimer=$timeout(hoverEventOpen,hoverDelay)},hoverEventsMouseleave=function(){return $timeout.cancel(hoverTimer)},hoverEventOpen=function(){return scope.dropdownOpen(!0)},bindStopPropagation=function(elem){return elem.on("click",function($event){return $event.stopPropagation()})},bindBodyClick=function(){if(!isBodyClickBound)return isBodyClickBound=!0,angular.element(document.body).one("click",bodyOneClick)},unBindBodyClick=function(){return isBodyClickBound&&(isBodyClickBound=!1),angular.element(document.body).off("click",bodyOneClick)},bodyOneClick=function($event){if(isDropdownOpened())return eventDispatcher.dispatch("gogDropdownOpen",-1)},bindBodyEsc=function(){return angular.element(document.body).on("keyup",closeOnEsc)},unBindBodyEsc=function(){return angular.element(document.body).off("keyup",closeOnEsc)},closeOnEsc=function($event){if(27===$event.keyCode)return eventDispatcher.dispatch("gogDropdownOpen",-1)},init()}}}),gog.directive("gogDropdownClose",function(){return{restrict:"A",require:"gogDropdown",link:function(scope,ngElDropdown,attrs,gogDropdownCtrl){var cancelAttrObserver,init,onClosingConditionChange,tearDownDirective;return cancelAttrObserver=angular.noop,init=function(){return cancelAttrObserver=attrs.$observe("gogDropdownClose",onClosingConditionChange),ngElDropdown.on("$destroy",tearDownDirective)},onClosingConditionChange=function(isClosingRequired){if(angular.fromJson(isClosingRequired))return gogDropdownCtrl.close()},tearDownDirective=function(){return cancelAttrObserver(),cancelAttrObserver=null},init()}}})},function(module,exports){Modernizr.pictureelement||gog.directive("gogPictureFill",function(pictureFill){return{restrict:"A",scope:!1,link:function(scope,elem,attrs){return pictureFill.runWithImage(elem[0])}}}),Modernizr.srcset||(gog.directive("ngSrcset",function(pictureFill){return{restrict:"A",scope:!1,link:function(scope,elem,attrs){var cancelObserver;return pictureFill.runWithImage(elem[0]),cancelObserver=attrs.$observe("ngSrcset",pictureFill.reevaluateImage.bind(pictureFill,elem[0])),scope.$on("$destroy",cancelObserver)}}}),gog.directive("srcset",function(pictureFill){return{restrict:"A",scope:!1,link:function(scope,elem,attrs){var cancelObserver;if("img"===elem[0].nodeName.toLowerCase())return pictureFill.runWithImage(elem[0]),cancelObserver=attrs.$observe("srcset",pictureFill.reevaluateImage.bind(pictureFill,elem[0])),scope.$on("$destroy",cancelObserver)}}}))},function(module,exports){var PictureFillService;PictureFillService=function(){function PictureFillService($window,$document,_debounce){this._debounce=_debounce,this._document=$document[0],this._pictureFill=$window.picturefill,this._runWithImagesDebounced=this._debounce(this._runWithImages.bind(this),50,!1,!1),this._queuedElImages=[],this._onWindowResizeDebounced=this._debounce(this._onWindowResize.bind(this),300,!1,!1),$window.addEventListener("resize",this._onWindowResizeDebounced)}return PictureFillService.$inject=["$window","$document","debounce"],PictureFillService.MAX_IMAGES_RUN=25,PictureFillService.prototype.reevaluateImages=function(elImages){var elImage,i,len;for(i=0,len=elImages.length;i<len;i++)elImage=elImages[i],this.reevaluateImage(elImage)},PictureFillService.prototype.runWithImage=function(elImage){if(!this._isQueued(elImage))return this._addToQueue(elImage),this._runWithImagesDebounced()},PictureFillService.prototype.reevaluateImage=function(elImage){if(!this._isQueued(elImage))return this._addToQueue(elImage),this._runWithImagesDebounced(!0)},PictureFillService.prototype._onWindowResize=function(){var elImages;return elImages=this._document.images,this.reevaluateImages(elImages)},PictureFillService.prototype._addToQueue=function(elImage){return this._markAsQueued(elImage),this._getCurrentElImages().push(elImage)},PictureFillService.prototype._runWithImages=function(isReevaluationRequired){var elImagesToRun;if(null==isReevaluationRequired&&(isReevaluationRequired=!1),this._areNextImages())return elImagesToRun=this._getNextElImages(),this._pictureFill({elements:elImagesToRun,reevaluate:isReevaluationRequired}),this._runWithImagesDebounced()},PictureFillService.prototype._areNextImages=function(){return 0!==this._queuedElImages.length},PictureFillService.prototype._getNextElImages=function(){var elImage,i,len,unqueuedElImages;for(i=0,len=(unqueuedElImages=this._queuedElImages.shift()).length;i<len;i++)elImage=unqueuedElImages[i],this._markAsUnqueued(elImage);return unqueuedElImages},PictureFillService.prototype._isQueued=function(elImage){return Boolean(elImage._pictureFillQueued)},PictureFillService.prototype._markAsQueued=function(elImage){return elImage._pictureFillQueued=!0},PictureFillService.prototype._markAsUnqueued=function(elImage){return elImage._pictureFillQueued=!1},PictureFillService.prototype._getCurrentElImages=function(){var currentElImages;return(currentElImages=this._queuedElImages[this._queuedElImages.length-1])&&currentElImages.length!==PictureFillService.MAX_IMAGES_RUN||(currentElImages=[],this._queuedElImages.push(currentElImages)),currentElImages},PictureFillService}(),gog.service("pictureFill",PictureFillService)},function(module,exports,__webpack_require__){"use strict";gog.factory("user",function(userResponse,$localStorage,eventDispatcher,config,$window,userStorage){return new(function(){function _Class(){var _this;this.rawResponse={},this.loadDone=!1,this.osOverride=!1,this.storageDefaults={user:{language:"",os:"WINDOWS",updates:{}}},this.dynamicData={personalizedPrices:[]},this.startStorage(),userResponse.success((_this=this,function(data){_this.rawResponse=data,null!=data.isLoggedIn&&(_this.storage.user.isLoggedIn=data.isLoggedIn),null!=data.preferredLanguage&&(_this.storage.user.language=data.preferredLanguage),null!=data.os&&(_this.storage.user.os=data.os),null!=data.updates&&(_this.storage.user.updates=data.updates),null!=data.userId&&(_this.storage.user.id=data.userId,_this._initUserStorage()),null!=data.galaxyUserId&&(_this.storage.user.galaxyUserId=data.galaxyUserId),null!=data.username&&(_this.storage.user.username=data.username),_this.dynamicData.personalizedProductPrices=data.personalizedProductPrices,_this.dynamicData.personalizedSeriesPrices=data.personalizedSeriesPrices,null!=data.stretchGoals&&(_this.dynamicData.stretchGoals=data.stretchGoals),_this.loadDone=!0,eventDispatcher.dispatch(config.event.user_status.update)}))}return _Class.prototype.startStorage=function(){this.storage=$localStorage.$default(this.storageDefaults),$window.gogData&&(null!=$window.gogData.availableCurrencies&&(this.storage.user.currencies=$window.gogData.availableCurrencies),null!=$window.gogData.currentCurrency&&(this.storage.user.selectedCurrency=$window.gogData.currentCurrency),null!=$window.gogData.currentCountry&&(this.storage.user.currentCountry=$window.gogData.currentCountry),null!=$window.gogData.availableLanguages&&(this.storage.user.languages=$window.gogData.availableLanguages),null!=$window.gogData.currentLanguage&&(this.storage.user.selectedLanguage=$window.gogData.currentLanguage)),this._initUserStorage()},_Class.prototype.isLoggedIn=function(){return!!angular.isDefined(this.storage.user.isLoggedIn)&&this.storage.user.isLoggedIn},_Class.prototype.getLanguage=function(){return this.storage.user.language},_Class.prototype.getUpdates=function(){return this.storage.user.updates},_Class.prototype.getOS=function(){return this.osOverride||this.storage.user.os},_Class.prototype.setOS=function(os){this.osOverride=os},_Class.prototype.isLoaded=function(){return this.loadDone},_Class.prototype.getCurrencies=function(){return this.storage.user.currencies},_Class.prototype.getSelectedCurrency=function(){return this.storage.user.selectedCurrency},_Class.prototype.setSelectedCurrency=function(currency){return this.storage.user.selectedCurrency=currency},_Class.prototype.getCountry=function(){return this.storage.user.currentCountry},_Class.prototype.getPersonalizedProductPrices=function(){return this.dynamicData.personalizedProductPrices},_Class.prototype.getPersonalizedSeriesPrices=function(){return this.dynamicData.personalizedSeriesPrices},_Class.prototype.getLanguages=function(){return this.storage.user.languages},_Class.prototype.setLanguages=function(languages){this.storage.user.languages=languages},_Class.prototype.getSelectedLanguage=function(){return this.storage.user.selectedLanguage},_Class.prototype.setSelectedLanguage=function(language){this.storage.user.selectedLanguage=language},_Class.prototype.getId=function(){return this.storage.user.id},_Class.prototype.getGalaxyUserId=function(){return this.storage.user.galaxyUserId},_Class.prototype.getUsername=function(){return this.storage.user.username},_Class.prototype.getStretchGoals=function(){return this.dynamicData.stretchGoals},_Class.prototype._initUserStorage=function(){this.getId()&&userStorage.setUserId(this.getId())},_Class}())})},function(module,exports,__webpack_require__){"use strict";gog.factory("config",function($window,$locale){var profilesHost;return profilesHost="",window.hasOwnProperty("gogData")&&window.gogData.hasOwnProperty("env")&&"dev"===window.gogData.env&&(profilesHost="https://profiles.gog.dev"),{event:{user_status:{update:"user_status_update"},user_games:{reload:"user_games.reload",post_personalization:"user_games.afterPersonalization"},cart:{reload:"cart.reload",adding_product:"cart.adding_product"},storage:{reset:"storage.reset"},layout:{changed:"layout.changed"},cartBackend:{channel:"cartBackend",events:{addRequest:"addRequest",addSuccess:"addSuccess",addFailure:"addFailure",removeRequest:"removeRequest",removeSuccess:"removeSuccess",removeFailure:"removeFailure",addManyRequest:"addManyRequest",addManySuccess:"addManySuccess",addManyFailure:"addManyFailure",addSeriesRequest:"addSeriesRequest",addSeriesSuccess:"addSeriesSuccess",addSeriesFailure:"addSeriesFailure",reloadRequest:"reloadRequest",reloadResponse:"reloadResponse"}},user:{channel:"user",events:{userDataRequest:"userDataRequest",userDataResponse:"userDataResponse"}},order:{timeout:"transaction.timeout"}},storage:{notLoggedId:"anonymous",keyPrefix:"gog"},urls:{search:{filtering:"/games/ajax/filtered"},user:{data:"/userData.json",games:"/user/data/games",wishlist:{get:"/user/wishlist.json",add:function(id){return"/user/wishlist/add/"+id},remove:function(id){return"/user/wishlist/remove/"+id}},notification:{release:{get:function(userId){return"/api/users/"+userId+"/releaseSubscriptions"},subscribe:function(userId,id){return"/api/users/"+userId+"/releaseSubscriptions/"+id},unsubscribe:function(userId,id){return"/api/users/"+userId+"/releaseSubscriptions/"+id}}},change_currency:function(currencyCode){return"/user/changeCurrency/"+currencyCode},change_language:function(languageCode){return"/user/changeLanguage/"+languageCode},tw3_change_language:function(languageCode){return"/thewitcher3/changeLanguage/"+languageCode},setRedirectUrl:function(route){return"/user/set-redirect-url?url="+route},setRedirectUrlWithParams:function(route,params){return"/user/set-redirect-url?url="+route+"&"+params},avatar_nick:"/user/data/username_and_avatar",reviewGuidelines:"/user/reviewTipsStatus.json",profile:function(username){return profilesHost+"/u/"+username},profilePrivacy:function(userId){return profilesHost+"/profile/privacy/"+userId},public:{info:function(userId){return"/users/info/"+userId+"?expand=friendStatus,wishlistStatus,blockedStatus"},block:function(userId){return"/users/"+userId+"/block"},unblock:function(userId){return"/users/"+userId+"/unblock"}}},friends:{remove:function(userId){return"/friends/remove/"+userId},invite:function(userId){return"/friends/invite/"+userId},accept:function(inviteId){return"/friends/invites/"+inviteId+"/accept"},decline:function(inviteId){return"/friends/invites/"+inviteId+"/decline"}},cart:{get:"/cart",add:function(id,recommendationEngineSource){return"string"==typeof recommendationEngineSource?"/cart/add/"+id+"?rec="+recommendationEngineSource:"/cart/add/"+id},addMany:"/cart/add",addSeries:function(id){return"/cart/add/series/"+id},remove:function(id){return"/cart/remove/"+id}},order:{changeCurrency:function(orderId,currencyCode){return"/checkout/order/"+orderId+"/changeCurrency/"+currencyCode},removeFromOrder:function(orderId,itemId){return"/checkout/order/"+orderId+"/remove/"+itemId},addToOrder:function(orderId,itemId){return"/checkout/order/"+orderId+"/add/"+itemId},enableStoreCredit:function(orderId){return"/checkout/order/"+orderId+"/enableStoreCredit"},disableStoreCredit:function(orderId){return"/checkout/order/"+orderId+"/disableStoreCredit"},setAsGift:function(orderId){return"/checkout/order/"+orderId+"/setAsGift"},setAsNotGift:function(orderId){return"/checkout/order/"+orderId+"/setAsNotGift"},processOrder:function(orderPublicId){return"/payment/process/"+orderPublicId},pingPaymentStatus:function(paymentId){return"/payment/ping/"+paymentId},pingOrderStatus:function(orderid){return"/order/checkStatus/"+orderid}},login:{forceOpenHash:"openlogin",openWithUrlParam:"openLoginUrl"},logout:"/logout",checkout:"/checkout",checkoutFromId:function(id){return"/checkout/"+id},checkoutManual:function(slug){return"/checkout/manual/"+slug},goghero:function(heroId){return"/goghero/vote/"+heroId}},spots:{rotateInterval:5e3,promoSpotDelay:400},date:{defaultFormat:"de-DE"===$window.gogData.currentLanguage?"MMM d, yyyy":$locale.DATETIME_FORMATS.mediumDate,dayAndMonth:null!=$window.gogData.dateFormats&&null!=$window.gogData.dateFormats.tiny?$window.gogData.dateFormats.tiny:$locale.DATETIME_FORMATS.mediumDate},ui:{hoverIntentDelay:250}}})},function(module,exports){var CartBackendService,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};CartBackendService=function(){function CartBackendService(_$http,_config,_$window){this._$http=_$http,this._config=_config,this._$window=_$window,this._add=bind(this._add,this),this._$window.gogEventBus.subscribe(this._config.event.cartBackend.channel,this._config.event.cartBackend.events.addRequest,this._add.bind(this)),this._$window.gogEventBus.subscribe(this._config.event.cartBackend.channel,this._config.event.cartBackend.events.addManyRequest,this._addMany.bind(this)),this._$window.gogEventBus.subscribe(this._config.event.cartBackend.channel,this._config.event.cartBackend.events.addSeriesRequest,this._addSeries.bind(this)),this._$window.gogEventBus.subscribe(this._config.event.cartBackend.channel,this._config.event.cartBackend.events.removeRequest,this._remove.bind(this)),this._$window.gogEventBus.subscribe(this._config.event.cartBackend.channel,this._config.event.cartBackend.events.reloadRequest,this._reload.bind(this))}return CartBackendService.$inject=["$http","config","$window"],CartBackendService.prototype.add=function(productId,recommendationEngineSource,successResponse){return this._$http.get(this._config.urls.cart.add(productId,recommendationEngineSource))},CartBackendService.prototype.remove=function(productId,successResponse){return this._$http.get(this._config.urls.cart.remove(productId))},CartBackendService.prototype.reload=function(successResponse){return this._$http.get(this._config.urls.cart.get)},CartBackendService.prototype.addMany=function(productIds,successResponse){return this._$http.post(this._config.urls.cart.addMany,{product_ids:productIds})},CartBackendService.prototype.addSeries=function(seriesId,products,successResponse){return this._$http.get(this._config.urls.cart.addSeries(seriesId))},CartBackendService.prototype._add=function(){var _this;this.add.apply(this,arguments).then((_this=this,function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.addSuccess,response.data)}),function(_this){return function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.addFailure,response.data)}}(this))},CartBackendService.prototype._addMany=function(){var _this;this.addMany.apply(this,arguments).then((_this=this,function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.addManySuccess,response.data)}),function(_this){return function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.addManyFailure,response.data)}}(this))},CartBackendService.prototype._addSeries=function(){var _this;this.addSeries.apply(this,arguments).then((_this=this,function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.addSeriesSuccess,response.data)}),function(_this){return function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.addSeriesFailure,response.data)}}(this))},CartBackendService.prototype._remove=function(){var _this;this.remove.apply(this,arguments).then((_this=this,function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.removeSuccess,response.data)}),function(_this){return function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.removeFailure,response.data)}}(this))},CartBackendService.prototype._reload=function(){var _this;this.reload.apply(this,arguments).finally((_this=this,function(response){_this._$window.gogEventBus.publish(_this._config.event.cartBackend.channel,_this._config.event.cartBackend.events.reloadResponse,response.data)}))},CartBackendService}(),window.hasOwnProperty("gogData")&&window.gogData.hasOwnProperty("mode")&&"embed"!==window.gogData.mode&&angular.module("gog").service("cartBackend",CartBackendService),window.CartBackendService=CartBackendService},function(module,exports,__webpack_require__){"use strict";gog.factory("wishlist",function(listenersManager,dataRepository,$http,config,userResponse,$localStorage,eventDispatcher,user,galaxyAccounts){return new(function(){function _Class(){var _this;this.startStorage(),eventDispatcher.on(config.event.storage.reset,this.reset.bind(this)),this._wishlistListeners=listenersManager.getManager(),this._addingListeners=listenersManager.getManager(),this._removingListeners=listenersManager.getManager(),dataRepository.registerWishlistListener(this.reload.bind(this)),userResponse.success((_this=this,function(data){return data.checksum.wishlist&&data.isLoggedIn&&data.checksum.wishlist!==_this.getChecksum()&&_this.getDataFromServer(),_this._wishlistListeners.callListeners()})),this._changeInProgressForProduct={}}return _Class.prototype.startStorage=function(){return this.storage=$localStorage.$default(this.storageDefaults)},_Class.prototype.reset=function(){return this.startStorage()},_Class.prototype.storageDefaults={user:{wishlist:{products:{},checksum:""}}},_Class.prototype.getChecksum=function(){return this.storage.user.wishlist.checksum},_Class.prototype.setChecksum=function(checksum){return this.storage.user.wishlist.checksum=checksum},_Class.prototype.getProducts=function(){return this.storage.user.wishlist.products},_Class.prototype.setProducts=function(products){return this.storage.user.wishlist.products=products},_Class.prototype.getCount=function(){return Object.keys(this.storage.user.wishlist.products).length},_Class.prototype.reload=function(response){return Object.keys(response.wishlist).length>0||(response.wishlist={}),this.setProducts(response.wishlist),this.setChecksum(response.checksum),this._wishlistListeners.callListeners()},_Class.prototype.getDataFromServer=function(){return dataRepository.getWishlist()},_Class.prototype.add=function(id){if(!this._changeInProgressForProduct[id]&&!this.has(id)){if(user.isLoggedIn())return this._changeInProgressForProduct[id]=!0,this.storage.user.wishlist.products[id]=!0,this._wishlistListeners.callListeners(),dataRepository.addToWishlist(id).then(this._onProductAdded.bind(this,id),this._onProductAddError.bind(this,id)).finally(this._setNotInProgressForID.bind(this,id));galaxyAccounts.openLoginForm()}},_Class.prototype.addOnFrontend=function(id){this.storage.user.wishlist.products[id]=!0,this._wishlistListeners.callListeners(),this._onProductAdded.bind(this,id)},_Class.prototype.remove=function(id){if(!this._changeInProgressForProduct[id]&&this.has(id))return this._changeInProgressForProduct[id]=!0,this.storage.user.wishlist.products[id]=!1,this._wishlistListeners.callListeners(),dataRepository.removeFromWishlist(id).then(this._onProductRemoved.bind(this,id),this._onProductRemoveError.bind(this,id)).finally(this._setNotInProgressForID.bind(this,id))},_Class.prototype.has=function(id){return!0===this.storage.user.wishlist.products[id]},_Class.prototype.getWishlistedProducts=function(){return this.storage.user.wishlist.products},_Class.prototype.registerWishlistListener=function(listener){return this._wishlistListeners.addListener(listener)},_Class.prototype.registerAddingListener=function(listener){return this._addingListeners.addListener(listener)},_Class.prototype.registerRemovingListener=function(listener){return this._removingListeners.addListener(listener)},_Class.prototype._onProductAdded=function(productId){return this._addingListeners.callListeners(productId)},_Class.prototype._onProductRemoved=function(productId){return this._removingListeners.callListeners(productId)},_Class.prototype._onProductAddError=function(productId){return this.storage.user.wishlist.products[productId]=!1,this._wishlistListeners.callListeners()},_Class.prototype._onProductRemoveError=function(productId){return this.storage.user.wishlist.products[productId]=!0,this._wishlistListeners.callListeners()},_Class.prototype._setNotInProgressForID=function(productId){return this._changeInProgressForProduct[productId]=!1},_Class}())})},function(module,exports){var NotificationRelatedPageEnterCallerService;NotificationRelatedPageEnterCallerService=function(){function NotificationRelatedPageEnterCallerService(_notificationRelatedPageEnterAdapter){this._notificationRelatedPageEnterAdapter=_notificationRelatedPageEnterAdapter}return NotificationRelatedPageEnterCallerService.$inject=["notificationRelatedPageEnterAdapter"],NotificationRelatedPageEnterCallerService.prototype.enteredOwnWishlist=function(){this._notificationRelatedPageEnterAdapter.wishlistEntered()},NotificationRelatedPageEnterCallerService.prototype.enteredForumTopic=function(forumSlug,topicSlug){this._notificationRelatedPageEnterAdapter.forumTopicEntered(forumSlug,topicSlug)},NotificationRelatedPageEnterCallerService.prototype.enteredGameCard=function(productId){this._notificationRelatedPageEnterAdapter.gameCardEntered(productId)},NotificationRelatedPageEnterCallerService}(),angular.module("gog").service("notificationRelatedPageEnterCaller",NotificationRelatedPageEnterCallerService)},function(module,exports){var NotificationRelatedPageEnterAdapterProvider,NotificationRelatedPageEnterEmbedMessageAdapter,NotificationRelatedPageEnterMenuServiceAdapter;NotificationRelatedPageEnterEmbedMessageAdapter=function(){function NotificationRelatedPageEnterEmbedMessageAdapter(_GalaxyClientCaller){this._GalaxyClientCaller=_GalaxyClientCaller}return NotificationRelatedPageEnterEmbedMessageAdapter.prototype.wishlistEntered=function(){this._GalaxyClientCaller.callMessageToMicroserviceMenu("wishlistEntered",{})},NotificationRelatedPageEnterEmbedMessageAdapter.prototype.forumTopicEntered=function(forumSlug,topicSlug){this._GalaxyClientCaller.callMessageToMicroserviceMenu("forumTopicEntered",{forumSlug:forumSlug,topicSlug:topicSlug})},NotificationRelatedPageEnterEmbedMessageAdapter.prototype.gameCardEntered=function(productId){if("string"!=typeof productId)throw new Error("Expected productId to be a string. Please cast it.");this._GalaxyClientCaller.callMessageToMicroserviceMenu("gameCardEntered",{productId:productId})},NotificationRelatedPageEnterEmbedMessageAdapter}(),NotificationRelatedPageEnterMenuServiceAdapter=function(){function NotificationRelatedPageEnterMenuServiceAdapter(_menuNotificationRelatedPageEnter){this._menuNotificationRelatedPageEnter=_menuNotificationRelatedPageEnter}return NotificationRelatedPageEnterMenuServiceAdapter.prototype.wishlistEntered=function(){this._menuNotificationRelatedPageEnter.onWebsiteWishlistEntered()},NotificationRelatedPageEnterMenuServiceAdapter.prototype.forumTopicEntered=function(forumSlug,topicSlug){this._menuNotificationRelatedPageEnter.onWebsiteForumTopicEntered(forumSlug,topicSlug)},NotificationRelatedPageEnterMenuServiceAdapter.prototype.gameCardEntered=function(productId){if("string"!=typeof productId)throw new Error("Expected productId to be a string. Please cast it.");this._menuNotificationRelatedPageEnter.onWebsiteGameCardEntered(productId)},NotificationRelatedPageEnterMenuServiceAdapter}(),NotificationRelatedPageEnterAdapterProvider=function(){function NotificationRelatedPageEnterAdapterProvider(){this.useMenuService()}return NotificationRelatedPageEnterAdapterProvider.prototype.useEmbedMessage=function(){this.$get=["GalaxyClientCaller",function(GalaxyClientCaller){return new NotificationRelatedPageEnterEmbedMessageAdapter(GalaxyClientCaller)}]},NotificationRelatedPageEnterAdapterProvider.prototype.useMenuService=function(){this.$get=["menuNotificationRelatedPageEnter",function(menuNotificationRelatedPageEnter){return new NotificationRelatedPageEnterMenuServiceAdapter(menuNotificationRelatedPageEnter)}]},NotificationRelatedPageEnterAdapterProvider}(),angular.module("gog").provider("notificationRelatedPageEnterAdapter",NotificationRelatedPageEnterAdapterProvider)},function(module,exports){var ChatMonitorService;ChatMonitorService=function(){function ChatMonitorService(_$window){this._$window=_$window,this._isChatOpen=this._$window.gogData.hasOwnProperty("isChatOpen")&&this._$window.gogData.isChatOpen,this._currentConversationUserId="0"}return ChatMonitorService.$inject=["$window"],ChatMonitorService.prototype.setCurrentConversationUserId=function(userId){this._currentConversationUserId=userId},ChatMonitorService.prototype.shouldShowChatNotificationForUser=function(userId){return!this._isChatOpen||(!this._$window.document.hasFocus()||this._currentConversationUserId!==userId)},ChatMonitorService}(),gog.service("chatMonitor",ChatMonitorService)},function(module,exports,__webpack_require__){var factory;factory=function(__WEBPACK_EXTERNAL_MODULE__3__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports,__webpack_require__){__webpack_require__(1),__webpack_require__(8),__webpack_require__(2),__webpack_require__(10),__webpack_require__(5),__webpack_require__(7),__webpack_require__(9),__webpack_require__(6),module.exports=__webpack_require__(4)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(2),__webpack_require__(4),__webpack_require__(10)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(3).module("gogModuleUserStorage",[])},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__3__},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(3),wrappedLocalStorage_1=__webpack_require__(5),wrappedObjectStorage_1=__webpack_require__(7),wrappedSessionStorage_1=__webpack_require__(9),WrappedStorageFactory=function(){function WrappedStorageFactory($window){this.$window=$window}return WrappedStorageFactory.prototype.getSessionStorage=function(prefix){return this.isStorageAvailable()?new wrappedSessionStorage_1.WrappedSessionStorage(prefix,this.$window):new wrappedObjectStorage_1.WrappedObjectStorage(prefix)},WrappedStorageFactory.prototype.getLocalStorage=function(prefix){return this.isStorageAvailable()?new wrappedLocalStorage_1.WrappedLocalStorage(prefix,this.$window):new wrappedObjectStorage_1.WrappedObjectStorage(prefix)},WrappedStorageFactory.prototype.isStorageAvailable=function(){try{return this.$window.localStorage.setItem("gog","gog"),this.$window.localStorage.removeItem("gog"),!0}catch(error){return!1}},WrappedStorageFactory.$inject=["$window"],WrappedStorageFactory}();exports.WrappedStorageFactory=WrappedStorageFactory,angular.module("gogModuleUserStorage").service("wrappedStorageFactory",WrappedStorageFactory)},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var WrappedLocalStorage=function(_super){function WrappedLocalStorage(prefix,$window){var _this=_super.call(this,prefix)||this;return _this.storage=$window.localStorage,_this}return __extends(WrappedLocalStorage,_super),WrappedLocalStorage}(__webpack_require__(6).WrappedStorage);exports.WrappedLocalStorage=WrappedLocalStorage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var WrappedStorage=function(){function WrappedStorage(prefix){this.prefix=prefix}return WrappedStorage.prototype.getItem=function(key){var value=this.storage.getItem(""+this.prefix+key);return null!==value?JSON.parse(value):null},WrappedStorage.prototype.setItem=function(key,value){this.storage.setItem(""+this.prefix+key,JSON.stringify(value))},WrappedStorage.prototype.reset=function(defaults){for(var key in this.clear(),defaults)defaults.hasOwnProperty(key)&&this.setItem(key,defaults[key])},WrappedStorage.prototype.clear=function(extraPrefix){for(var index=this.storage.length-1;index>=0;index--){var key=this.storage.key(index);key&&(-1!==key.search(this.prefix)||extraPrefix&&-1!==key.search(extraPrefix))&&this.storage.removeItem(key)}},WrappedStorage.prototype.key=function(index){return this.storage.key(index)},WrappedStorage.prototype.removeItem=function(key){return this.storage.removeItem(""+this.prefix+key)},WrappedStorage.prototype.isSet=function(key){return null!==this.storage.getItem(""+this.prefix+key)},WrappedStorage}();exports.WrappedStorage=WrappedStorage},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var wrappedStorage_1=__webpack_require__(6),storageMock_1=__webpack_require__(8),WrappedObjectStorage=function(_super){function WrappedObjectStorage(prefix){var _this=_super.call(this,prefix)||this;return _this.storage=new storageMock_1.StorageMock,_this}return __extends(WrappedObjectStorage,_super),WrappedObjectStorage}(wrappedStorage_1.WrappedStorage);exports.WrappedObjectStorage=WrappedObjectStorage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StorageMock=function(){function StorageMock(){this.length=0,this.data={}}return StorageMock.prototype.setItem=function(key,value){this.data[key]=""+value,this.length++},StorageMock.prototype.getItem=function(key){return key in this.data?this.data[key]:null},StorageMock.prototype.removeItem=function(key){key in this.data&&(this.length--,delete this.data[key])},StorageMock.prototype.clear=function(){this.data={}},StorageMock.prototype.key=function(index){return Object.keys(this.data)[index]},StorageMock.prototype.isSet=function(key){return key in this.data},StorageMock}();exports.StorageMock=StorageMock},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var WrappedSessionStorage=function(_super){function WrappedSessionStorage(prefix,$window){var _this=_super.call(this,prefix)||this;return _this.storage=$window.sessionStorage,_this}return __extends(WrappedSessionStorage,_super),WrappedSessionStorage}(__webpack_require__(6).WrappedStorage);exports.WrappedSessionStorage=WrappedSessionStorage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(3),UserStorage=function(){function UserStorage(wrappedStorageFactory,$window){this.wrappedStorageFactory=wrappedStorageFactory,this.$window=$window,this.loggedUserId=null,this.storageBeforeUserIdIsSet={},this.initUserStorage()}return UserStorage.prototype.defaults=function(defaultValues){for(var key in defaultValues)this.isSet(key)||this.set(key,defaultValues[key])},UserStorage.prototype.set=function(key,value,ttl){var ttlValue=null;this.storageBeforeUserIdIsSet[key]=value,this.wrappedStorage.setItem(key,value),void 0!==ttl&&(ttlValue=this.calculateTtl(ttl),this.storageBeforeUserIdIsSet[this.getTtlKey(key)]=ttlValue,this.wrappedStorage.setItem(this.getTtlKey(key),ttlValue))},UserStorage.prototype.get=function(key){var value=this.wrappedStorage.getItem(key);return this.isExpired(key)?(this.remove(key),null):value},UserStorage.prototype.remove=function(key){this.wrappedStorage.removeItem(key),this.wrappedStorage.removeItem(this.getTtlKey(key))},UserStorage.prototype.isSet=function(key){return this.wrappedStorage.isSet(key)},UserStorage.prototype.reset=function(defaults){this.wrappedStorage.reset(defaults)},UserStorage.prototype.clear=function(){this.wrappedStorage.clear(this.getAnonymousPrefix())},UserStorage.prototype.setUserId=function(userId){this.loggedUserId=userId,this.initUserStorage()},UserStorage.prototype.initUserStorage=function(){this.wrappedStorage=this.wrappedStorageFactory.getLocalStorage(this.getPrefix()),null!==this.loggedUserId&&this.refresh()},UserStorage.prototype.refresh=function(){for(var key in this.storageBeforeUserIdIsSet)this.storageBeforeUserIdIsSet.hasOwnProperty(key)&&this.set(key,this.storageBeforeUserIdIsSet[key])},UserStorage.prototype.getPrefix=function(){return null!==this.loggedUserId?UserStorage.STORAGE_KEY_PREFIX+"_"+this.loggedUserId+"_":this.getAnonymousPrefix()},UserStorage.prototype.getAnonymousPrefix=function(){return UserStorage.STORAGE_KEY_PREFIX+"_"+UserStorage.ANONYMOUS_USER_PREFIX+"_"},UserStorage.prototype.getTtlKey=function(key){return key+"_ttl"},UserStorage.prototype.calculateTtl=function(ttl){return Date.now()+ttl},UserStorage.prototype.isExpired=function(key){return null!==this.wrappedStorage.getItem(this.getTtlKey(key))&&this.wrappedStorage.getItem(this.getTtlKey(key))<Date.now()},UserStorage.$inject=["wrappedStorageFactory","$window"],UserStorage.STORAGE_KEY_PREFIX="gog",UserStorage.ANONYMOUS_USER_PREFIX="anonymous",UserStorage}();exports.UserStorage=UserStorage,angular.module("gogModuleUserStorage").service("userStorage",UserStorage)}])},module.exports=factory(__webpack_require__(2))},function(module,exports){gog.filter("dictionaryOrderBy",function(){var _fields,_getFieldsList,_sortByField;return _fields=null,_getFieldsList=function(argumentsObject){var field,fields,i,index,len;for(fields=[],index=i=0,len=argumentsObject.length;i<len;index=++i)field=argumentsObject[index],0!==index&&fields.push(field);return fields},_sortByField=function(fieldPriority,objectA,objectB){var valueA,valueB;return valueB=objectB[_fields[fieldPriority]],valueA=objectA[_fields[fieldPriority]],!valueB||valueA>valueB?1:!valueA||valueA<valueB?-1:valueA===valueB&&_fields[fieldPriority+1]?_sortByField(fieldPriority+1,objectA,objectB):valueA===valueB?-1:void 0},function(items){var filtered;return _fields=_getFieldsList(arguments),filtered=[],angular.forEach(items,function(item){return filtered.push(item)}),filtered.sort(function(a,b){return _sortByField(0,a,b)}),filtered}})},function(module,exports,__webpack_require__){var factory;factory=function(__WEBPACK_EXTERNAL_MODULE__2__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var angular_1=__importDefault(__webpack_require__(2)),imageFilter_1=__webpack_require__(3);exports.ImageFilterFactory=imageFilter_1.ImageFilterFactory,exports.gogModuleImageFilter=angular_1.default.module("gogModuleImageFilter",[]).filter("image",imageFilter_1.ImageFilterFactory)},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__2__},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageFilterFactory=function(){return function(text,formatter,ext){if("string"!=typeof text)return"";var match,namespace=null!==(match=text.match(/\?namespace=(.*)/i))?match[1]:"",nakedImageUrl=function(imageUrl){return imageUrl.split("_")[0]}(function(imageUrl){return imageUrl.replace(/\..{3,4}$/i,"")}(function(imageUrl){return imageUrl.replace(/\?namespace=.*/i,"")}(function(imageUrl,formatter,ext){return imageUrl.replace("{formatter}",formatter).replace("{ext}",ext)}(text,"_"+formatter,ext)))),namespaceSuffix="";return""!==namespace&&(namespaceSuffix="?namespace="+namespace),""===formatter?nakedImageUrl+"."+ext+namespaceSuffix:nakedImageUrl+"_"+formatter+"."+ext+namespaceSuffix}}}])},module.exports=factory(__webpack_require__(2))},function(module,exports){gog.filter("toMilis",function(){return function(timestamp){return 1e3*timestamp}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=window.styleMedia||window.media;if(!styleMedia){var info,style=document.createElement("style"),script=document.getElementsByTagName("script")[0];style.type="text/css",style.id="matchmediajs-test",script.parentNode.insertBefore(style,script),info="getComputedStyle"in window&&window.getComputedStyle(style,null)||style.currentStyle,styleMedia={matchMedium:function(media){var text="@media "+media+"{ #matchmediajs-test { width: 1px; } }";return style.styleSheet?style.styleSheet.cssText=text:style.textContent=text,"1px"===info.width}}}return function(media){return{matches:styleMedia.matchMedium(media||"all"),media:media||"all"}}}()),function(w,doc,image){"use strict";function expose(picturefill){"object"==typeof module&&"object"==typeof module.exports?module.exports=picturefill:void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return picturefill}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),"object"==typeof w&&(w.picturefill=picturefill)}if(w.HTMLPictureElement)expose(function(){});else{doc.createElement("picture");var anchor,urlCache,setSize,pf=w.picturefill||{},regWDesc=/\s+\+?\d+(e\d+)?w/;pf.ns="picturefill",pf.srcsetSupported="srcset"in image,pf.sizesSupported="sizes"in image,pf.curSrcSupported="currentSrc"in image,pf.trim=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")},pf.makeUrl=(anchor=doc.createElement("a"),function(src){return anchor.href=src,anchor.href}),pf.restrictsMixedContent=function(){return"https:"===w.location.protocol},pf.matchesMedia=function(media){return w.matchMedia&&w.matchMedia(media).matches},pf.getDpr=function(){return w.devicePixelRatio||1},pf.getWidthFromLength=function(length){var cssValue;if(!length||length.indexOf("%")>-1!=!1||!(parseFloat(length)>0||length.indexOf("calc(")>-1))return!1;if(length=length.replace("vw","%"),pf.lengthEl||(pf.lengthEl=doc.createElement("div"),pf.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden",pf.lengthEl.className="helper-from-picturefill-js",doc.body.appendChild(pf.lengthEl)),pf._lastLength===length)return pf._lastCssValue;pf._lastLength=length;try{pf.lengthEl.style.width=length}catch(e){}return(cssValue=pf.lengthEl.offsetWidth)<=0&&(cssValue=!1),pf._lastCssValue=cssValue,cssValue},pf.detectTypeSupport=function(type,typeUri){var image=new w.Image;return image.onerror=function(){pf.types[type]=!1,picturefill()},image.onload=function(){pf.types[type]=1===image.width,picturefill()},image.src=typeUri,"pending"},pf.types=pf.types||{},pf.initTypeDetects=function(){pf.types["image/jpeg"]=!0,pf.types["image/gif"]=!0,pf.types["image/png"]=!0,pf.types["image/svg+xml"]=doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},pf.verifyTypeSupport=function(source){var type=source.getAttribute("type");if(null===type||""===type)return!0;var pfType=pf.types[type];return"string"==typeof pfType&&"pending"!==pfType?(pf.types[type]=pf.detectTypeSupport(type,pfType),"pending"):"function"==typeof pfType?(pfType(),"pending"):pfType},pf.parseSize=function(sourceSizeStr){var match=/(\([^)]+\))?\s*(.+)/g.exec(sourceSizeStr);return{media:match&&match[1],length:match&&match[2]}},pf.findWidthFromSourceSize=function(sourceSizeListStr){for(var winningLength,sourceSizeList=pf.trim(sourceSizeListStr).split(/\s*,\s*/),i=0,len=sourceSizeList.length;i<len;i++){var sourceSize=sourceSizeList[i],parsedSize=pf.parseSize(sourceSize),length=parsedSize.length,media=parsedSize.media;if(length&&((!media||pf.matchesMedia(media))&&(winningLength=pf.getWidthFromLength(length))))break}return winningLength||Math.max(w.innerWidth||0,doc.documentElement.clientWidth)},pf.parseSrcset=function(srcset){for(var candidates=[];""!==srcset;){var url,pos=(srcset=srcset.replace(/^\s+/g,"")).search(/\s/g),descriptor=null;if(-1!==pos){if(","!==(url=srcset.slice(0,pos)).slice(-1)&&""!==url||(url=url.replace(/,+$/,""),descriptor=""),srcset=srcset.slice(pos+1),null===descriptor){var descpos=srcset.indexOf(",");-1!==descpos?(descriptor=srcset.slice(0,descpos),srcset=srcset.slice(descpos+1)):(descriptor=srcset,srcset="")}}else url=srcset,srcset="";(url||descriptor)&&candidates.push({url:url,descriptor:descriptor})}return candidates},pf.parseDescriptor=function(descriptor,sizesattr){var resCandidate,sizes=sizesattr||"100vw",sizeDescriptor=descriptor&&descriptor.replace(/(^\s+|\s+$)/g,""),widthInCssPixels=pf.findWidthFromSourceSize(sizes);if(sizeDescriptor)for(var splitDescriptor=sizeDescriptor.split(" "),i=splitDescriptor.length-1;i>=0;i--){var curr=splitDescriptor[i],lastchar=curr&&curr.slice(curr.length-1);if("h"!==lastchar&&"w"!==lastchar||pf.sizesSupported){if("x"===lastchar){var res=curr&&parseFloat(curr,10);resCandidate=res&&!isNaN(res)?res:1}}else resCandidate=parseFloat(parseInt(curr,10)/widthInCssPixels)}return resCandidate||1},pf.getCandidatesFromSourceSet=function(srcset,sizes){for(var candidates=pf.parseSrcset(srcset),formattedCandidates=[],i=0,len=candidates.length;i<len;i++){var candidate=candidates[i];formattedCandidates.push({url:candidate.url,resolution:pf.parseDescriptor(candidate.descriptor,sizes)})}return formattedCandidates},pf.dodgeSrcset=function(img){img.srcset&&(img[pf.ns].srcset=img.srcset,img.srcset="",img.setAttribute("data-pfsrcset",img[pf.ns].srcset))},pf.processSourceSet=function(el){var srcset=el.getAttribute("srcset"),sizes=el.getAttribute("sizes"),candidates=[];return"IMG"===el.nodeName.toUpperCase()&&el[pf.ns]&&el[pf.ns].srcset&&(srcset=el[pf.ns].srcset),srcset&&(candidates=pf.getCandidatesFromSourceSet(srcset,sizes)),candidates},pf.backfaceVisibilityFix=function(picImg){if(!Boolean(1)){var style=picImg.style||{},WebkitBackfaceVisibility="webkitBackfaceVisibility"in style,currentZoom=style.zoom;WebkitBackfaceVisibility&&(style.zoom=".999",WebkitBackfaceVisibility=picImg.offsetWidth,style.zoom=currentZoom)}},pf.setIntrinsicSize=(urlCache={},setSize=function(picImg,width,res){width&&picImg.setAttribute("width",parseInt(width/res,10))},function(picImg,bestCandidate){var img;picImg[pf.ns]&&!w.pfStopIntrinsicSize&&(void 0===picImg[pf.ns].dims&&(picImg[pf.ns].dims=picImg.getAttribute("width")||picImg.getAttribute("height")),picImg[pf.ns].dims||(bestCandidate.url in urlCache?setSize(picImg,urlCache[bestCandidate.url],bestCandidate.resolution):((img=doc.createElement("img")).onload=function(){if(urlCache[bestCandidate.url]=img.width,!urlCache[bestCandidate.url])try{doc.body.appendChild(img),urlCache[bestCandidate.url]=img.width||img.offsetWidth,doc.body.removeChild(img)}catch(e){}picImg.src===bestCandidate.url&&setSize(picImg,urlCache[bestCandidate.url],bestCandidate.resolution),picImg=null,img.onload=null,img=null},img.src=bestCandidate.url)))}),pf.applyBestCandidate=function(candidates,picImg){var candidate,length,bestCandidate;candidates.sort(pf.ascendingSort),bestCandidate=candidates[(length=candidates.length)-1];for(var i=0;i<length;i++)if((candidate=candidates[i]).resolution>=pf.getDpr()){bestCandidate=candidate;break}bestCandidate&&(bestCandidate.url=pf.makeUrl(bestCandidate.url),picImg.src!==bestCandidate.url&&(pf.restrictsMixedContent()&&"http:"===bestCandidate.url.substr(0,"http:".length).toLowerCase()?void 0!==window.console&&console.warn("Blocked mixed content image "+bestCandidate.url):(picImg.src=bestCandidate.url,pf.curSrcSupported||(picImg.currentSrc=picImg.src),pf.backfaceVisibilityFix(picImg))),pf.setIntrinsicSize(picImg,bestCandidate))},pf.ascendingSort=function(a,b){return a.resolution-b.resolution},pf.getAllElements=function(){for(var elems=[],imgs=doc.getElementsByTagName("img"),h=0,len=imgs.length;h<len;h++){var currImg=imgs[h];("PICTURE"===currImg.parentNode.nodeName.toUpperCase()||null!==currImg.getAttribute("srcset")||currImg[pf.ns]&&null!==currImg[pf.ns].srcset)&&elems.push(currImg)}return elems},pf.getMatch=function(img,picture){for(var match,sources=picture.childNodes,j=0,slen=sources.length;j<slen;j++){var source=sources[j];if(1===source.nodeType){if(source===img)return match;if("SOURCE"===source.nodeName.toUpperCase()){null!==source.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var media=source.getAttribute("media");if(source.getAttribute("srcset")&&(!media||pf.matchesMedia(media))){var typeSupported=pf.verifyTypeSupport(source);if(!0===typeSupported){match=source;break}if("pending"===typeSupported)return!1}}}}return match},window.addEventListener("resize",function(){pf._lastLength=null,pf._lastCssValue=null}),pf.initTypeDetects(),picturefill._=pf,expose(picturefill)}function picturefill(opt){for(var elements,element,parent,firstMatch,candidates,options=opt||{},i=0,plen=(elements=options.elements||pf.getAllElements()).length;i<plen;i++)if(parent=(element=elements[i]).parentNode,firstMatch=void 0,candidates=void 0,"IMG"===element.nodeName.toUpperCase()&&(element[pf.ns]||(element[pf.ns]={}),options.reevaluate||!element[pf.ns].evaluated)){if(parent&&"PICTURE"===parent.nodeName.toUpperCase()){if(!1===(firstMatch=pf.getMatch(element,parent)))continue}else firstMatch=void 0;(parent&&"PICTURE"===parent.nodeName.toUpperCase()||!pf.sizesSupported&&element.srcset&&regWDesc.test(element.srcset))&&pf.dodgeSrcset(element),firstMatch?(candidates=pf.processSourceSet(firstMatch),pf.applyBestCandidate(candidates,element)):(candidates=pf.processSourceSet(element),pf.srcsetSupported&&!element[pf.ns].srcset||pf.applyBestCandidate(candidates,element)),element[pf.ns].evaluated=!0}}}(window,window.document,new window.Image)},function(module,exports){gog.factory("modal",function(eventDispatcher,$timeout){return function(){var isOpen,onClick,onKeypress;function modal(){}return modal.config={eventModalClose:"modalClose"},isOpen=!1,onKeypress=function(e){if(27===e.which)return modal.close()},onClick=function(e){return e.preventDefault(),modal.close()},modal.close=function(){return isOpen=!1,angular.element(document.body).off("keyup",onKeypress).off("click",onClick),eventDispatcher.dispatch(modal.config.eventModalClose)},modal.open=function(){isOpen&&modal.close,isOpen=!0,$timeout(function(){return angular.element(document.body).on("keyup",onKeypress).on("click",onClick)})},modal.isOpen=function(){return isOpen},modal}()})},function(module,exports){var MenuProduct,Product,hasProp={}.hasOwnProperty;Product=function(){function Product(productData,_attributesWhitelist){this._attributesWhitelist=null!=_attributesWhitelist?_attributesWhitelist:null,null==this._attributesWhitelist?angular.extend(this,productData):this._stripe(productData)}return Product.WATCHABLE_ATTRIBUTES=["isOwned","isWishlisted","inCart","price"],Product.ListenersManager=void 0,Product.prototype.onAttributeChange=function(attributeName,listener,isForcedCall){var listenerCanceller;if(null==isForcedCall&&(isForcedCall=!1),-1===Product.WATCHABLE_ATTRIBUTES.indexOf(attributeName))throw"Product attribute to watch is not on the whitelist. \nGot '"+attributeName+"', whitelist is: "+Product.WATCHABLE_ATTRIBUTES;return this._assureListenersInitialized(attributeName),listenerCanceller=this._addListener(attributeName,listener),isForcedCall&&null!=this._listeners[attributeName]&&this._listeners[attributeName].callListeners(this._getPrivateAttributeName(attributeName)),listenerCanceller},Product.prototype._stripe=function(productData){var oldAttributeName,value;for(oldAttributeName in productData)value=productData[oldAttributeName],oldAttributeName in this._attributesWhitelist&&(this[this._getNewAttributeName(oldAttributeName)]=value)},Product.prototype._getNewAttributeName=function(oldAttributeName){return this._attributesWhitelist[oldAttributeName]},Product.prototype._getPrivateAttributeName=function(attributeName){return"_"+attributeName},Product.prototype._assureListenersInitialized=function(attributeName){null==this._listeners&&(this._listeners={}),null==this._listeners[attributeName]&&this._initializeListeners(attributeName)},Product.prototype._initializeListeners=function(attributeName){var privateAttributeName;this._listeners[attributeName]=Product.ListenersManager.getManager(),this[privateAttributeName=this._getPrivateAttributeName(attributeName)]=this[attributeName],Object.defineProperty(this,attributeName,{get:function(){return this[privateAttributeName]},set:function(value){value!==this[privateAttributeName]&&(this[privateAttributeName]=value,this._listeners[attributeName].callListeners(this[privateAttributeName]))}})},Product.prototype._addListener=function(attributeName,listener){return this._listeners[attributeName].addListener(listener)},Product}(),MenuProduct=function(superClass){function MenuProduct(productData){MenuProduct.__super__.constructor.call(this,productData,MenuProduct.ATTRIBUTES_WHITELIST)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(MenuProduct,Product),MenuProduct.ATTRIBUTES_WHITELIST={id:"id",image:"image",worksOn:"worksOn",buyable:"buyable",isComingSoon:"isComingSoon",isGame:"isGame",isInDevelopment:"isInDevelopment",isMovie:"isMovie",isPriceVisible:"isPriceVisible",isPricingEnabled:"isPricingEnabled",isWishlistable:"isWishlistable",price:"price",title:"title",url:"url",customAttributes:"customAttributes"},MenuProduct}(),gog.factory("productFactory",["listenersManager",function(listenersManager){return Product.ListenersManager=listenersManager,{getForData:function(productData){return new Product(productData)},createMenuProduct:function(productData){return new MenuProduct(productData)},createRegularProduct:function(productData){return new Product(productData)},isProduct:function(object){return object instanceof Product}}}]),window.Product=Product},function(module,exports){var ProductsRepositoryService;ProductsRepositoryService=function(){function ProductsRepositoryService($window,_productFactory,storageRepository,dataRepository,listenersManager){this._productFactory=_productFactory,this._deregisterStorageProductsListener=storageRepository.onProductsGet(this.addProducts.bind(this)),this.productsData={},this._productGetters=[],this._newProductsListeners=listenersManager.getManager(),dataRepository.registerProductsListener(this.addProducts.bind(this)),angular.isArray($window.gogData.products)&&this.addProducts($window.gogData.products)}return ProductsRepositoryService.$inject=["$window","productFactory","storageRepository","dataRepository","listenersManager"],ProductsRepositoryService.prototype.getById=function(productId){var i,len,product,ref;if(product=this.productsData[productId])return product;for(i=0,len=(ref=this._productGetters).length;i<len&&!(product=(0,ref[i])(productId));i++);return product},ProductsRepositoryService.prototype.updatePrice=function(productId,priceData){this.productsData[productId]&&(this.productsData[productId].price=angular.extend({},this.productsData[productId].price,priceData))},ProductsRepositoryService.prototype.updatePrices=function(newProductsPrices){var productId,productPrice;for(productId in newProductsPrices)productPrice=newProductsPrices[productId],this.updatePrice(productId,productPrice)},ProductsRepositoryService.prototype.getProducts=function(){return this.productsData},ProductsRepositoryService.prototype.addProducts=function(newProductsCollection){var hasNewProducts,i,len,newProduct,newProductData,newProductId;if(newProductsCollection){for(hasNewProducts=!1,i=0,len=newProductsCollection.length;i<len;i++)newProductId=(newProductData=newProductsCollection[i]).id,this.productsData[newProductId]&&!this._getHasRecommendationSourceChanged(newProductData,this.productsData[newProductId])||(newProduct=this._productFactory.getForData(newProductData),this.productsData[newProductId]=newProduct,hasNewProducts=!0);return hasNewProducts&&this._newProductsListeners.callListeners(),null}},ProductsRepositoryService.prototype.addProduct=function(product){return this.addProducts([product])},ProductsRepositoryService.prototype.getCount=function(){return Object.keys(this.productsData).length},ProductsRepositoryService.prototype.listenForNewProducts=function(listener){return this._newProductsListeners.addListener(listener)},ProductsRepositoryService.prototype.registerProductGetter=function(productGetter){return this._productGetters.push(productGetter)},ProductsRepositoryService.prototype._getHasRecommendationSourceChanged=function(newProductData,oldProductData){return(null!=oldProductData.recommendationEngineSource||null!=newProductData.recommendationEngineSource)&&(null!=oldProductData.recommendationEngineSource!=(null!=newProductData.recommendationEngineSource)||oldProductData.recommendationEngineSource!==newProductData.recommendationEngineSource)},ProductsRepositoryService}(),gog.service("productsRepository",ProductsRepositoryService)},function(module,exports){var ProductRepositoriesManager,RepositoryDoesntExistsException,RepositoryException,RepositoryExistsException,extend=function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;RepositoryException=function(){function RepositoryException(){}return RepositoryException.prototype.toString=function(){return this.message},RepositoryException}(),RepositoryExistsException=function(superClass){function RepositoryExistsException(repositoryName){RepositoryExistsException.__super__.constructor.call(this),this.message="Repository "+repositoryName+" already exists!"}return extend(RepositoryExistsException,RepositoryException),RepositoryExistsException}(),RepositoryDoesntExistsException=function(superClass){function RepositoryDoesntExistsException(repositoryName){RepositoryDoesntExistsException.__super__.constructor.call(this),this.message="Repository "+repositoryName+" doesn't exists!"}return extend(RepositoryDoesntExistsException,RepositoryException),RepositoryDoesntExistsException}(),ProductRepositoriesManager=function(){function ProductRepositoriesManager(listenersManager,userResponse,_user){this._user=_user,this._repositories={},this._productsListenersManager=listenersManager.getManager(),userResponse.success(this._getPersonalizedPrices.bind(this))}return ProductRepositoriesManager.$inject=["listenersManager","userResponse","user"],ProductRepositoriesManager.prototype.registerProductsListener=function(listener){return this._productsListenersManager.addListener(listener)},ProductRepositoriesManager.prototype.getRepository=function(repositoryName){if(this.repositoryExists(repositoryName))return this._repositories[repositoryName];throw new RepositoryDoesntExistsException(repositoryName)},ProductRepositoriesManager.prototype.repositoryExists=function(repositoryName){return repositoryName in this._repositories},ProductRepositoriesManager.prototype.callProductsListeners=function(){var params;return params=1<=arguments.length?slice.call(arguments,0):[],this._productsListenersManager.callListeners(params)},ProductRepositoriesManager.prototype.getAllRepositories=function(){return this._repositories},ProductRepositoriesManager.prototype.registerProductsRepository=function(repositoryName,repository){if(this.repositoryExists(repositoryName))throw new RepositoryExistsException(repositoryName);return this._repositories[repositoryName]=repository},ProductRepositoriesManager.prototype.updatePricesInAllRepositories=function(newProductsPrices){var ref,repositoryName;for(repositoryName in ref=this._repositories)ref[repositoryName].updatePrices(newProductsPrices);return this._productsListenersManager.callListeners()},ProductRepositoriesManager.prototype._getPersonalizedPrices=function(){var personalizedPrices;if(null!=(personalizedPrices=this._user.getPersonalizedProductPrices())&&personalizedPrices.length)return this.updatePricesInAllRepositories(personalizedPrices)},ProductRepositoriesManager}(),gog.service("productRepositoriesManager",ProductRepositoriesManager)},function(module,exports){var EnabledFeaturesService;EnabledFeaturesService=function(){function EnabledFeaturesService(_$window){this._$window=_$window}return EnabledFeaturesService.$inject=["$window"],EnabledFeaturesService.prototype.isEnabled=function(featureName){return!!(this._$window.hasOwnProperty("gogData")&&this._$window.gogData.hasOwnProperty("features")&&this._$window.gogData.features.hasOwnProperty(featureName))&&this._$window.gogData.features[featureName]},EnabledFeaturesService}(),gog.service("enabledFeatures",EnabledFeaturesService)},function(module,exports){var hasProp={}.hasOwnProperty;gog.factory("productsRepositoryFactory",function(listenersManager,productRepositoriesManager,productFactory){var MenuProductsRepository,RegularProductsRepository;return RegularProductsRepository=function(){function RegularProductsRepository(products){this._products={},this.addProducts(products)}return RegularProductsRepository.prototype.getById=function(id){return this._products[id]},RegularProductsRepository.prototype.getProducts=function(productsIds){var id,key,productsToReturn;if(null==productsIds)return this._products;for(key in productsToReturn={},productsIds)productsToReturn[id=productsIds[key]]=this.getById(id);return productsToReturn},RegularProductsRepository.prototype.addProduct=function(product){this.addProducts([product])},RegularProductsRepository.prototype.createProduct=function(productData){return productFactory.createRegularProduct(productData)},RegularProductsRepository.prototype.addProducts=function(products){var product,productIndex;for(productIndex in products)(product=products[productIndex]).id in this._products||(this._products[product.id]=this.createProduct(product));productRepositoriesManager.callProductsListeners(products)},RegularProductsRepository.prototype.updatePrices=function(newProductsPrices){var productId;for(productId in newProductsPrices)newProductsPrices[productId],this._products[productId]&&(this._products[productId].price=angular.extend({},this._products[productId].price,newProductsPrices[productId]))},RegularProductsRepository}(),MenuProductsRepository=function(superClass){function MenuProductsRepository(products){MenuProductsRepository.__super__.constructor.call(this,products)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(MenuProductsRepository,RegularProductsRepository),MenuProductsRepository.prototype.createProduct=function(productData){return productFactory.createMenuProduct(productData)},MenuProductsRepository}(),{createRegularProductsRepository:function(name,products){var repository;return null==products&&(products={}),repository=new RegularProductsRepository(products),productRepositoriesManager.registerProductsRepository(name,repository),productRepositoriesManager.getRepository(name)},createMenuProductsRepository:function(name,products){var repository;return null==products&&(products={}),repository=new MenuProductsRepository(products),productRepositoriesManager.registerProductsRepository(name,repository),productRepositoriesManager.getRepository(name)}}})},function(module,exports){var GOGProductController;GOGProductController=function(){function GOGProductController(_scope,_attrs,$element,_productsRepository,_cart,_wishlist,productStateFactory,_badgeFactory,productOsSupportFactory,_$window,_userGamesProvider,_enabledFeatures,_productRepositoriesManager,_eventDispatcher,_config,_gtmEventSender){this._scope=_scope,this._attrs=_attrs,this._productsRepository=_productsRepository,this._cart=_cart,this._wishlist=_wishlist,this._badgeFactory=_badgeFactory,this._$window=_$window,this._userGamesProvider=_userGamesProvider,this._enabledFeatures=_enabledFeatures,this._productRepositoriesManager=_productRepositoriesManager,this._eventDispatcher=_eventDispatcher,this._config=_config,this._gtmEventSender=_gtmEventSender,this._enabledFeatures.isEnabled("newCart")&&this._attrs.hasOwnProperty("gogProductRepository")&&(this._productsRepository=this._productRepositoriesManager.getRepository(this._attrs.gogProductRepository)),this._cancelIdObserver=this._attrs.$observe("gogProduct",this._initialize.bind(this)),this._productState=productStateFactory.getForElement($element[0],this._attrs,this._$window),this._badge=this._badgeFactory.getForElement($element[0]),this._productOsSupport=productOsSupportFactory.getForElement($element[0]),this._scope.$on("$destroy",this._destructor.bind(this)),this.isToBeRemovedFromCart=!1}return GOGProductController.$inject=["$scope","$attrs","$element","productsRepository","cart","wishlist","productStateFactory","badgeFactory","productOsSupportFactory","$window","userGamesProvider","enabledFeatures","productRepositoriesManager","eventDispatcher","config","gtmEventSender"],GOGProductController.prototype.addToCart=function(){this._enabledFeatures.isEnabled("newCart")?this._product.buyable&&this._cart.add(this._product.id):this._cart.add(this._product)},GOGProductController.prototype.removeFromCart=function(){this._enabledFeatures.isEnabled("newCart")?(this._cart.remove(this._product.id),this.isToBeRemovedFromCart=!0):this._cart.remove(this._product)},GOGProductController.prototype.toggleWishlistedState=function(){this._wishlist.has(this._product.id)?this.removeFromWishlist():this.addToWishlist()},GOGProductController.prototype.addToWishlist=function(){this._wishlist.add(this._product.id),this._gtmEventSender.sendEvent({event:"wishlist",action:"Add to Wishlist"})},GOGProductController.prototype.removeFromWishlist=function(){this._wishlist.remove(this._product.id)},GOGProductController.prototype.productClicked=function(position){this._$window.gogEventBus.publish("product","click",{product:this._product,position:position})},GOGProductController.prototype._updateState=function(){this._product.inCart=this._cart.has(this._product.id),this._product.isWishlisted=this._wishlist.has(this._product.id),this._product.isOwned=this._userGamesProvider.isOwned(this._product.id)},GOGProductController.prototype._initialize=function(productId){var updateStateBound;if(this._product=this._productsRepository.getById(productId),!this._product)throw new Error("Can't find product with id "+productId+" in Products Repository.");this._productState.setProduct(this._product),this._productOsSupport.setProduct(this._product),this._enabledFeatures.isEnabled("newCart")&&(updateStateBound=this._updateState.bind(this),this._cart.registerBeforeCartUpdateListener(updateStateBound),this._cart.registerAfterCartUpdateListener(updateStateBound),this._wishlist.registerWishlistListener(updateStateBound),this._eventDispatcher.on(this._config.event.user_games.reload,updateStateBound),this._updateState()),this._badge.setProductId(this._product.id),this._scope.product=this._product},GOGProductController.prototype._destructor=function(){this._cancelIdObserver(),this._cancelIdObserver=null},GOGProductController}(),gog.directive("gogProduct",function(){return{restrict:"A",controller:GOGProductController,controllerAs:"productCtrl",scope:!0}})},function(module,exports,__webpack_require__){"use strict";gog.factory("productsPersonalizer",["dataRepository","productsRepository","user","cart",function(dataRepository,productsRepository,user,cart){var accessRepositoryMethods,getPersonalizedPrices,personalizePrices,pricesData,updateInCartState,updateInCartStateForProducts,updatePriceMethods;return pricesData={},accessRepositoryMethods=[],updatePriceMethods=[],getPersonalizedPrices=function(personalizedPrices){var id,price,ref;for(id in ref=personalizedPrices.products)price=ref[id],pricesData[id]=price;return personalizePrices()},personalizePrices=function(){var i,id,len,priceData;for(id in pricesData)if(priceData=pricesData[id],productsRepository.updatePrice(id,priceData),updatePriceMethods.length)for(i=0,len=updatePriceMethods.length;i<len;i++)(0,updatePriceMethods[i])(id,priceData)},updateInCartState=function(){var accessProducts,i,len,products;if(products=productsRepository.getProducts(),updateInCartStateForProducts(products),0!==accessRepositoryMethods.length)for(i=0,len=accessRepositoryMethods.length;i<len;i++)accessProducts=accessRepositoryMethods[i],updateInCartStateForProducts(accessProducts())},updateInCartStateForProducts=function(products){var id;for(id in products)products[id].inCart=cart.has(id)},dataRepository.registerProductsListener(updateInCartState),dataRepository.registerUserListener(updateInCartState),dataRepository.registerProductsListener(personalizePrices),dataRepository.registerCartListener(updateInCartState),dataRepository.registerPricesListener(getPersonalizedPrices),{check:updateInCartState,personalizePrice:function(product,prices){if(null!=prices[product.id])return product.price=prices[product.id]},addRepositoryAccessProductsMethod:function(accessRepositoryMethod){return accessRepositoryMethods.push(accessRepositoryMethod)},addRepositoryUpdatePriceMethod:function(updatePriceMethod){return updatePriceMethods.push(updatePriceMethod)}}}])},function(module,exports){var DataRepositoryProvider,DataRepositoryService,OrderDataRepositoryService,hasProp={}.hasOwnProperty;DataRepositoryService=function(){function DataRepositoryService($http,listenersManager,config,$q,_userDataCache,_$window,_gtmEventSender){this._userDataCache=_userDataCache,this._$window=_$window,this._gtmEventSender=_gtmEventSender,this._q=$q,this._config=config,this._$http=$http,this._productsListeners=listenersManager.getManager(),this._cartListeners=listenersManager.getManager(),this._pricesListeners=listenersManager.getManager(),this._userListeners=listenersManager.getManager(),this._wishlistListeners=listenersManager.getManager(),this._preAddProductListeners=listenersManager.getManager(),this._preRemoveProductListeners=listenersManager.getManager()}return DataRepositoryService.$inject=["$http","listenersManager","config","$q","userDataCache","$window","gtmEventSender"],DataRepositoryService.prototype.addProduct=function(productId){return this._userDataCache.invalidate(),this._preAddProductListeners.callListeners(),this._$http.get(this._config.urls.cart.add(productId)).then(this._onUpdateProductResponse.bind(this),angular.noop)},DataRepositoryService.prototype.addMany=function(ids){return this._userDataCache.invalidate(),this._preAddProductListeners.callListeners(),this._$http.post(this._config.urls.cart.addMany,{product_ids:ids}).then(this._onUpdateProductResponse.bind(this),angular.noop)},DataRepositoryService.prototype.removeProduct=function(productId){return this._userDataCache.invalidate(),this._preRemoveProductListeners.callListeners(),this._$http.get(this._config.urls.cart.remove(productId)).then(this._onUpdateProductResponse.bind(this),angular.noop)},DataRepositoryService.prototype.addSeries=function(seriesId){return this._userDataCache.invalidate(),this._preAddProductListeners.callListeners(),this._$http.get(this._config.urls.cart.addSeries(seriesId)).then(this._onUpdateProductResponse.bind(this),angular.noop)},DataRepositoryService.prototype.addToWishlist=function(productId){var responsePromise;return this._userDataCache.invalidate(),(responsePromise=this._$http.get(this._config.urls.user.wishlist.add(productId))).then(this._onWishlistUpdate.bind(this),angular.noop),responsePromise},DataRepositoryService.prototype.removeFromWishlist=function(productId){var responsePromise;return this._userDataCache.invalidate(),(responsePromise=this._$http.get(this._config.urls.user.wishlist.remove(productId))).then(this._onWishlistUpdate.bind(this),angular.noop),responsePromise},DataRepositoryService.prototype.getWishlist=function(){return this._$http.get(this._config.urls.user.wishlist.get).then(this._onWishlistUpdate.bind(this),angular.noop)},DataRepositoryService.prototype.getCart=function(){return this._$http.get(this._config.urls.cart.get).then(this._onCartInitialReload.bind(this),angular.noop)},DataRepositoryService.prototype.getUserData=function(searchParams,requestParams){return null==requestParams&&(requestParams={}),this._userDataCache.isCached()?this._onUserResponse(this._userDataCache.get()):this._$http.post(this._config.urls.user.data+searchParams,requestParams).then(this._onGetUserDataSuccess.bind(this),angular.noop)},DataRepositoryService.prototype.getFilteredProducts=function(urlForData,params){return this._$http.get(urlForData,{params:params})},DataRepositoryService.prototype.getMoreProducts=function(urlForData){return this._$http.get(urlForData).then(this._onMoreProductsResponse.bind(this),angular.noop)},DataRepositoryService.prototype.registerProductsListener=function(listener){return this._productsListeners.addListener(listener)},DataRepositoryService.prototype.registerCartListener=function(listener){return this._cartListeners.addListener(listener)},DataRepositoryService.prototype.registerPricesListener=function(listener){return this._pricesListeners.addListener(listener)},DataRepositoryService.prototype.registerUserListener=function(listener){return this._userListeners.addListener(listener)},DataRepositoryService.prototype.registerWishlistListener=function(listener){return this._wishlistListeners.addListener(listener)},DataRepositoryService.prototype.registerPreAddProductListener=function(listener){return this._preAddProductListeners.addListener(listener)},DataRepositoryService.prototype.registerPreRemoveProductListener=function(listener){return this._preRemoveProductListeners.addListener(listener)},DataRepositoryService.prototype._onCartInitialReload=function(response){return this._onUpdateProductResponse(response),this._refreshCurrencyInCart(response.data)},DataRepositoryService.prototype._onUpdateProductResponse=function(response){var cartData;cartData={checksum:response.data.checksum,totalPrice:response.data.totalPrice,cart:response.data.cart},this._cartListeners.callListeners(cartData),this._productsListeners.callListeners(this._cartProductsToArray(response.data.cart)),response.data.personalizedPricing&&this._pricesListeners.callListeners(response.data.personalizedPricing)},DataRepositoryService.prototype._onGetUserDataSuccess=function(response){return this._onUserResponse(response.data),this._putResponseToCache(response.data)},DataRepositoryService.prototype._onUserResponse=function(responseData){var formattedSeriesPricing,i,len,personalizedPricing,price,seriesPricing;if(this._userListeners.callListeners(responseData),seriesPricing=responseData.personalizedSeriesPrices||{},angular.isArray(seriesPricing)&&!seriesPricing.length)for(formattedSeriesPricing={},i=0,len=seriesPricing.length;i<len;i++)formattedSeriesPricing[(price=seriesPricing[i]).id]=price;personalizedPricing={products:responseData.personalizedProductPrices||{},series:seriesPricing},this._pricesListeners.callListeners(personalizedPricing),this._$window.gogEventBus.publish("user","response",responseData)},DataRepositoryService.prototype._onWishlistUpdate=function(response){return this._wishlistListeners.callListeners(response.data)},DataRepositoryService.prototype._onMoreProductsResponse=function(response){return this._productsListeners.callListeners(response.data.products),response.data},DataRepositoryService.prototype._refreshCurrencyInCart=function(responseData){var cartPrices,cartProduct,cartProducts,i,len,personalizedPrices;for(cartProducts=this._cartProductsToArray(responseData.cart),personalizedPrices=responseData.personalizedPrices?responseData.personalizedPrices.products:{},cartPrices={products:{}},i=0,len=cartProducts.length;i<len;i++)personalizedPrices[(cartProduct=cartProducts[i]).id]||(cartPrices.products[cartProduct.id]=cartProduct.price);return this._pricesListeners.callListeners(cartPrices)},DataRepositoryService.prototype._cartProductsToArray=function(cartProducts){var id,product;return angular.isArray(cartProducts)||(cartProducts=function(){var results;for(id in results=[],cartProducts)product=cartProducts[id],results.push(product);return results}()),cartProducts},DataRepositoryService.prototype._putResponseToCache=function(data){return this._userDataCache.put(data)},DataRepositoryService}(),OrderDataRepositoryService=function(superClass){function OrderDataRepositoryService($http,listenersManager,config,$q,_userDataCache,_$window,_gtmEventSender){this._userDataCache=_userDataCache,this._$window=_$window,this._gtmEventSender=_gtmEventSender,OrderDataRepositoryService.__super__.constructor.call(this,$http,listenersManager,config,$q,this._userDataCache,this._$window,this._gtmEventSender),this._orderListeners=listenersManager.getManager()}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(OrderDataRepositoryService,DataRepositoryService),OrderDataRepositoryService.$inject=["$http","listenersManager","config","$q","@_userDataCache","$window","gtmEventSender"],OrderDataRepositoryService.prototype.addProduct=function(productId){return this._preAddProductListeners.callListeners(productId),this._$http.post(this._config.urls.order.addToOrder(this._config.order.orderId,productId)).then(this._onUpdateProductResponse.bind(this),angular.noop)},OrderDataRepositoryService.prototype.removeProduct=function(productId){return this._preRemoveProductListeners.callListeners(productId),this._$http.post(this._config.urls.order.removeFromOrder(this._config.order.orderId,productId)).then(this._onUpdateProductResponse.bind(this),angular.noop)},OrderDataRepositoryService.prototype.setOrderAsGift=function(orderId){return this._$http.post(this._config.urls.order.setAsGift(orderId)).then(this._onUpdateProductResponse.bind(this),angular.noop)},OrderDataRepositoryService.prototype.setOrderAsNotGift=function(orderId){return this._$http.post(this._config.urls.order.setAsNotGift(orderId)).then(this._onUpdateProductResponse.bind(this),angular.noop)},OrderDataRepositoryService.prototype.registerOrderListener=function(listener){return this._orderListeners.addListener(listener)},OrderDataRepositoryService.prototype._onUpdateProductResponse=function(response){var cartData,cartProducts,i,len,product,ref,responseData;if(cartProducts={},(responseData=response.data).orderData){for(i=0,len=(ref=responseData.orderData.cartProducts).length;i<len;i++)cartProducts[(product=ref[i]).id]=product;cartData={cart:cartProducts,checksum:responseData.cartChecksum,totalPrice:responseData.orderData.totalPrice}}else cartData={checksum:responseData.checksum,totalPrice:responseData.totalPrice,cart:responseData.cart};this._cartListeners.callListeners(cartData),responseData.personalizedPricing&&this._pricesListeners.callListeners(responseData.personalizedPricing),responseData.orderData&&this._orderListeners.callListeners(response)},OrderDataRepositoryService.prototype._notifyAnalyticsService=function(productId){this._$window.gogEventBus.publish("pixelAnalytics","addToCart",{productIds:[productId]})},OrderDataRepositoryService}(),DataRepositoryProvider=function(){function DataRepositoryProvider(){this._serviceType="default",this.$get=["$http","listenersManager","config","$q","userDataCache","$window","gtmEventSender",this._getService.bind(this)]}return DataRepositoryProvider.prototype.setServiceType=function(newType){return this._serviceType=newType},DataRepositoryProvider.prototype._services={default:DataRepositoryService,order:OrderDataRepositoryService},DataRepositoryProvider.prototype._getService=function($http,listenersManager,config,$q,userDataCache,$window,gtmEventSender){return new this._services[this._serviceType]($http,listenersManager,config,$q,userDataCache,$window,gtmEventSender)},DataRepositoryProvider}(),gog.provider("dataRepository",DataRepositoryProvider)},function(module,exports){var StorageRepositoryService;StorageRepositoryService=function(){function StorageRepositoryService($localStorage,listenersManager){this._storage=$localStorage,this._storageGlobalDefault={},this._storage.$default(this._storageGlobalDefault),this._onProductsGetListeners=listenersManager.getManager()}return StorageRepositoryService.$inject=["$localStorage","listenersManager"],StorageRepositoryService.prototype.setDefault=function(storageId,defaultData){return this._storageGlobalDefault[storageId]=defaultData,this._storage.$default(this._storageGlobalDefault)},StorageRepositoryService.prototype.put=function(storageId,key,value){return this._storage[storageId][key]=value},StorageRepositoryService.prototype.get=function(storageId){var product,productId;return this._storage[storageId].products&&this._onProductsGetListeners.callListeners(function(){var ref,results;for(productId in results=[],ref=this._storage[storageId].products)product=ref[productId],results.push(product);return results}.call(this)),this._storage[storageId]},StorageRepositoryService.prototype.onProductsGet=function(listener){return this._onProductsGetListeners.addListener(listener)},StorageRepositoryService}(),gog.service("storageRepository",StorageRepositoryService)},function(module,exports){var LogoutService;LogoutService=function(){function LogoutService(_eventDispatcher,_config,_$localStorage,_userDataCache,_$window,listenersManager,_userStorage){this._eventDispatcher=_eventDispatcher,this._config=_config,this._$localStorage=_$localStorage,this._userDataCache=_userDataCache,this._$window=_$window,this._userStorage=_userStorage,this._loggedOutListenersManager=listenersManager.getManager()}return LogoutService.$inject=["eventDispatcher","config","$localStorage","userDataCache","$window","listenersManager","userStorage"],LogoutService.prototype.startLogout=function(featureName){return this._$localStorage.$reset(),this._userDataCache.purge(),this._userStorage.clear(),this._eventDispatcher.dispatch(this._config.event.storage.reset),this._loggedOutListenersManager.callListeners(),this._$window.location.href=this._config.urls.logout},LogoutService.prototype.registerLoggedOutListener=function(listener){return this._loggedOutListenersManager.addListener(listener)},LogoutService}(),gog.service("logout",LogoutService)},function(module,exports){!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var listenersManager_1=__webpack_require__(2);angular.module("gogModuleListenersManager",[]).factory("listenersManager",function(){return{getManager:function(){return new listenersManager_1.ListenersManager}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ListenersManager=function(){function ListenersManager(){this.numberOfListeners=0,this.listeners=[],this.isSingleShot=[],this.stateListeners=[],this.isActive=!1}return ListenersManager.prototype.addListener=function(newListener){return this.numberOfListeners=this.listeners.push(newListener),this.isSingleShot.push(!1),this.updateState(!0),this.createCancelFunction(newListener)},ListenersManager.prototype.addSingleShotListener=function(newListener){return this.numberOfListeners=this.listeners.push(newListener),this.isSingleShot.push(!0),this.updateState(!0),this.createCancelFunction(newListener)},ListenersManager.prototype.callListeners=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(this.isActive){var i,listenersToLoop=this.listeners.slice(),isSingleShotInTheLoop=this.isSingleShot.slice(),numberOfListenersToLoop=this.numberOfListeners,singleShotListenersToRemove=[],listenersToRemoveCount=0;for(i=0;i<numberOfListenersToLoop;i++)listenersToLoop[i].apply(null,args),isSingleShotInTheLoop[i]&&(listenersToRemoveCount=singleShotListenersToRemove.push(listenersToLoop[i]));if(listenersToRemoveCount>0){for(i=0;i<listenersToRemoveCount;i++){var listenerIndex=this.listeners.indexOf(singleShotListenersToRemove[i]);-1!==listenerIndex&&(this.isSingleShot.splice(listenerIndex,1),this.listeners.splice(listenerIndex,1))}this.numberOfListeners=this.listeners.length,this.updateState(this.numberOfListeners>0)}}},ListenersManager.prototype.onStateChange=function(stateListener){this.stateListeners.push(stateListener)},ListenersManager.prototype.createCancelFunction=function(listenerToCancel){var _this=this;return function(){_this.afterCancel(listenerToCancel),listenerToCancel=null}},ListenersManager.prototype.afterCancel=function(listenerToRemove){var listenerIndex=this.listeners.indexOf(listenerToRemove);-1!==listenerIndex&&(this.listeners.splice(listenerIndex,1),this.isSingleShot.splice(listenerIndex,1),this.numberOfListeners=this.listeners.length,this.updateState(this.numberOfListeners>0))},ListenersManager.prototype.updateState=function(newActiveState){if(this.isActive!==newActiveState){this.isActive=newActiveState;for(var i=0,len=this.stateListeners.length;i<len;i++)this.stateListeners[i](this.isActive)}},ListenersManager}();exports.ListenersManager=ListenersManager}])},function(module,exports){!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=6)}([function(module,exports){module.exports=angular},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EventBusToGtmProxy=function(){function EventBusToGtmProxy($window,gtmEventSender){this.gtmEventSender=gtmEventSender,$window.gogEventBus.subscribe("tracking","sendEvent",this.onEventReceived.bind(this))}return EventBusToGtmProxy.prototype.onEventReceived=function(data){this.gtmEventSender.sendEvent({eventAction:data.action,eventCategory:data.category,eventLabel:data.label,product_title:data.title,product_id:data.id,product_price:data.price})},EventBusToGtmProxy.$inject=["$window","gtmEventSender"],EventBusToGtmProxy}();exports.EventBusToGtmProxy=EventBusToGtmProxy},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("gogModuleTracking",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0),GtmEventSender=function(){function GtmEventSender($window){this.$window=$window,this.GA_EVENT_BASE={event:"analyticsEvent"}}return GtmEventSender.prototype.sendEvent=function(gaEventData){if("object"==typeof this.$window.dataLayer)if(gaEventData.hasOwnProperty("event")&&gaEventData.event!==this.GA_EVENT_BASE.event)this.$window.dataLayer.push(angular.merge(gaEventData));else{if(!(gaEventData.hasOwnProperty("eventAction")&&gaEventData.hasOwnProperty("eventCategory")&&gaEventData.hasOwnProperty("eventLabel")))throw new Error("analyticEvents require category, action and label to be prvovided");this.$window.dataLayer.push(angular.merge({},this.GA_EVENT_BASE,gaEventData))}},GtmEventSender.$inject=["$window"],GtmEventSender}();exports.GtmEventSender=GtmEventSender,angular.module("gogModuleTracking").service("gtmEventSender",GtmEventSender)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0),GogTrackEvent=function(){function GogTrackEvent(gtmEventSender,$attrs,$element,$parse){this.gtmEventSender=gtmEventSender,this.$attrs=$attrs,this.$element=$element,this.$parse=$parse,this.sendEventBound=this.sendEvent.bind(this),this.$element.on("click",this.sendEventBound),this.$element.on("$destroy",this.onDestroy.bind(this))}return GogTrackEvent.prototype.sendEvent=function(gaEventData){var _this=this,data=this.$parse(this.$attrs.gogTrackEvent)("");void 0===data&&(data=gaEventData),Array.isArray(data)?data.forEach(function(eventData){_this.gtmEventSender.sendEvent(eventData)}):this.gtmEventSender.sendEvent(data)},GogTrackEvent.prototype.onDestroy=function(){this.$element.off("click",this.sendEventBound)},GogTrackEvent.$inject=["gtmEventSender","$attrs","$element","$parse"],GogTrackEvent}();exports.GogTrackEvent=GogTrackEvent,angular.module("gogModuleTracking").directive("gogTrackEvent",function(){return{controller:GogTrackEvent,controllerAs:"trackEvent",restrict:"A",scope:!0}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0),eventBusToGtmProxy_service_1=__webpack_require__(1);exports.module=angular.module("gogModuleTrackingEventsProxy",["gogModuleTracking"]).service("eventBusToGtmProxy",eventBusToGtmProxy_service_1.EventBusToGtmProxy).run(["eventBusToGtmProxy",function(eventBusToGtmProxy){angular.noop}])},function(module,exports,__webpack_require__){__webpack_require__(7),__webpack_require__(8),__webpack_require__(1),__webpack_require__(2),__webpack_require__(5),__webpack_require__(4),__webpack_require__(3),module.exports=__webpack_require__(9)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(2),__webpack_require__(3),__webpack_require__(4)},function(module,exports,__webpack_require__){"use strict";var Analytics;!function(w,d,s,l,i){w[l]=w[l]||[];var gtmConfig={gtm:{start:(new Date).getTime()},event:"gtm.js"};w[l].push(gtmConfig);var f=d.getElementsByTagName(s)[0],j=d.createElement(s);j.async=!0,j.src="//www.googletagmanager.com/gtm.js?id=GTM-NX39DH",f.parentNode.insertBefore(j,f)}(window,document,"script","dataLayer"),window.Analytics=function(){var pushToGtm=function(namespace,data){"object"==typeof window.dataLayer&&(data.event=namespace,window.dataLayer.push(data))};Analytics={isInitialized:!1,callbackQueue:[],gtmDefaultNamespace:"analyticsEvent",gtmEcommerceNamespace:"analyticsEcommerceEvent",gtmPostInitializationNamespace:"gtm.postInitialization",sendEvent:function(data){var nameSpace=Analytics.gtmDefaultNamespace;data.event&&(nameSpace=data.event),pushToGtm(nameSpace,data)},sendTransaction:function(orderId,amount,currency,country,cartProducts,paymentMethod,callback){Analytics.isInitialized||"function"!=typeof callback||Analytics.callbackQueue.push(callback);var transactionData={};extendGATranslationData(transactionData,orderId,amount,currency,cartProducts,paymentMethod,callback),extendPixelTranslationData(transactionData,amount,currency,cartProducts),pushToGtm(Analytics.gtmEcommerceNamespace,transactionData)}};var extendGATranslationData=function(obj,orderId,amount,currency,cartProducts,paymentMethod,callback){for(var products=[],i=0;i<cartProducts.length;++i){var item=cartProducts[i];products.push({sku:item.id,name:item.title,category:item.isMovie?"movie":unifyCategoryName(item.originalCategory),price:parseFloat(item.price.finalAmount),quantity:"1"})}Object.assign(obj,{transactionId:orderId,transactionAffiliation:paymentMethod||"NA",transactionTotal:amount,transactionTax:0,transactionShipping:0,transactionProducts:products,currencyCode:currency}),"function"==typeof callback&&(obj.eventCallback=callback)},extendPixelTranslationData=function(obj,amount,currency,cartProducts){Object.assign(obj,{content_type:"product",content_ids:cartProducts.map(function(product){return product.id+""}),content_name:cartProducts.map(function(product){return product.title}).join(", "),value:amount+"",currency:currency,num_items:cartProducts.length})},unifyCategoryName=function(categoryName){var lowerCaseCategoryName=categoryName.toLowerCase();return"role-playing"===lowerCaseCategoryName&&(lowerCaseCategoryName="rpg"),lowerCaseCategoryName};return Analytics.isInitialized=void 0!==window.google_tag_manager,Analytics.isInitialized||(pushToGtm(Analytics.gtmPostInitializationNamespace,function(){Analytics.isInitialized=!0}),setTimeout(function(){for(;!Analytics.isInitialized&&Analytics.callbackQueue&&Analytics.callbackQueue.length>0;){var fn=Analytics.callbackQueue.shift();"function"==typeof fn&&fn()}},4e3)),Analytics}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(5),__webpack_require__(1)}])},function(module,exports,__webpack_require__){"use strict";gog.factory("redirectionService",function($http,config){return new(function(){function RedirectionService(){}return RedirectionService.prototype.set=function(route,callback,parameters){var i,len,paramName,paramVal,parameterObj,parameterStrings,redirectUrl;if(null!=parameters&&angular.isArray(parameters)){for(parameterStrings=[],i=0,len=parameters.length;i<len;i++)for(paramName in parameterObj=parameters[i])paramVal=parameterObj[paramName],parameterStrings.push(paramName+"="+paramVal);redirectUrl=config.urls.user.setRedirectUrlWithParams(route,parameterStrings.join("&"))}else redirectUrl=config.urls.user.setRedirectUrl(route);return $http.get(redirectUrl).then(function(response){if("function"==typeof callback)return callback()}).catch(angular.noop)},RedirectionService}())})},function(module,exports){angular.module("gog").factory("wishlistedProductsPersonalizer",function(productsRepository,wishlist){"use strict";var updateWishlistedProducts;return updateWishlistedProducts=function(){var id,product,products,results;for(id in results=[],products=productsRepository.getProducts())product=products[id],results.push(product.isWishlisted=wishlist.has(id));return results},wishlist.registerWishlistListener(updateWishlistedProducts),productsRepository.listenForNewProducts(updateWishlistedProducts),updateWishlistedProducts(),{register:function(products){}}})},function(module,exports){var GOGLoginRequiredController;GOGLoginRequiredController=function(){function GOGLoginRequiredController(_user,_redirectionService,_ngElWithAction,_attrs,_galaxyAccounts){this._user=_user,this._redirectionService=_redirectionService,this._ngElWithAction=_ngElWithAction,this._attrs=_attrs,this._galaxyAccounts=_galaxyAccounts,this._validateUserLoggedStateBound=this._validateUserLoggedState.bind(this),this._ngElWithAction.on("click touchstart",this._validateUserLoggedStateBound),this._ngElWithAction.on("$destroy",this._clearController.bind(this))}return GOGLoginRequiredController.$inject=["user","redirectionService","$element","$attrs","galaxyAccounts"],GOGLoginRequiredController.prototype._validateUserLoggedState=function(event){this._user.isLoggedIn()||(event.preventDefault(),event.stopPropagation(),this._attrs.gogLoginRequired?this._openLoginWithRedirection():this._openLogin())},GOGLoginRequiredController.prototype._openLoginWithRedirection=function(){var params,redirectionRoute;params=this._attrs.gogLoginRequiredParams?JSON.parse(this._attrs.gogLoginRequiredParams):[],redirectionRoute=this._attrs.gogLoginRequired,this._redirectionService.set(redirectionRoute,this._openLogin.bind(this),params)},GOGLoginRequiredController.prototype._openLogin=function(){this._galaxyAccounts.openLoginForm()},GOGLoginRequiredController.prototype._clearController=function(){this._ngElWithAction.off("click touchstart",this._validateUserLoggedStateBound)},GOGLoginRequiredController}(),gog.directive("gogLoginRequired",function(){return{restrict:"A",controller:GOGLoginRequiredController}})},function(module,exports){var UserDataCache,UserDataCacheProvider;UserDataCache=function(){function UserDataCache($window){this._initialized=!1,angular.isNumber($window.gogData.personalizationEndpointCacheTtl)&&$window.gogData.personalizationEndpointCacheTtl>0?(this.enabled=!0,this._ttl=1e3*$window.gogData.personalizationEndpointCacheTtl):this.enabled=!1}return UserDataCache.dataKey="userData",UserDataCache.expiresKey="userDataExpires",UserDataCache.prototype.put=function(data){if(this.enabled)return this._init(),localStorage.setItem(UserDataCache.dataKey,JSON.stringify(data)),localStorage.setItem(UserDataCache.expiresKey,this._timestamp()+this._ttl)},UserDataCache.prototype.get=function(){return this.enabled?(this._init(),this.isCached()?angular.fromJson(localStorage.getItem(UserDataCache.dataKey)):null):null},UserDataCache.prototype.isCached=function(){var cachedData,storedExpireDate;return!1!==this.enabled&&(this._init(),(storedExpireDate=localStorage.getItem(UserDataCache.expiresKey))?!(parseInt(storedExpireDate,10)<=this._timestamp())&&!(!(cachedData=localStorage.getItem(UserDataCache.dataKey))||0===cachedData.length):void 0)},UserDataCache.prototype.invalidate=function(){return localStorage.setItem(UserDataCache.expiresKey,0)},UserDataCache.prototype.purge=function(){if(this.enabled)return localStorage.removeItem(UserDataCache.expiresKey),localStorage.removeItem(UserDataCache.dataKey)},UserDataCache.prototype._init=function(){if(!this._initialized)return this._initialized=!0,localStorage.setItem(UserDataCache.expiresKey,localStorage.getItem(UserDataCache.expiresKey)||0),localStorage.setItem(UserDataCache.dataKey,localStorage.getItem(UserDataCache.dataKey)||""),this.isSetToPurge?this.purge():void 0},UserDataCache.prototype._timestamp=function(){return Math.floor(new Date)},UserDataCache}(),UserDataCacheProvider=function(){return function(){this.$get=["$window",function($window){return new UserDataCache($window)}],UserDataCache.isSetToPurge=!1}}(),gog.provider("userDataCache",UserDataCacheProvider)},function(module,exports){var UsersRepositoryService;UsersRepositoryService=function(){function UsersRepositoryService(_http,_listenersManager,_config,_USER_STATUSES,_userEvents,_eventDispatcher,_$timeout){this._http=_http,this._listenersManager=_listenersManager,this._config=_config,this._USER_STATUSES=_USER_STATUSES,this._userEvents=_userEvents,this._eventDispatcher=_eventDispatcher,this._$timeout=_$timeout,this._userPromises={},this._userListeners={},this._userRefreshListeners={},this._users={},this._requestsCounts={},this._createInvitationUrlForId=this._config.urls.friends.invite,this._createGetUserInfoUrlForId=this._config.urls.user.public.info,this._createAcceptInviteUrlForInviteId=this._config.urls.friends.accept,this._createDeclineInvitationUrlForId=this._config.urls.friends.decline}return UsersRepositoryService.$inject=["$http","listenersManager","config","userStatuses","userEvents","eventDispatcher","$timeout"],UsersRepositoryService.MAX_REQUESTS_COUNT=3,UsersRepositoryService.prototype.registerUserListener=function(userId,newListener){var cancelListener;return angular.isDefined(this._userListeners[userId])||this._createListenersForId(userId),cancelListener=this._userListeners[userId].addListener(newListener),this._setUserDataForId(userId),cancelListener},UsersRepositoryService.prototype.registerUserRefreshListener=function(userId,newListener){return angular.isDefined(this._userRefreshListeners[userId])||this._createRefreshListenersForId(userId),this._userRefreshListeners[userId].addListener(newListener)},UsersRepositoryService.prototype.acceptInvitationFromId=function(userId){if(!this._isInvitationInProgressForId(userId))return this._setAcceptInvitationInProgressFromId(userId),this._startAcceptingProcessForId(userId)},UsersRepositoryService.prototype.declineInvitationFromId=function(userId){return this._setDeclineInvitationInProgressFromId(userId),this._startDecliningProcessForId(userId)},UsersRepositoryService.prototype.sendInvitationForId=function(userId){if(!this._isInvitationInProgressForId(userId))return this._setInvitationInProgressForId(userId),this._startInvitationProcessForId(userId)},UsersRepositoryService.prototype.refreshUserData=function(userId){return this._refreshUserDataForId(userId)},UsersRepositoryService.prototype.getUserById=function(userId){return this._userExists(userId)?this._users[userId]:void 0},UsersRepositoryService.prototype.setUserProperty=function(userId,propertyName,value){var user;if(this._userExists(userId))return(user=this._users[userId])[propertyName]=value,this._callUserListenersForIdWithData(userId,user)},UsersRepositoryService.prototype._isInvitationInProgressForId=function(userId){return this._users[userId].isInvited},UsersRepositoryService.prototype._startInvitationProcessForId=function(userId){var url;return url=this._createInvitationUrlForId(userId),this._http.post(url).catch(this._resetInvitationProgressForId.bind(this,userId))},UsersRepositoryService.prototype._setInvitationInProgressForId=function(userId){var user;return(user=this._users[userId]).isInvited=!0,user.isAnonymous=!1,this._callUserListenersForIdWithData(userId,user)},UsersRepositoryService.prototype._resetInvitationProgressForId=function(userId){var user;return(user=this._users[userId]).isInvited=!1,user.isAnonymous=!0,this._callUserListenersForIdWithData(userId)},UsersRepositoryService.prototype._setAcceptInvitationInProgressFromId=function(userId){var user;return(user=this._users[userId]).isFriend=!0,user.isAwaiting=!1,user.dateUserFriended=Math.floor(Date.now()/1e3),this._callUserListenersForIdWithData(userId,user),this._eventDispatcher.dispatch(this._userEvents.friend.accept.initiated,userId)},UsersRepositoryService.prototype._startAcceptingProcessForId=function(userId){var url,user;return user=this._users[userId],url=this._createAcceptInviteUrlForInviteId(user.inviteId),this._http.post(url).then(this._onAcceptingSuccess.bind(this,userId),this._resetAcceptingProgressForId.bind(this,userId))},UsersRepositoryService.prototype._setDeclineInvitationInProgressFromId=function(userId){var user;return(user=this._users[userId]).isAwaiting=!1,this._callUserListenersForIdWithData(userId,user),this._eventDispatcher.dispatch(this._userEvents.friend.decline.initiated,userId)},UsersRepositoryService.prototype._startDecliningProcessForId=function(userId){var url,user;return user=this._users[userId],url=this._createDeclineInvitationUrlForId(user.inviteId),this._http.post(url).then(this._onDeclineSuccess.bind(this,userId),this._resetDecliningProgressForId.bind(this,userId))},UsersRepositoryService.prototype._resetDecliningProgressForId=function(userId){var user;return(user=this._users[userId]).isAwaiting=!0,this._callUserListenersForIdWithData(userId,user),this._eventDispatcher.dispatch(this._userEvents.friend.decline.error,userId)},UsersRepositoryService.prototype._onDeclineSuccess=function(userId){return this._eventDispatcher.dispatch(this._userEvents.friend.decline.success,userId)},UsersRepositoryService.prototype._onAcceptingSuccess=function(userId){return this._eventDispatcher.dispatch(this._userEvents.friend.accept.success,userId)},UsersRepositoryService.prototype._resetAcceptingProgressForId=function(userId){var user;return(user=this._users[userId]).isAwaiting=!0,user.isFriend=!1,user.dateUserFriended=null,this._callUserListenersForIdWithData(userId,user),this._eventDispatcher.dispatch(this._userEvents.friend.accept.error,userId)},UsersRepositoryService.prototype._setUserDataForId=function(userId){var userData;if(userData=this.getUserById(userId),angular.isDefined(userData)&&this._$timeout(this._callUserListenersForIdWithData.bind(this,userId,userData)),!this._wasUserFetched(userId))return this._fetchUser(userId)},UsersRepositoryService.prototype._refreshUserDataForId=function(userId){return this._callUserRefreshListenersForId(userId),this._fetchUser(userId)},UsersRepositoryService.prototype._wasUserFetched=function(userId){return angular.isDefined(this._userPromises[userId])},UsersRepositoryService.prototype._fetchUser=function(userId){var urlForUserInfo,userResponsePromise;return urlForUserInfo=this._createGetUserInfoUrlForId(userId),userResponsePromise=this._http.get(urlForUserInfo).then(this._saveUser.bind(this,userId),this._resolveRequestErrorForId.bind(this,userId)),this._userPromises[userId]=userResponsePromise},UsersRepositoryService.prototype._saveUser=function(userId,response){var user,userData;return userData=response.data,angular.isDefined(userData.id)?(user=this._createUser(userData),this._users[user.id]=user,this._callUserListenersForIdWithData(user.id,user)):this._resolveRequestErrorForId(userId)},UsersRepositoryService.prototype._callUserListenersForIdWithData=function(userId,userData){return this._userListeners[userId].callListeners(userData)},UsersRepositoryService.prototype._callUserRefreshListenersForId=function(userId){return this._userRefreshListeners[userId].callListeners()},UsersRepositoryService.prototype._resolveRequestErrorForId=function(userId,response){if(response.status<500)return this._setMissingUserForId(userId);angular.isDefined(this._requestsCounts[userId])?this._requestsCounts[userId]+=1:this._requestsCounts[userId]=1,this._requestsCounts[userId]<UsersRepositoryService.MAX_REQUESTS_COUNT?this._fetchUser(userId):this._setMissingUserForId(userId)},UsersRepositoryService.prototype._createUser=function(userData){var user;switch(user={id:userData.id,galaxyUserId:userData.galaxyUserId,name:userData.username,dateUserJoined:userData.userSince,imageUrl:userData.avatars.medium,imageUrlRetina:userData.avatars.medium2x,isAnonymous:userData.friendStatus.status===this._USER_STATUSES.ANONYMOUS_USER,isInvited:userData.friendStatus.status===this._USER_STATUSES.INVITED_USER,isFriend:userData.friendStatus.status===this._USER_STATUSES.FRIEND,isAwaiting:userData.friendStatus.status===this._USER_STATUSES.INVITED_BY_USER,isBlocked:userData.blockedStatus.blocked===this._USER_STATUSES.BLOCKED_BY_ME,dateUserFriended:userData.friendStatus.dateAccepted,isChatRestricted:userData.chatStatus.isChatRestricted,chatUrl:userData.chatStatus.url,wishlistUrl:userData.wishlistStatus.url,profileUrl:this._config.urls.user.profile(userData.username)},userData.friendStatus.status===this._USER_STATUSES.INVITED_BY_USER&&(user.inviteId=userData.friendStatus.id),userData.wishlistStatus.sharing){case this._USER_STATUSES.WISHLIST_PRIVATE:user.isWishlistRestricted=!0;break;case this._USER_STATUSES.WISHLIST_PUBLIC:user.isWishlistRestricted=!1;break;case this._USER_STATUSES.WISHLIST_FOR_FRIENDS:user.isWishlistRestricted=!user.isFriend}return user},UsersRepositoryService.prototype._setMissingUserForId=function(userId){return this._users[userId]=null,this._callUserListenersForIdWithData(userId,null)},UsersRepositoryService.prototype._createListenersForId=function(userId){return this._userListeners[userId]=this._listenersManager.getManager()},UsersRepositoryService.prototype._createRefreshListenersForId=function(userId){return this._userRefreshListeners[userId]=this._listenersManager.getManager()},UsersRepositoryService.prototype._userExists=function(userId){return angular.isDefined(this._users[userId])},UsersRepositoryService}(),gog.service("usersRepository",UsersRepositoryService)},function(module,exports){var UsersPropertyBlockService;UsersPropertyBlockService=function(){function UsersPropertyBlockService(_usersRepository,_$http,_config,listenersManager){this._usersRepository=_usersRepository,this._$http=_$http,this._config=_config,this._inProgress={blocking:{}},this._property=UsersPropertyBlockService.USERS_BLOCKED_PROPERTY,this._userBlockStateChangeListeners=listenersManager.getManager()}return UsersPropertyBlockService.$inject=["usersRepository","$http","config","listenersManager"],UsersPropertyBlockService.USERS_BLOCKED_PROPERTY="isBlocked",UsersPropertyBlockService.prototype.blockUser=function(userId){var user;if(user=this._usersRepository.getUserById(userId),!(this._isBlockingChangeInProgress(userId)||null!=user&&!0===user.isBlocked))return this._setUserBlockedForId(userId),this._startBlockingProcessForId(userId)},UsersPropertyBlockService.prototype.unblockUser=function(userId){var user;if(user=this._usersRepository.getUserById(userId),!(this._isBlockingChangeInProgress(userId)||null!=user&&!1===user.isBlocked))return this._setUserUnblockedForId(userId),this._startUnblockingProcessForId(userId)},UsersPropertyBlockService.prototype.onBlockedStateChange=function(listener){return this._userBlockStateChangeListeners.addListener(listener)},UsersPropertyBlockService.prototype._startBlockingProcessForId=function(userId){var url;return this._setBlockingInProgress(userId,!0),url=this._config.urls.user.public.block(userId),this._$http.post(url).then(angular.noop,this._setUserUnblockedForId.bind(this,userId)).finally(this._blockingChangeDone.bind(this,userId))},UsersPropertyBlockService.prototype._startUnblockingProcessForId=function(userId){var url;return this._setBlockingInProgress(userId,!0),url=this._config.urls.user.public.unblock(userId),this._$http.post(url).then(angular.noop,this._setUserBlockedForId.bind(this,userId)).finally(this._blockingChangeDone.bind(this,userId))},UsersPropertyBlockService.prototype._blockingChangeDone=function(userId){return this._setBlockingInProgress(userId,!1),this._usersRepository.refreshUserData(userId)},UsersPropertyBlockService.prototype._setBlockingInProgress=function(userId,status){return this._inProgress.blocking[userId]=status},UsersPropertyBlockService.prototype._isBlockingChangeInProgress=function(userId){return!0===this._inProgress.blocking[userId]},UsersPropertyBlockService.prototype._setUserBlockedForId=function(userId){return this._usersRepository.setUserProperty(userId,this._property,!0),this._userBlockStateChangeListeners.callListeners(userId,!0)},UsersPropertyBlockService.prototype._setUserUnblockedForId=function(userId){return this._usersRepository.setUserProperty(userId,this._property,!1),this._userBlockStateChangeListeners.callListeners(userId,!1)},UsersPropertyBlockService}(),gog.service("usersPropertyBlock",UsersPropertyBlockService)},function(module,exports){gog.constant("userStatuses",{ANONYMOUS_USER:0,INVITED_USER:1,INVITED_BY_USER:2,FRIEND:3,WISHLIST_PRIVATE:0,WISHLIST_PUBLIC:1,WISHLIST_FOR_FRIENDS:2,NOT_BLOCKED:!1,BLOCKED_BY_ME:!0})},function(module,exports){gog.constant("userEvents",{friend:{accept:{initiated:"user.friend.accept.initiated",success:"user.friend.accept.success",error:"user.friend.accept.error"},decline:{initiated:"user.friend.decline.initiated",success:"user.friend.decline.success",error:"user.friend.decline.error"}}})},function(module,exports){var GOGUserController;GOGUserController=function(){function GOGUserController($attrs,_usersPropertyBlock,_usersRepository,userResponse,_ngElUser,_dateFilter,_toMilisFilter,_debounce){this._usersPropertyBlock=_usersPropertyBlock,this._usersRepository=_usersRepository,this._ngElUser=_ngElUser,this._dateFilter=_dateFilter,this._toMilisFilter=_toMilisFilter,this._debounce=_debounce,this._deregisterIdObserver=$attrs.$observe("gogUser",this._setupForUserId.bind(this)),this._elUser=this._ngElUser[0],this.is={present:!1,initialized:!1,displayed:!1},this.isProfileRestricted=!1,this._listenerCancellers=[],this._tearDownControllerBound=this._tearDownController.bind(this),this._ngElUser.on("$destroy",this._tearDownControllerBound),this._setupInitializationListeners(),this._setupHoveringListeners(),userResponse.success(this._updateIdForCurrentUser.bind(this)),this._closingLocked=!1,this._closingLockTimer=null,this._delayedClosingTimer=null}return GOGUserController.closingDelayDuration=1e3,GOGUserController.$inject=["$attrs","usersPropertyBlock","usersRepository","userResponse","$element","dateFilter","toMilisFilter","debounce"],GOGUserController.prototype.inviteToFriends=function(){this._usersRepository.sendInvitationForId(this._id)},GOGUserController.prototype.acceptInvitation=function(){this._usersRepository.acceptInvitationFromId(this._id)},GOGUserController.prototype.blockUser=function(){this._setClosingLock(),this._usersPropertyBlock.blockUser(this._id)},GOGUserController.prototype.unblockUser=function(){this._usersPropertyBlock.unblockUser(this._id)},GOGUserController.prototype.isAllowedToChat=function(){return null!=this.data&&!this.data.isChatRestricted&&!this.data.isBlocked},GOGUserController.prototype._setDelayedClosing=function(){this._delayedClosingTimer=setTimeout(this._hideData.bind(this,null,!0),GOGUserController.closingDelayDuration)},GOGUserController.prototype._clearDelayedClosing=function(){clearTimeout(this._delayedClosingTimer)},GOGUserController.prototype._setClosingLock=function(){this._closingLocked=!0,this._closingLockTimer=setTimeout(this._clearClosingLock.bind(this),GOGUserController.closingDelayDuration)},GOGUserController.prototype._clearClosingLock=function(){this._closingLocked=!1,clearTimeout(this._closingLockTimer)},GOGUserController.prototype._setupForUserId=function(userId){this._id=userId,this._compareToCurrentUser(),this._deregisterIdObserver(),delete this._deregisterIdObserver},GOGUserController.prototype._updateIdForCurrentUser=function(userData){this._currentUserId=userData.userId||null,this._currentUserId&&this._compareToCurrentUser()},GOGUserController.prototype._compareToCurrentUser=function(){angular.isDefined(this._id)&&angular.isDefined(this._currentUserId)&&this._id===this._currentUserId&&this._deactivateTooltip()},GOGUserController.prototype._deactivateTooltip=function(){this._tearDownController(),this._deactivateElement()},GOGUserController.prototype._setupInitializationListeners=function(){this._initializeUserDebounced=this._debounce(this._initializeUser.bind(this),300,!1,!1),this._clearUserInitializationBound=this._clearUserInitialization.bind(this),this._elUser.addEventListener("mouseover",this._initializeUserDebounced),this._elUser.addEventListener("mouseout",this._clearUserInitializationBound)},GOGUserController.prototype._tearDownInitializationListeners=function(){this._clearUserInitialization(),this._elUser.removeEventListener("mouseover",this._initializeUserDebounced),this._elUser.removeEventListener("mouseout",this._clearUserInitializationBound)},GOGUserController.prototype._setupHoveringListeners=function(){this._displayDataDebounced=this._debounce(this._displayData.bind(this),300,!1,!1),this._hideDataBound=this._hideData.bind(this),this._elUser.addEventListener("mouseover",this._displayDataDebounced),this._elUser.addEventListener("mouseout",this._hideDataBound)},GOGUserController.prototype._tearDownHoveringListeners=function(){this._elUser.removeEventListener("mouseover",this._displayDataDebounced),this._elUser.removeEventListener("mouseout",this._hideDataBound)},GOGUserController.prototype._initializeUser=function(){this._activateElement(),this._setPendingStateForElement(),this._tearDownInitializationListeners(),this._listenerCancellers.push(this._usersRepository.registerUserListener(this._id,this._updateUser.bind(this))),this._listenerCancellers.push(this._usersRepository.registerUserRefreshListener(this._id,this._setPendingStateForElement.bind(this)))},GOGUserController.prototype._clearUserInitialization=function(){this._initializeUserDebounced.cancel()},GOGUserController.prototype._updateUser=function(user){user?this._setUser(user):this._cancelUser(),this._unsetPendingStateForElement()},GOGUserController.prototype._setUser=function(user){this.data=user,this.is.present=!0,this.is.initialized=!0,this._setDates(),this._setUrls()},GOGUserController.prototype._setDates=function(){var timeStampUserFriended,timeStampUserJoined;timeStampUserJoined=this._toMilisFilter(this.data.dateUserJoined),this.formattedDateUserJoined=this._dateFilter(timeStampUserJoined,"MMM yyyy"),this.data.isFriend&&(timeStampUserFriended=this._toMilisFilter(this.data.dateUserFriended),this.formattedDateUserFriended=this._dateFilter(timeStampUserFriended,"MMM yyyy"))},GOGUserController.prototype._setUrls=function(){this.isAllowedToChat()?this.urlStartConversationAction=this.data.chatUrl:this.urlStartConversationAction=null,this.data.isWishlistRestricted?this.urlSharedWishlist=null:this.urlSharedWishlist=this.data.wishlistUrl},GOGUserController.prototype._cancelUser=function(){this.is.initialized=!0,this.is.present=!1,this._setErrorStateForElement()},GOGUserController.prototype._displayData=function(){this._clearClosingLock(),this._clearDelayedClosing(),this.is.displayed||(this.is.displayed=!0,this._elUser.classList.add("user--displayed"))},GOGUserController.prototype._hideData=function(event,force){null==force&&(force=!1),this._closingLocked?this._setDelayedClosing():(this._displayDataDebounced.cancel(),(force||!this._isPartOfThisElement(event.relatedTarget)&&this.is.displayed)&&(this.is.displayed=!1,this._elUser.classList.remove("user--displayed")))},GOGUserController.prototype._isPartOfThisElement=function(nodeToCheck){return!nodeToCheck||(this._elUser.compareDocumentPosition(nodeToCheck)>=16||this._elUser===nodeToCheck)},GOGUserController.prototype._setPendingStateForElement=function(){this._elUser.classList.add("is-data-pending")},GOGUserController.prototype._unsetPendingStateForElement=function(){this._elUser.classList.remove("is-data-pending")},GOGUserController.prototype._setErrorStateForElement=function(){this._elUser.classList.add("user--error")},GOGUserController.prototype._activateElement=function(){this._elUser.classList.add("is-active")},GOGUserController.prototype._deactivateElement=function(){this._elUser.classList.remove("is-active")},GOGUserController.prototype._tearDownController=function(){var i,len,ref;for(i=0,len=(ref=this._listenerCancellers).length;i<len;i++)(0,ref[i])();delete this._listenerCancellers,this._tearDownInitializationListeners(),this._tearDownHoveringListeners(),this._ngElUser.off("$destroy",this._tearDownControllerBound)},GOGUserController}(),gog.directive("gogUser",function(){return{restrict:"A",scope:!0,controller:GOGUserController,controllerAs:"user"}})},function(module,exports,__webpack_require__){__webpack_require__(0)(__webpack_require__(66))},function(module,exports){module.exports="/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */\n// Edited by GOG.com Team to not prevent native vertical scroll (search \"GOG.com Team\")\n(function (window, document, Math) {\nvar rAF = window.requestAnimationFrame  ||\n    window.webkitRequestAnimationFrame  ||\n    window.mozRequestAnimationFrame     ||\n    window.oRequestAnimationFrame       ||\n    window.msRequestAnimationFrame      ||\n    function (callback) { window.setTimeout(callback, 1000 / 60); };\n\nvar utils = (function () {\n    var me = {};\n\n    var _elementStyle = document.createElement('div').style;\n    var _vendor = (function () {\n        var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\n            transform,\n            i = 0,\n            l = vendors.length;\n\n        for ( ; i < l; i++ ) {\n            transform = vendors[i] + 'ransform';\n            if ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);\n        }\n\n        return false;\n    })();\n\n    function _prefixStyle (style) {\n        if ( _vendor === false ) return false;\n        if ( _vendor === '' ) return style;\n        return _vendor + style.charAt(0).toUpperCase() + style.substr(1);\n    }\n\n    me.getTime = Date.now || function getTime () { return new Date().getTime(); };\n\n    me.extend = function (target, obj) {\n        for ( var i in obj ) {\n            target[i] = obj[i];\n        }\n    };\n\n    me.addEvent = function (el, type, fn, capture) {\n        el.addEventListener(type, fn, !!capture);\n    };\n\n    me.removeEvent = function (el, type, fn, capture) {\n        el.removeEventListener(type, fn, !!capture);\n    };\n\n    me.prefixPointerEvent = function (pointerEvent) {\n        return window.MSPointerEvent ?\n            'MSPointer' + pointerEvent.charAt(9).toUpperCase() + pointerEvent.substr(10):\n            pointerEvent;\n    };\n\n    me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {\n        var distance = current - start,\n            speed = Math.abs(distance) / time,\n            destination,\n            duration;\n\n        deceleration = deceleration === undefined ? 0.0006 : deceleration;\n\n        destination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );\n        duration = speed / deceleration;\n\n        if ( destination < lowerMargin ) {\n            destination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;\n            distance = Math.abs(destination - current);\n            duration = distance / speed;\n        } else if ( destination > 0 ) {\n            destination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;\n            distance = Math.abs(current) + destination;\n            duration = distance / speed;\n        }\n\n        return {\n            destination: Math.round(destination),\n            duration: duration\n        };\n    };\n\n    var _transform = _prefixStyle('transform');\n\n    me.extend(me, {\n        hasTransform: _transform !== false,\n        hasPerspective: _prefixStyle('perspective') in _elementStyle,\n        hasTouch: 'ontouchstart' in window,\n        hasPointer: window.PointerEvent || window.MSPointerEvent, // IE10 is prefixed\n        hasTransition: _prefixStyle('transition') in _elementStyle\n    });\n\n    // This should find all Android browsers lower than build 535.19 (both stock browser and webview)\n    me.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\\/\\d/.test(window.navigator.appVersion));\n\n    me.extend(me.style = {}, {\n        transform: _transform,\n        transitionTimingFunction: _prefixStyle('transitionTimingFunction'),\n        transitionDuration: _prefixStyle('transitionDuration'),\n        transitionDelay: _prefixStyle('transitionDelay'),\n        transformOrigin: _prefixStyle('transformOrigin')\n    });\n\n    me.hasClass = function (e, c) {\n        var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\n        return re.test(e.className);\n    };\n\n    me.addClass = function (e, c) {\n        if ( me.hasClass(e, c) ) {\n            return;\n        }\n\n        var newclass = e.className.split(' ');\n        newclass.push(c);\n        e.className = newclass.join(' ');\n    };\n\n    me.removeClass = function (e, c) {\n        if ( !me.hasClass(e, c) ) {\n            return;\n        }\n\n        var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\n        e.className = e.className.replace(re, ' ');\n    };\n\n    me.offset = function (el) {\n        var left = -el.offsetLeft,\n            top = -el.offsetTop;\n\n        // jshint -W084\n        while (el = el.offsetParent) {\n            left -= el.offsetLeft;\n            top -= el.offsetTop;\n        }\n        // jshint +W084\n\n        return {\n            left: left,\n            top: top\n        };\n    };\n\n    me.preventDefaultException = function (el, exceptions) {\n        for ( var i in exceptions ) {\n            if ( exceptions[i].test(el[i]) ) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    me.extend(me.eventType = {}, {\n        touchstart: 1,\n        touchmove: 1,\n        touchend: 1,\n\n        mousedown: 2,\n        mousemove: 2,\n        mouseup: 2,\n\n        pointerdown: 3,\n        pointermove: 3,\n        pointerup: 3,\n\n        MSPointerDown: 3,\n        MSPointerMove: 3,\n        MSPointerUp: 3\n    });\n\n    me.extend(me.ease = {}, {\n        quadratic: {\n            style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n            fn: function (k) {\n                return k * ( 2 - k );\n            }\n        },\n        circular: {\n            style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',   // Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\n            fn: function (k) {\n                return Math.sqrt( 1 - ( --k * k ) );\n            }\n        },\n        back: {\n            style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n            fn: function (k) {\n                var b = 4;\n                return ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;\n            }\n        },\n        bounce: {\n            style: '',\n            fn: function (k) {\n                if ( ( k /= 1 ) < ( 1 / 2.75 ) ) {\n                    return 7.5625 * k * k;\n                } else if ( k < ( 2 / 2.75 ) ) {\n                    return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n                } else if ( k < ( 2.5 / 2.75 ) ) {\n                    return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n                } else {\n                    return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n                }\n            }\n        },\n        elastic: {\n            style: '',\n            fn: function (k) {\n                var f = 0.22,\n                    e = 0.4;\n\n                if ( k === 0 ) { return 0; }\n                if ( k == 1 ) { return 1; }\n\n                return ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );\n            }\n        }\n    });\n\n    me.tap = function (e, eventName) {\n        var ev = document.createEvent('Event');\n        ev.initEvent(eventName, true, true);\n        ev.pageX = e.pageX;\n        ev.pageY = e.pageY;\n        e.target.dispatchEvent(ev);\n    };\n\n    me.click = function (e) {\n        var target = e.target,\n            ev;\n\n        if ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {\n            ev = document.createEvent('MouseEvents');\n            ev.initMouseEvent('click', true, true, e.view, 1,\n                target.screenX, target.screenY, target.clientX, target.clientY,\n                e.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\n                0, null);\n\n            ev._constructed = true;\n            target.dispatchEvent(ev);\n        }\n    };\n\n    return me;\n})();\n\nfunction IScroll (el, options) {\n    this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;\n    this.scroller = this.wrapper.children[0];\n    this.scrollerStyle = this.scroller.style;       // cache style for better performance\n\n    this.options = {\n\n        resizeScrollbars: true,\n\n        mouseWheelSpeed: 20,\n\n        snapThreshold: 0.334,\n\n// INSERT POINT: OPTIONS\n\n        startX: 0,\n        startY: 0,\n        scrollY: true,\n        directionLockThreshold: 5,\n        momentum: true,\n\n        bounce: true,\n        bounceTime: 600,\n        bounceEasing: '',\n\n        preventDefault: true,\n        preventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/ },\n\n        HWCompositing: true,\n        useTransition: true,\n        useTransform: true\n    };\n\n    for ( var i in options ) {\n        this.options[i] = options[i];\n    }\n\n    // Normalize options\n    this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';\n\n    this.options.useTransition = utils.hasTransition && this.options.useTransition;\n    this.options.useTransform = utils.hasTransform && this.options.useTransform;\n\n    this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;\n    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\n\n    // If you want eventPassthrough I have to lock one of the axes\n    this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;\n    this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;\n\n    // With eventPassthrough we also need lockDirection mechanism\n    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n\n    this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;\n\n    this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;\n\n    if ( this.options.tap === true ) {\n        this.options.tap = 'tap';\n    }\n\n    if ( this.options.shrinkScrollbars == 'scale' ) {\n        this.options.useTransition = false;\n    }\n\n    this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;\n\n// INSERT POINT: NORMALIZATION\n\n    // Some defaults\n    this.x = 0;\n    this.y = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this._events = {};\n\n// INSERT POINT: DEFAULTS\n\n    this._init();\n    this.refresh();\n\n    this.scrollTo(this.options.startX, this.options.startY);\n    this.enable();\n}\n\nIScroll.prototype = {\n    version: '5.1.3',\n\n    _init: function () {\n        this._initEvents();\n\n        if ( this.options.scrollbars || this.options.indicators ) {\n            this._initIndicators();\n        }\n\n        if ( this.options.mouseWheel ) {\n            this._initWheel();\n        }\n\n        if ( this.options.snap ) {\n            this._initSnap();\n        }\n\n        if ( this.options.keyBindings ) {\n            this._initKeys();\n        }\n\n// INSERT POINT: _init\n\n    },\n\n    destroy: function () {\n        this._initEvents(true);\n\n        this._execEvent('destroy');\n    },\n\n    _transitionEnd: function (e) {\n        if ( e.target != this.scroller || !this.isInTransition ) {\n            return;\n        }\n\n        this._transitionTime();\n        if ( !this.resetPosition(this.options.bounceTime) ) {\n            this.isInTransition = false;\n            this._execEvent('scrollEnd');\n        }\n    },\n\n    _start: function (e) {\n        // React to left mouse button only\n        if ( utils.eventType[e.type] != 1 ) {\n            if ( e.button !== 0 ) {\n                return;\n            }\n        }\n\n        if ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {\n            return;\n        }\n\n        if ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\n            e.preventDefault();\n        }\n\n        var point = e.touches ? e.touches[0] : e,\n            pos;\n\n        this.initiated  = utils.eventType[e.type];\n        this.moved      = false;\n        this.distX      = 0;\n        this.distY      = 0;\n        this.directionX = 0;\n        this.directionY = 0;\n        this.directionLocked = 0;\n\n        this._transitionTime();\n\n        this.startTime = utils.getTime();\n\n        if ( this.options.useTransition && this.isInTransition ) {\n            this.isInTransition = false;\n            pos = this.getComputedPosition();\n            this._translate(Math.round(pos.x), Math.round(pos.y));\n            this._execEvent('scrollEnd');\n        } else if ( !this.options.useTransition && this.isAnimating ) {\n            this.isAnimating = false;\n            this._execEvent('scrollEnd');\n        }\n\n        this.startX    = this.x;\n        this.startY    = this.y;\n        this.absStartX = this.x;\n        this.absStartY = this.y;\n        this.pointX    = point.pageX;\n        this.pointY    = point.pageY;\n\n        this._execEvent('beforeScrollStart');\n    },\n\n    _move: function (e) {\n        if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\n            return;\n        }\n\n        // GOG.com modification, condition clause modified to match the one in the \n        // _start function and correctly detect exceptions where preventDefault should not be executed\n        if ( this.options.preventDefault && this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {    // increases performance on Android? TODO: check!\n            e.preventDefault();\n        }\n\n        var point       = e.touches ? e.touches[0] : e,\n            deltaX      = point.pageX - this.pointX,\n            deltaY      = point.pageY - this.pointY,\n            timestamp   = utils.getTime(),\n            newX, newY,\n            absDistX, absDistY;\n\n        this.pointX     = point.pageX;\n        this.pointY     = point.pageY;\n\n        this.distX      += deltaX;\n        this.distY      += deltaY;\n        absDistX        = Math.abs(this.distX);\n        absDistY        = Math.abs(this.distY);\n\n        // We need to move at least 10 pixels for the scrolling to initiate\n        if ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {\n            return;\n        }\n\n        // If you are scrolling in one direction lock the other\n        if ( !this.directionLocked && !this.options.freeScroll ) {\n            if ( absDistX > absDistY + this.options.directionLockThreshold ) {\n                this.directionLocked = 'h';     // lock horizontally\n            } else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {\n                this.directionLocked = 'v';     // lock vertically\n            } else {\n                this.directionLocked = 'n';     // no lock\n            }\n        }\n\n        if ( this.directionLocked == 'h' ) {\n            if ( this.options.eventPassthrough == 'vertical' ) {\n                e.preventDefault();\n            } else if ( this.options.eventPassthrough == 'horizontal' ) {\n                this.initiated = false;\n                return;\n            }\n\n            deltaY = 0;\n        } else if ( this.directionLocked == 'v' ) {\n            if ( this.options.eventPassthrough == 'horizontal' ) {\n                e.preventDefault();\n            } else if ( this.options.eventPassthrough == 'vertical' ) {\n                this.initiated = false;\n                return;\n            }\n\n            deltaX = 0;\n        }\n\n        deltaX = this.hasHorizontalScroll ? deltaX : 0;\n        deltaY = this.hasVerticalScroll ? deltaY : 0;\n\n        newX = this.x + deltaX;\n        newY = this.y + deltaY;\n\n        // Slow down if outside of the boundaries\n        if ( newX > 0 || newX < this.maxScrollX ) {\n            newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n        }\n        if ( newY > 0 || newY < this.maxScrollY ) {\n            newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n        }\n\n        this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n        this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n        if ( !this.moved ) {\n            this._execEvent('scrollStart');\n        }\n\n        this.moved = true;\n\n        this._translate(newX, newY);\n\n/* REPLACE START: _move */\n\n        if ( timestamp - this.startTime > 300 ) {\n            this.startTime = timestamp;\n            this.startX = this.x;\n            this.startY = this.y;\n        }\n\n/* REPLACE END: _move */\n\n    },\n\n    _end: function (e) {\n        if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\n            return;\n        }\n\n        if ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\n            e.preventDefault();\n        }\n\n        var point = e.changedTouches ? e.changedTouches[0] : e,\n            momentumX,\n            momentumY,\n            duration = utils.getTime() - this.startTime,\n            newX = Math.round(this.x),\n            newY = Math.round(this.y),\n            distanceX = Math.abs(newX - this.startX),\n            distanceY = Math.abs(newY - this.startY),\n            time = 0,\n            easing = '';\n\n        this.isInTransition = 0;\n        this.initiated = 0;\n        this.endTime = utils.getTime();\n\n        // reset if we are outside of the boundaries\n        if ( this.resetPosition(this.options.bounceTime) ) {\n            return;\n        }\n\n        this.scrollTo(newX, newY);  // ensures that the last position is rounded\n\n        // we scrolled less than 10 pixels\n        if ( !this.moved ) {\n            if ( this.options.tap ) {\n                utils.tap(e, this.options.tap);\n            }\n\n            if ( this.options.click ) {\n                utils.click(e);\n            }\n\n            this._execEvent('scrollCancel');\n            return;\n        }\n\n        if ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {\n            this._execEvent('flick');\n            return;\n        }\n\n        // start momentum animation if needed\n        if ( this.options.momentum && duration < 300 ) {\n            momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };\n            momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };\n            newX = momentumX.destination;\n            newY = momentumY.destination;\n            time = Math.max(momentumX.duration, momentumY.duration);\n            this.isInTransition = 1;\n        }\n\n\n        if ( this.options.snap ) {\n            var snap = this._nearestSnap(newX, newY);\n            this.currentPage = snap;\n            time = this.options.snapSpeed || Math.max(\n                    Math.max(\n                        Math.min(Math.abs(newX - snap.x), 1000),\n                        Math.min(Math.abs(newY - snap.y), 1000)\n                    ), 300);\n            newX = snap.x;\n            newY = snap.y;\n\n            this.directionX = 0;\n            this.directionY = 0;\n            easing = this.options.bounceEasing;\n        }\n\n// INSERT POINT: _end\n\n        if ( newX != this.x || newY != this.y ) {\n            // change easing function when scroller goes out of the boundaries\n            if ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {\n                easing = utils.ease.quadratic;\n            }\n\n            this.scrollTo(newX, newY, time, easing);\n            return;\n        }\n\n        this._execEvent('scrollEnd');\n    },\n\n    _resize: function () {\n        var that = this;\n\n        clearTimeout(this.resizeTimeout);\n\n        this.resizeTimeout = setTimeout(function () {\n            that.refresh();\n        }, this.options.resizePolling);\n    },\n\n    resetPosition: function (time) {\n        var x = this.x,\n            y = this.y;\n\n        time = time || 0;\n\n        if ( !this.hasHorizontalScroll || this.x > 0 ) {\n            x = 0;\n        } else if ( this.x < this.maxScrollX ) {\n            x = this.maxScrollX;\n        }\n\n        if ( !this.hasVerticalScroll || this.y > 0 ) {\n            y = 0;\n        } else if ( this.y < this.maxScrollY ) {\n            y = this.maxScrollY;\n        }\n\n        if ( x == this.x && y == this.y ) {\n            return false;\n        }\n\n        this.scrollTo(x, y, time, this.options.bounceEasing);\n\n        return true;\n    },\n\n    disable: function () {\n        this.enabled = false;\n    },\n\n    enable: function () {\n        this.enabled = true;\n    },\n\n    togglePassthrough: function(state) {\n        this.options.letScrollThroughVertically = state;\n    },\n\n    refresh: function () {\n        var rf = this.wrapper.offsetHeight;     // Force reflow\n\n        this.wrapperWidth   = this.wrapper.clientWidth;\n        this.wrapperHeight  = this.wrapper.clientHeight;\n\n/* REPLACE START: refresh */\n\n        this.scrollerWidth  = this.scroller.offsetWidth;\n        this.scrollerHeight = this.scroller.offsetHeight;\n\n        this.maxScrollX     = this.wrapperWidth - this.scrollerWidth;\n        this.maxScrollY     = this.wrapperHeight - this.scrollerHeight;\n\n/* REPLACE END: refresh */\n\n        this.hasHorizontalScroll    = this.options.scrollX && this.maxScrollX < 0;\n        this.hasVerticalScroll      = this.options.scrollY && this.maxScrollY < 0;\n\n        if ( !this.hasHorizontalScroll ) {\n            this.maxScrollX = 0;\n            this.scrollerWidth = this.wrapperWidth;\n        }\n\n        if ( !this.hasVerticalScroll ) {\n            this.maxScrollY = 0;\n            this.scrollerHeight = this.wrapperHeight;\n        }\n\n        this.endTime = 0;\n        this.directionX = 0;\n        this.directionY = 0;\n\n        this.wrapperOffset = utils.offset(this.wrapper);\n\n        this._execEvent('refresh');\n\n        this.resetPosition();\n\n// INSERT POINT: _refresh\n\n    },\n\n    on: function (type, fn) {\n        if ( !this._events[type] ) {\n            this._events[type] = [];\n        }\n\n        this._events[type].push(fn);\n    },\n\n    off: function (type, fn) {\n        if ( !this._events[type] ) {\n            return;\n        }\n\n        var index = this._events[type].indexOf(fn);\n\n        if ( index > -1 ) {\n            this._events[type].splice(index, 1);\n        }\n    },\n\n    _execEvent: function (type) {\n        if ( !this._events[type] ) {\n            return;\n        }\n\n        var i = 0,\n            l = this._events[type].length;\n\n        if ( !l ) {\n            return;\n        }\n\n        for ( ; i < l; i++ ) {\n            this._events[type][i].apply(this, [].slice.call(arguments, 1));\n        }\n    },\n\n    scrollBy: function (x, y, time, easing) {\n        x = this.x + x;\n        y = this.y + y;\n        time = time || 0;\n\n        this.scrollTo(x, y, time, easing);\n    },\n\n    scrollTo: function (x, y, time, easing) {\n        easing = easing || utils.ease.circular;\n\n        this.isInTransition = this.options.useTransition && time > 0;\n\n        if ( !time || (this.options.useTransition && easing.style) ) {\n            this._transitionTimingFunction(easing.style);\n            this._transitionTime(time);\n            this._translate(x, y);\n        } else {\n            this._animate(x, y, time, easing.fn);\n        }\n    },\n\n    scrollToElement: function (el, time, offsetX, offsetY, easing) {\n        el = el.nodeType ? el : this.scroller.querySelector(el);\n\n        if ( !el ) {\n            return;\n        }\n\n        var pos = utils.offset(el);\n\n        pos.left -= this.wrapperOffset.left;\n        pos.top  -= this.wrapperOffset.top;\n\n        // if offsetX/Y are true we center the element to the screen\n        if ( offsetX === true ) {\n            offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\n        }\n        if ( offsetY === true ) {\n            offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\n        }\n\n        pos.left -= offsetX || 0;\n        pos.top  -= offsetY || 0;\n\n        pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n        pos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;\n\n        time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;\n\n        this.scrollTo(pos.left, pos.top, time, easing);\n    },\n\n    _transitionTime: function (time) {\n        time = time || 0;\n\n        this.scrollerStyle[utils.style.transitionDuration] = time + 'ms';\n\n        if ( !time && utils.isBadAndroid ) {\n            this.scrollerStyle[utils.style.transitionDuration] = '0.001s';\n        }\n\n\n        if ( this.indicators ) {\n            for ( var i = this.indicators.length; i--; ) {\n                this.indicators[i].transitionTime(time);\n            }\n        }\n\n\n// INSERT POINT: _transitionTime\n\n    },\n\n    _transitionTimingFunction: function (easing) {\n        this.scrollerStyle[utils.style.transitionTimingFunction] = easing;\n\n\n        if ( this.indicators ) {\n            for ( var i = this.indicators.length; i--; ) {\n                this.indicators[i].transitionTimingFunction(easing);\n            }\n        }\n\n\n// INSERT POINT: _transitionTimingFunction\n\n    },\n\n    _translate: function (x, y) {\n        if ( this.options.useTransform ) {\n\n/* REPLACE START: _translate */\n\n            this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;\n\n/* REPLACE END: _translate */\n\n        } else {\n            x = Math.round(x);\n            y = Math.round(y);\n            this.scrollerStyle.left = x + 'px';\n            this.scrollerStyle.top = y + 'px';\n        }\n\n        this.x = x;\n        this.y = y;\n\n\n    if ( this.indicators ) {\n        for ( var i = this.indicators.length; i--; ) {\n            this.indicators[i].updatePosition();\n        }\n    }\n\n\n// INSERT POINT: _translate\n\n    },\n\n    _initEvents: function (remove) {\n        var eventType = remove ? utils.removeEvent : utils.addEvent,\n            target = this.options.bindToWrapper ? this.wrapper : window;\n\n        eventType(window, 'orientationchange', this);\n        eventType(window, 'resize', this);\n\n        if ( this.options.click ) {\n            eventType(this.wrapper, 'click', this, true);\n        }\n\n        if ( !this.options.disableMouse ) {\n            eventType(this.wrapper, 'mousedown', this);\n            eventType(target, 'mousemove', this);\n            eventType(target, 'mousecancel', this);\n            eventType(target, 'mouseup', this);\n        }\n\n        if ( utils.hasPointer && !this.options.disablePointer ) {\n            eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);\n            eventType(target, utils.prefixPointerEvent('pointermove'), this);\n            eventType(target, utils.prefixPointerEvent('pointercancel'), this);\n            eventType(target, utils.prefixPointerEvent('pointerup'), this);\n        }\n\n        if ( utils.hasTouch && !this.options.disableTouch ) {\n            eventType(this.wrapper, 'touchstart', this);\n            eventType(target, 'touchmove', this);\n            eventType(target, 'touchcancel', this);\n            eventType(target, 'touchend', this);\n        }\n\n        eventType(this.scroller, 'transitionend', this);\n        eventType(this.scroller, 'webkitTransitionEnd', this);\n        eventType(this.scroller, 'oTransitionEnd', this);\n        eventType(this.scroller, 'MSTransitionEnd', this);\n    },\n\n    getComputedPosition: function () {\n        var matrix = window.getComputedStyle(this.scroller, null),\n            x, y;\n\n        if ( this.options.useTransform ) {\n            matrix = matrix[utils.style.transform].split(')')[0].split(', ');\n            x = +(matrix[12] || matrix[4]);\n            y = +(matrix[13] || matrix[5]);\n        } else {\n            x = +matrix.left.replace(/[^-\\d.]/g, '');\n            y = +matrix.top.replace(/[^-\\d.]/g, '');\n        }\n\n        return { x: x, y: y };\n    },\n\n    _initIndicators: function () {\n        var interactive = this.options.interactiveScrollbars,\n            customStyle = typeof this.options.scrollbars != 'string',\n            indicators = [],\n            indicator;\n\n        var that = this;\n\n        this.indicators = [];\n\n        if ( this.options.scrollbars ) {\n            // Vertical scrollbar\n            if ( this.options.scrollY ) {\n                indicator = {\n                    el: createDefaultScrollbar('v', interactive, this.options.scrollbars),\n                    interactive: interactive,\n                    defaultScrollbars: true,\n                    customStyle: customStyle,\n                    resize: this.options.resizeScrollbars,\n                    shrink: this.options.shrinkScrollbars,\n                    fade: this.options.fadeScrollbars,\n                    listenX: false\n                };\n\n                this.wrapper.appendChild(indicator.el);\n                indicators.push(indicator);\n            }\n\n            // Horizontal scrollbar\n            if ( this.options.scrollX ) {\n                indicator = {\n                    el: createDefaultScrollbar('h', interactive, this.options.scrollbars),\n                    interactive: interactive,\n                    defaultScrollbars: true,\n                    customStyle: customStyle,\n                    resize: this.options.resizeScrollbars,\n                    shrink: this.options.shrinkScrollbars,\n                    fade: this.options.fadeScrollbars,\n                    listenY: false\n                };\n\n                this.wrapper.appendChild(indicator.el);\n                indicators.push(indicator);\n            }\n        }\n\n        if ( this.options.indicators ) {\n            // TODO: check concat compatibility\n            indicators = indicators.concat(this.options.indicators);\n        }\n\n        for ( var i = indicators.length; i--; ) {\n            this.indicators.push( new Indicator(this, indicators[i]) );\n        }\n\n        // TODO: check if we can use array.map (wide compatibility and performance issues)\n        function _indicatorsMap (fn) {\n            for ( var i = that.indicators.length; i--; ) {\n                fn.call(that.indicators[i]);\n            }\n        }\n\n        if ( this.options.fadeScrollbars ) {\n            this.on('scrollEnd', function () {\n                _indicatorsMap(function () {\n                    this.fade();\n                });\n            });\n\n            this.on('scrollCancel', function () {\n                _indicatorsMap(function () {\n                    this.fade();\n                });\n            });\n\n            this.on('scrollStart', function () {\n                _indicatorsMap(function () {\n                    this.fade(1);\n                });\n            });\n\n            this.on('beforeScrollStart', function () {\n                _indicatorsMap(function () {\n                    this.fade(1, true);\n                });\n            });\n        }\n\n\n        this.on('refresh', function () {\n            _indicatorsMap(function () {\n                this.refresh();\n            });\n        });\n\n        this.on('destroy', function () {\n            _indicatorsMap(function () {\n                this.destroy();\n            });\n\n            delete this.indicators;\n        });\n    },\n\n    _initWheel: function () {\n        utils.addEvent(this.wrapper, 'wheel', this);\n        utils.addEvent(this.wrapper, 'mousewheel', this);\n        utils.addEvent(this.wrapper, 'DOMMouseScroll', this);\n\n        this.on('destroy', function () {\n            utils.removeEvent(this.wrapper, 'wheel', this);\n            utils.removeEvent(this.wrapper, 'mousewheel', this);\n            utils.removeEvent(this.wrapper, 'DOMMouseScroll', this);\n        });\n    },\n\n    _wheel: function (e) {\n        if ( !this.enabled ) {\n            return;\n        }\n\n        var wheelDeltaX, wheelDeltaY,\n            newX, newY,\n            that = this;\n\n        if ( this.wheelTimeout === undefined ) {\n            that._execEvent('scrollStart');\n        }\n\n        // Execute the scrollEnd event after 400ms the wheel stopped scrolling\n        clearTimeout(this.wheelTimeout);\n        this.wheelTimeout = setTimeout(function () {\n            that._execEvent('scrollEnd');\n            that.wheelTimeout = undefined;\n        }, 400);\n\n        if ( 'deltaX' in e ) {\n            if (e.deltaMode === 1) {\n                wheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;\n                wheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;\n            } else {\n                wheelDeltaX = -e.deltaX;\n                wheelDeltaY = -e.deltaY;\n            }\n        } else if ( 'wheelDeltaX' in e ) {\n            wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;\n            wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;\n        } else if ( 'wheelDelta' in e ) {\n            wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;\n        } else if ( 'detail' in e ) {\n            wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;\n        } else {\n            return;\n        }\n\n        wheelDeltaX *= this.options.invertWheelDirection;\n        wheelDeltaY *= this.options.invertWheelDirection;\n\n        if ( !this.hasVerticalScroll ) {\n            wheelDeltaX = wheelDeltaY;\n            wheelDeltaY = 0;\n        }\n\n        if ( this.options.snap ) {\n            newX = this.currentPage.pageX;\n            newY = this.currentPage.pageY;\n\n            if ( wheelDeltaX > 0 ) {\n                newX--;\n            } else if ( wheelDeltaX < 0 ) {\n                newX++;\n            }\n\n            if ( wheelDeltaY > 0 ) {\n                newY--;\n            } else if ( wheelDeltaY < 0 ) {\n                newY++;\n            }\n\n            this.goToPage(newX, newY);\n\n            return;\n        }\n\n        newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n        newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n\n        if ( newX > 0 ) {\n            newX = 0;\n        } else if ( newX < this.maxScrollX ) {\n            newX = this.maxScrollX;\n        }\n\n        if ( newY > 0 ) {\n            newY = 0;\n        } else if ( newY < this.maxScrollY ) {\n            newY = this.maxScrollY;\n        }\n\n\n        /* All references to preventNativeScroll and letScrollThroughVertically\n           come from GOG.com Team */\n        var preventNativeScroll = true;\n\n        if( this.y <= this.maxScrollY && newY <= this.maxScrollY ) {\n            preventNativeScroll = false;\n        }\n        if( this.y >= 0 && newY >= 0 ) {\n            preventNativeScroll = false;\n        }\n        // Not scrollable\n        if( this.maxScrollY === 0) {\n            preventNativeScroll = false;\n        }\n\n        if( this.options.letScrollThroughVertically !== true || preventNativeScroll ) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        that._execEvent('scrolling');\n\n        this.scrollTo(newX, newY, 0);\n\n// INSERT POINT: _wheel\n    },\n\n    _initSnap: function () {\n        this.currentPage = {};\n\n        if ( typeof this.options.snap == 'string' ) {\n            this.options.snap = this.scroller.querySelectorAll(this.options.snap);\n        }\n\n        this.on('refresh', function () {\n            var i = 0, l,\n                m = 0, n,\n                cx, cy,\n                x = 0, y,\n                stepX = this.options.snapStepX || this.wrapperWidth,\n                stepY = this.options.snapStepY || this.wrapperHeight,\n                el;\n\n            this.pages = [];\n\n            if ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {\n                return;\n            }\n\n            if ( this.options.snap === true ) {\n                cx = Math.round( stepX / 2 );\n                cy = Math.round( stepY / 2 );\n\n                while ( x > -this.scrollerWidth ) {\n                    this.pages[i] = [];\n                    l = 0;\n                    y = 0;\n\n                    while ( y > -this.scrollerHeight ) {\n                        this.pages[i][l] = {\n                            x: Math.max(x, this.maxScrollX),\n                            y: Math.max(y, this.maxScrollY),\n                            width: stepX,\n                            height: stepY,\n                            cx: x - cx,\n                            cy: y - cy\n                        };\n\n                        y -= stepY;\n                        l++;\n                    }\n\n                    x -= stepX;\n                    i++;\n                }\n            } else {\n                el = this.options.snap;\n                l = el.length;\n                n = -1;\n\n                for ( ; i < l; i++ ) {\n                    if ( i === 0 || el[i].offsetLeft <= el[i-1].offsetLeft ) {\n                        m = 0;\n                        n++;\n                    }\n\n                    if ( !this.pages[m] ) {\n                        this.pages[m] = [];\n                    }\n\n                    x = Math.max(-el[i].offsetLeft, this.maxScrollX);\n                    y = Math.max(-el[i].offsetTop, this.maxScrollY);\n                    cx = x - Math.round(el[i].offsetWidth / 2);\n                    cy = y - Math.round(el[i].offsetHeight / 2);\n\n                    this.pages[m][n] = {\n                        x: x,\n                        y: y,\n                        width: el[i].offsetWidth,\n                        height: el[i].offsetHeight,\n                        cx: cx,\n                        cy: cy\n                    };\n\n                    if ( x > this.maxScrollX ) {\n                        m++;\n                    }\n                }\n            }\n\n            this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);\n\n            // Update snap threshold if needed\n            if ( this.options.snapThreshold % 1 === 0 ) {\n                this.snapThresholdX = this.options.snapThreshold;\n                this.snapThresholdY = this.options.snapThreshold;\n            } else {\n                this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);\n                this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);\n            }\n        });\n\n        this.on('flick', function () {\n            var time = this.options.snapSpeed || Math.max(\n                    Math.max(\n                        Math.min(Math.abs(this.x - this.startX), 1000),\n                        Math.min(Math.abs(this.y - this.startY), 1000)\n                    ), 300);\n\n            this.goToPage(\n                this.currentPage.pageX + this.directionX,\n                this.currentPage.pageY + this.directionY,\n                time\n            );\n        });\n    },\n\n    _nearestSnap: function (x, y) {\n        if ( !this.pages.length ) {\n            return { x: 0, y: 0, pageX: 0, pageY: 0 };\n        }\n\n        var i = 0,\n            l = this.pages.length,\n            m = 0;\n\n        // Check if we exceeded the snap threshold\n        if ( Math.abs(x - this.absStartX) < this.snapThresholdX &&\n            Math.abs(y - this.absStartY) < this.snapThresholdY ) {\n            return this.currentPage;\n        }\n\n        if ( x > 0 ) {\n            x = 0;\n        } else if ( x < this.maxScrollX ) {\n            x = this.maxScrollX;\n        }\n\n        if ( y > 0 ) {\n            y = 0;\n        } else if ( y < this.maxScrollY ) {\n            y = this.maxScrollY;\n        }\n\n        for ( ; i < l; i++ ) {\n            if ( x >= this.pages[i][0].cx ) {\n                x = this.pages[i][0].x;\n                break;\n            }\n        }\n\n        l = this.pages[i].length;\n\n        for ( ; m < l; m++ ) {\n            if ( y >= this.pages[0][m].cy ) {\n                y = this.pages[0][m].y;\n                break;\n            }\n        }\n\n        if ( i == this.currentPage.pageX ) {\n            i += this.directionX;\n\n            if ( i < 0 ) {\n                i = 0;\n            } else if ( i >= this.pages.length ) {\n                i = this.pages.length - 1;\n            }\n\n            x = this.pages[i][0].x;\n        }\n\n        if ( m == this.currentPage.pageY ) {\n            m += this.directionY;\n\n            if ( m < 0 ) {\n                m = 0;\n            } else if ( m >= this.pages[0].length ) {\n                m = this.pages[0].length - 1;\n            }\n\n            y = this.pages[0][m].y;\n        }\n\n        return {\n            x: x,\n            y: y,\n            pageX: i,\n            pageY: m\n        };\n    },\n\n    goToPage: function (x, y, time, easing) {\n        easing = easing || this.options.bounceEasing;\n\n        if ( x >= this.pages.length ) {\n            x = this.pages.length - 1;\n        } else if ( x < 0 ) {\n            x = 0;\n        }\n\n        if ( y >= this.pages[x].length ) {\n            y = this.pages[x].length - 1;\n        } else if ( y < 0 ) {\n            y = 0;\n        }\n\n        var posX = this.pages[x][y].x,\n            posY = this.pages[x][y].y;\n\n        time = time === undefined ? this.options.snapSpeed || Math.max(\n            Math.max(\n                Math.min(Math.abs(posX - this.x), 1000),\n                Math.min(Math.abs(posY - this.y), 1000)\n            ), 300) : time;\n\n        this.currentPage = {\n            x: posX,\n            y: posY,\n            pageX: x,\n            pageY: y\n        };\n\n        this.scrollTo(posX, posY, time, easing);\n    },\n\n    next: function (time, easing) {\n        var x = this.currentPage.pageX,\n            y = this.currentPage.pageY;\n\n        x++;\n\n        if ( x >= this.pages.length && this.hasVerticalScroll ) {\n            x = 0;\n            y++;\n        }\n\n        this.goToPage(x, y, time, easing);\n    },\n\n    prev: function (time, easing) {\n        var x = this.currentPage.pageX,\n            y = this.currentPage.pageY;\n\n        x--;\n\n        if ( x < 0 && this.hasVerticalScroll ) {\n            x = 0;\n            y--;\n        }\n\n        this.goToPage(x, y, time, easing);\n    },\n\n    _initKeys: function (e) {\n        // default key bindings\n        var keys = {\n            pageUp: 33,\n            pageDown: 34,\n            end: 35,\n            home: 36,\n            left: 37,\n            up: 38,\n            right: 39,\n            down: 40\n        };\n        var i;\n\n        // if you give me characters I give you keycode\n        if ( typeof this.options.keyBindings == 'object' ) {\n            for ( i in this.options.keyBindings ) {\n                if ( typeof this.options.keyBindings[i] == 'string' ) {\n                    this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);\n                }\n            }\n        } else {\n            this.options.keyBindings = {};\n        }\n\n        for ( i in keys ) {\n            this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];\n        }\n\n        utils.addEvent(window, 'keydown', this);\n\n        this.on('destroy', function () {\n            utils.removeEvent(window, 'keydown', this);\n        });\n    },\n\n    _key: function (e) {\n        if ( !this.enabled ) {\n            return;\n        }\n\n        var snap = this.options.snap,   // we are using this alot, better to cache it\n            newX = snap ? this.currentPage.pageX : this.x,\n            newY = snap ? this.currentPage.pageY : this.y,\n            now = utils.getTime(),\n            prevTime = this.keyTime || 0,\n            acceleration = 0.250,\n            pos;\n\n        if ( this.options.useTransition && this.isInTransition ) {\n            pos = this.getComputedPosition();\n\n            this._translate(Math.round(pos.x), Math.round(pos.y));\n            this.isInTransition = false;\n        }\n\n        this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;\n\n        switch ( e.keyCode ) {\n            case this.options.keyBindings.pageUp:\n                if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\n                    newX += snap ? 1 : this.wrapperWidth;\n                } else {\n                    newY += snap ? 1 : this.wrapperHeight;\n                }\n                break;\n            case this.options.keyBindings.pageDown:\n                if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\n                    newX -= snap ? 1 : this.wrapperWidth;\n                } else {\n                    newY -= snap ? 1 : this.wrapperHeight;\n                }\n                break;\n            case this.options.keyBindings.end:\n                newX = snap ? this.pages.length-1 : this.maxScrollX;\n                newY = snap ? this.pages[0].length-1 : this.maxScrollY;\n                break;\n            case this.options.keyBindings.home:\n                newX = 0;\n                newY = 0;\n                break;\n            case this.options.keyBindings.left:\n                newX += snap ? -1 : 5 + this.keyAcceleration>>0;\n                break;\n            case this.options.keyBindings.up:\n                newY += snap ? 1 : 5 + this.keyAcceleration>>0;\n                break;\n            case this.options.keyBindings.right:\n                newX -= snap ? -1 : 5 + this.keyAcceleration>>0;\n                break;\n            case this.options.keyBindings.down:\n                newY -= snap ? 1 : 5 + this.keyAcceleration>>0;\n                break;\n            default:\n                return;\n        }\n\n        if ( snap ) {\n            this.goToPage(newX, newY);\n            return;\n        }\n\n        if ( newX > 0 ) {\n            newX = 0;\n            this.keyAcceleration = 0;\n        } else if ( newX < this.maxScrollX ) {\n            newX = this.maxScrollX;\n            this.keyAcceleration = 0;\n        }\n\n        if ( newY > 0 ) {\n            newY = 0;\n            this.keyAcceleration = 0;\n        } else if ( newY < this.maxScrollY ) {\n            newY = this.maxScrollY;\n            this.keyAcceleration = 0;\n        }\n\n        this.scrollTo(newX, newY, 0);\n\n        this.keyTime = now;\n    },\n\n    _animate: function (destX, destY, duration, easingFn) {\n        var that = this,\n            startX = this.x,\n            startY = this.y,\n            startTime = utils.getTime(),\n            destTime = startTime + duration;\n\n        function step () {\n            var now = utils.getTime(),\n                newX, newY,\n                easing;\n\n            if ( now >= destTime ) {\n                that.isAnimating = false;\n                that._translate(destX, destY);\n\n                if ( !that.resetPosition(that.options.bounceTime) ) {\n                    that._execEvent('scrollEnd');\n                }\n\n                return;\n            }\n\n            now = ( now - startTime ) / duration;\n            easing = easingFn(now);\n            newX = ( destX - startX ) * easing + startX;\n            newY = ( destY - startY ) * easing + startY;\n            that._translate(newX, newY);\n\n            if ( that.isAnimating ) {\n                rAF(step);\n            }\n        }\n\n        this.isAnimating = true;\n        step();\n    },\n    handleEvent: function (e) {\n        switch ( e.type ) {\n            case 'touchstart':\n            case 'pointerdown':\n            case 'MSPointerDown':\n            case 'mousedown':\n                this._start(e);\n                break;\n            case 'touchmove':\n            case 'pointermove':\n            case 'MSPointerMove':\n            case 'mousemove':\n                this._move(e);\n                break;\n            case 'touchend':\n            case 'pointerup':\n            case 'MSPointerUp':\n            case 'mouseup':\n            case 'touchcancel':\n            case 'pointercancel':\n            case 'MSPointerCancel':\n            case 'mousecancel':\n                this._end(e);\n                break;\n            case 'orientationchange':\n            case 'resize':\n                this._resize();\n                break;\n            case 'transitionend':\n            case 'webkitTransitionEnd':\n            case 'oTransitionEnd':\n            case 'MSTransitionEnd':\n                this._transitionEnd(e);\n                break;\n            case 'wheel':\n            case 'DOMMouseScroll':\n            case 'mousewheel':\n                this._wheel(e);\n                break;\n            case 'keydown':\n                this._key(e);\n                break;\n            case 'click':\n                if ( !e._constructed ) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                break;\n        }\n    }\n};\nfunction createDefaultScrollbar (direction, interactive, type) {\n    var scrollbar = document.createElement('div'),\n        indicator = document.createElement('div');\n\n    if ( type === true ) {\n        scrollbar.style.cssText = 'position:absolute;z-index:9999';\n        indicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';\n    }\n\n    indicator.className = 'iScrollIndicator';\n\n    if ( direction == 'h' ) {\n        if ( type === true ) {\n            scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n            indicator.style.height = '100%';\n        }\n        scrollbar.className = 'iScrollHorizontalScrollbar';\n    } else {\n        if ( type === true ) {\n            scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n            indicator.style.width = '100%';\n        }\n        scrollbar.className = 'iScrollVerticalScrollbar';\n    }\n\n    scrollbar.style.cssText += ';overflow:hidden';\n\n    if ( !interactive ) {\n        scrollbar.style.pointerEvents = 'none';\n    }\n\n    scrollbar.appendChild(indicator);\n\n    return scrollbar;\n}\n\nfunction Indicator (scroller, options) {\n    this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n    this.wrapperStyle = this.wrapper.style;\n    this.indicator = this.wrapper.children[0];\n    this.indicatorStyle = this.indicator.style;\n    this.scroller = scroller;\n\n    this.options = {\n        listenX: true,\n        listenY: true,\n        interactive: false,\n        resize: true,\n        defaultScrollbars: false,\n        shrink: false,\n        fade: false,\n        speedRatioX: 0,\n        speedRatioY: 0\n    };\n\n    for ( var i in options ) {\n        this.options[i] = options[i];\n    }\n\n    this.sizeRatioX = 1;\n    this.sizeRatioY = 1;\n    this.maxPosX = 0;\n    this.maxPosY = 0;\n\n    if ( this.options.interactive ) {\n        if ( !this.options.disableTouch ) {\n            utils.addEvent(this.indicator, 'touchstart', this);\n            utils.addEvent(window, 'touchend', this);\n        }\n        if ( !this.options.disablePointer ) {\n            utils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n            utils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);\n        }\n        if ( !this.options.disableMouse ) {\n            utils.addEvent(this.indicator, 'mousedown', this);\n            utils.addEvent(window, 'mouseup', this);\n        }\n    }\n\n    if ( this.options.fade ) {\n        this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;\n        this.wrapperStyle[utils.style.transitionDuration] = utils.isBadAndroid ? '0.001s' : '0ms';\n        this.wrapperStyle.opacity = '0';\n    }\n}\n\nIndicator.prototype = {\n    handleEvent: function (e) {\n        switch ( e.type ) {\n            case 'touchstart':\n            case 'pointerdown':\n            case 'MSPointerDown':\n            case 'mousedown':\n                this._start(e);\n                break;\n            case 'touchmove':\n            case 'pointermove':\n            case 'MSPointerMove':\n            case 'mousemove':\n                this._move(e);\n                break;\n            case 'touchend':\n            case 'pointerup':\n            case 'MSPointerUp':\n            case 'mouseup':\n            case 'touchcancel':\n            case 'pointercancel':\n            case 'MSPointerCancel':\n            case 'mousecancel':\n                this._end(e);\n                break;\n        }\n    },\n\n    destroy: function () {\n        if ( this.options.interactive ) {\n            utils.removeEvent(this.indicator, 'touchstart', this);\n            utils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n            utils.removeEvent(this.indicator, 'mousedown', this);\n\n            utils.removeEvent(window, 'touchmove', this);\n            utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n            utils.removeEvent(window, 'mousemove', this);\n\n            utils.removeEvent(window, 'touchend', this);\n            utils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);\n            utils.removeEvent(window, 'mouseup', this);\n        }\n\n        if ( this.options.defaultScrollbars ) {\n            this.wrapper.parentNode.removeChild(this.wrapper);\n        }\n    },\n\n    _start: function (e) {\n        var point = e.touches ? e.touches[0] : e;\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.transitionTime();\n\n        this.initiated = true;\n        this.moved = false;\n        this.lastPointX = point.pageX;\n        this.lastPointY = point.pageY;\n\n        this.startTime  = utils.getTime();\n\n        if ( !this.options.disableTouch ) {\n            utils.addEvent(window, 'touchmove', this);\n        }\n        if ( !this.options.disablePointer ) {\n            utils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);\n        }\n        if ( !this.options.disableMouse ) {\n            utils.addEvent(window, 'mousemove', this);\n        }\n\n        this.scroller._execEvent('beforeScrollStart');\n    },\n\n    _move: function (e) {\n        var point = e.touches ? e.touches[0] : e,\n            deltaX, deltaY,\n            newX, newY,\n            timestamp = utils.getTime();\n\n        if ( !this.moved ) {\n            this.scroller._execEvent('scrollStart');\n        }\n\n        this.moved = true;\n\n        deltaX = point.pageX - this.lastPointX;\n        this.lastPointX = point.pageX;\n\n        deltaY = point.pageY - this.lastPointY;\n        this.lastPointY = point.pageY;\n\n        newX = this.x + deltaX;\n        newY = this.y + deltaY;\n\n        this._pos(newX, newY);\n\n// INSERT POINT: indicator._move\n\n        e.preventDefault();\n        e.stopPropagation();\n    },\n\n    _end: function (e) {\n        if ( !this.initiated ) {\n            return;\n        }\n\n        this.initiated = false;\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        utils.removeEvent(window, 'touchmove', this);\n        utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n        utils.removeEvent(window, 'mousemove', this);\n\n        if ( this.scroller.options.snap ) {\n            var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n            var time = this.options.snapSpeed || Math.max(\n                    Math.max(\n                        Math.min(Math.abs(this.scroller.x - snap.x), 1000),\n                        Math.min(Math.abs(this.scroller.y - snap.y), 1000)\n                    ), 300);\n\n            if ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {\n                this.scroller.directionX = 0;\n                this.scroller.directionY = 0;\n                this.scroller.currentPage = snap;\n                this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);\n            }\n        }\n\n        if ( this.moved ) {\n            this.scroller._execEvent('scrollEnd');\n        }\n    },\n\n    transitionTime: function (time) {\n        time = time || 0;\n        this.indicatorStyle[utils.style.transitionDuration] = time + 'ms';\n\n        if ( !time && utils.isBadAndroid ) {\n            this.indicatorStyle[utils.style.transitionDuration] = '0.001s';\n        }\n    },\n\n    transitionTimingFunction: function (easing) {\n        this.indicatorStyle[utils.style.transitionTimingFunction] = easing;\n    },\n\n    refresh: function () {\n        this.transitionTime();\n\n        if ( this.options.listenX && !this.options.listenY ) {\n            this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n        } else if ( this.options.listenY && !this.options.listenX ) {\n            this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n        } else {\n            this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n        }\n\n        if ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {\n            utils.addClass(this.wrapper, 'iScrollBothScrollbars');\n            utils.removeClass(this.wrapper, 'iScrollLoneScrollbar');\n\n            if ( this.options.defaultScrollbars && this.options.customStyle ) {\n                if ( this.options.listenX ) {\n                    this.wrapper.style.right = '8px';\n                } else {\n                    this.wrapper.style.bottom = '8px';\n                }\n            }\n        } else {\n            utils.removeClass(this.wrapper, 'iScrollBothScrollbars');\n            utils.addClass(this.wrapper, 'iScrollLoneScrollbar');\n\n            if ( this.options.defaultScrollbars && this.options.customStyle ) {\n                if ( this.options.listenX ) {\n                    this.wrapper.style.right = '2px';\n                } else {\n                    this.wrapper.style.bottom = '2px';\n                }\n            }\n        }\n\n        var r = this.wrapper.offsetHeight;  // force refresh\n\n        if ( this.options.listenX ) {\n            this.wrapperWidth = this.wrapper.clientWidth;\n            if ( this.options.resize ) {\n                this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n                this.indicatorStyle.width = this.indicatorWidth + 'px';\n            } else {\n                this.indicatorWidth = this.indicator.clientWidth;\n            }\n\n            this.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n            if ( this.options.shrink == 'clip' ) {\n                this.minBoundaryX = -this.indicatorWidth + 8;\n                this.maxBoundaryX = this.wrapperWidth - 8;\n            } else {\n                this.minBoundaryX = 0;\n                this.maxBoundaryX = this.maxPosX;\n            }\n\n            this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\n        }\n\n        if ( this.options.listenY ) {\n            this.wrapperHeight = this.wrapper.clientHeight;\n            if ( this.options.resize ) {\n                this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n                this.indicatorStyle.height = this.indicatorHeight + 'px';\n            } else {\n                this.indicatorHeight = this.indicator.clientHeight;\n            }\n\n            this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n            if ( this.options.shrink == 'clip' ) {\n                this.minBoundaryY = -this.indicatorHeight + 8;\n                this.maxBoundaryY = this.wrapperHeight - 8;\n            } else {\n                this.minBoundaryY = 0;\n                this.maxBoundaryY = this.maxPosY;\n            }\n\n            this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n            this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\n        }\n\n        this.updatePosition();\n    },\n\n    updatePosition: function () {\n        var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n            y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n        if ( !this.options.ignoreBoundaries ) {\n            if ( x < this.minBoundaryX ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.width = Math.max(this.indicatorWidth + x, 8);\n                    this.indicatorStyle.width = this.width + 'px';\n                }\n                x = this.minBoundaryX;\n            } else if ( x > this.maxBoundaryX ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n                    this.indicatorStyle.width = this.width + 'px';\n                    x = this.maxPosX + this.indicatorWidth - this.width;\n                } else {\n                    x = this.maxBoundaryX;\n                }\n            } else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {\n                this.width = this.indicatorWidth;\n                this.indicatorStyle.width = this.width + 'px';\n            }\n\n            if ( y < this.minBoundaryY ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.height = Math.max(this.indicatorHeight + y * 3, 8);\n                    this.indicatorStyle.height = this.height + 'px';\n                }\n                y = this.minBoundaryY;\n            } else if ( y > this.maxBoundaryY ) {\n                if ( this.options.shrink == 'scale' ) {\n                    this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n                    this.indicatorStyle.height = this.height + 'px';\n                    y = this.maxPosY + this.indicatorHeight - this.height;\n                } else {\n                    y = this.maxBoundaryY;\n                }\n            } else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {\n                this.height = this.indicatorHeight;\n                this.indicatorStyle.height = this.height + 'px';\n            }\n        }\n\n        this.x = x;\n        this.y = y;\n\n        if ( this.scroller.options.useTransform ) {\n            this.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;\n        } else {\n            this.indicatorStyle.left = x + 'px';\n            this.indicatorStyle.top = y + 'px';\n        }\n    },\n\n    _pos: function (x, y) {\n        if ( x < 0 ) {\n            x = 0;\n        } else if ( x > this.maxPosX ) {\n            x = this.maxPosX;\n        }\n\n        if ( y < 0 ) {\n            y = 0;\n        } else if ( y > this.maxPosY ) {\n            y = this.maxPosY;\n        }\n\n        x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;\n        y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;\n\n        this.scroller.scrollTo(x, y);\n    },\n\n    fade: function (val, hold) {\n        if ( hold && !this.visible ) {\n            return;\n        }\n\n        clearTimeout(this.fadeTimeout);\n        this.fadeTimeout = null;\n \n        var time = val ? 250 : 500,\n            delay = val ? 0 : 300;\n\n        val = val ? '1' : '0';\n\n        this.wrapperStyle[utils.style.transitionDuration] = time + 'ms';\n\n        this.fadeTimeout = setTimeout((function (val) {\n            this.wrapperStyle.opacity = val;\n            this.visible = +val;\n        }).bind(this, val), delay);\n    }\n};\n\nIScroll.utils = utils;\n\nif ( typeof module != 'undefined' && module.exports ) {\n    module.exports = IScroll;\n} else {\n    window.IScroll = IScroll;\n}\n\n})(window, document, Math);\n"},function(module,exports){var GogIscrollController;gog.directive("gogIscroll",["$timeout","$window","eventDispatcher",function($timeout,$window,eventDispatcher){var scrollOptions;return(scrollOptions={default:{mouseWheel:!0,interactiveScrollbars:!0,shrinkScrollbars:"clip",click:!1,disableMouse:!0,fadeScrollbars:!0,scrollbars:"custom",letScrollThroughVertically:!0,preventDefaultException:{className:/(^|\s)js-prevent-default-exception-iscroll(\s|$)/}}}).productDetails=angular.copy(scrollOptions.default),scrollOptions.productDetails.fadeScrollbars=!1,scrollOptions.dropdownTags=angular.copy(scrollOptions.default),scrollOptions.dropdownTags.gogSetupCondition={onEvent:"mouseover",onClass:"js-init-scroll"},scrollOptions.dropdownTags.fadeScrollbars=!1,scrollOptions.dropdownTags.letScrollThroughVertically=!1,scrollOptions.menu=angular.copy(scrollOptions.default),scrollOptions.menu.letScrollThroughVertically=!0,/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|Mobile/i.test(navigator.userAgent)&&(scrollOptions.menu.click=!1,scrollOptions.menu.tap=!1),scrollOptions.screenshots={scrollX:!0,scrollY:!1,snap:".js-snap-point",click:!0,indicators:{el:document.querySelector(".js-tmb-scrollbar"),interactive:!0,listenX:!0,listenY:!1,resize:!1},mouseWheel:!1,bounce:!1,disableMouse:!1},{restrict:"A",controller:GogIscrollController,link:function(scope,ngElContainer,attrs,gogIscrollController){var activeStateTimeout,cancelRefreshObserver,cancelRestartObserver,elContainer,elForEvent,getNearestElementForCondition,init,initializeOnEvent,initializeScroll,isInitializationConditional,options,refreshGogIscroll,refreshTimeout,removeSetupEventListener,restartGogIscroll,setupConditionalInitialization,setupEvent,tearDownDirective,triggerActiveState,watchForChanges;return elContainer=ngElContainer[0],activeStateTimeout=refreshTimeout=null,"is-active",1e3,elForEvent=null,setupEvent=null,cancelRefreshObserver=null,cancelRestartObserver=null,options=null,init=function(){var optionsId;return optionsId=attrs.gogIscroll||"default",options=scrollOptions[optionsId],null!=attrs.gogIscrollDisablePassthrough&&attrs.$observe("gogIscrollDisablePassthrough",function(disable){return"true"===disable?gogIscrollController.iscrollInstance.togglePassthrough(!1):gogIscrollController.iscrollInstance.togglePassthrough(!0)}),isInitializationConditional()?setupConditionalInitialization():initializeScroll(),scope.$on("$destroy",tearDownDirective)},isInitializationConditional=function(){return Boolean(options.gogSetupCondition)},setupConditionalInitialization=function(){var classOfElementForEvent;return setupEvent=options.gogSetupCondition.onEvent,classOfElementForEvent=options.gogSetupCondition.onClass,(elForEvent=getNearestElementForCondition(elContainer,function(elToCheck){return elToCheck.classList.contains(classOfElementForEvent)})).addEventListener(setupEvent,initializeOnEvent,!1)},getNearestElementForCondition=function(currentElement,isConditionMetFunc){return isConditionMetFunc(currentElement)?currentElement:getNearestElementForCondition(currentElement.parentNode,isConditionMetFunc)},initializeOnEvent=function(){return initializeScroll(),removeSetupEventListener()},initializeScroll=function(){return gogIscrollController.iscrollInstance=new $window.IScroll(elContainer,options),gogIscrollController.callListeners(),elContainer.classList.add("_gog-iscroll"),gogIscrollController.iscrollInstance.on("scrolling",function(){return 0===gogIscrollController.iscrollInstance.y?elContainer.classList.remove("is-moved"):elContainer.classList.add("is-moved")}),gogIscrollController.iscrollInstance.on("scrollEnd",function(){return 0===gogIscrollController.iscrollInstance.y?elContainer.classList.remove("is-moved"):elContainer.classList.add("is-moved")}),gogIscrollController.iscrollInstance.on("scrollStart",function(){return elContainer.classList.add("is-moved")}),watchForChanges()},watchForChanges=function(){return void 0!==attrs.gogIscrollRestart&&(cancelRestartObserver=attrs.$observe("gogIscrollRestart",function(){return $timeout.cancel(refreshTimeout),$timeout(restartGogIscroll,0,!1),triggerActiveState()})),void 0!==attrs.gogIscrollRefresh?cancelRefreshObserver=attrs.$observe("gogIscrollRefresh",function(){return refreshTimeout=$timeout(refreshGogIscroll,0,!1),triggerActiveState()}):refreshTimeout=$timeout(refreshGogIscroll,0,!1)},restartGogIscroll=function(){return refreshGogIscroll(),gogIscrollController.iscrollInstance.scrollTo(0,0)},refreshGogIscroll=function(){gogIscrollController.iscrollInstance.refresh()},triggerActiveState=function(){return $timeout.cancel(activeStateTimeout),ngElContainer.addClass("is-active"),activeStateTimeout=$timeout(function(){return ngElContainer.removeClass("is-active")},1e3,!1)},removeSetupEventListener=function(){return elForEvent.removeEventListener(setupEvent,initializeOnEvent,!1)},tearDownDirective=function(){if(gogIscrollController.iscrollInstance&&(gogIscrollController.iscrollInstance.destroy(),gogIscrollController.iscrollInstance=null),elForEvent&&removeSetupEventListener(),cancelRefreshObserver&&(cancelRefreshObserver(),cancelRefreshObserver=null),cancelRestartObserver)return cancelRestartObserver(),cancelRestartObserver=null},init()}}}]),GogIscrollController=function(){function GogIscrollController(_listenersManager){this._listenersManager=_listenersManager,this._listeners=this._listenersManager.getManager()}return GogIscrollController.iscrollInstance=null,GogIscrollController.$inject=["listenersManager"],GogIscrollController.prototype.registerListener=function(listener){return this._listeners.addListener(listener)},GogIscrollController.prototype.callListeners=function(){return this._listeners.callListeners()},GogIscrollController}(),gog.directive("gogIscrollResetScroll",function(){return{restrict:"A",link:function(scope,ngElIscroll,attrs,gogIscrollCtrl){var cancelAttrObserver,init,onScrollResetConditionChange,tearDownDirective;return cancelAttrObserver=angular.noop,init=function(){return cancelAttrObserver=attrs.$observe("gogIscrollResetScroll",onScrollResetConditionChange),ngElIscroll.on("$destroy",tearDownDirective)},onScrollResetConditionChange=function(isResetNeeded){if(angular.fromJson(isResetNeeded)&&gogIscrollCtrl.iscrollInstance)return gogIscrollCtrl.iscrollInstance.scrollTo(0,0)},tearDownDirective=function(){return cancelAttrObserver(),cancelAttrObserver=null},init()},require:"gogIscroll"}})},function(module,exports){var GogIscrollToResult;GogIscrollToResult=function(){function GogIscrollToResult(_menuSearch,_gogIscrollController){this._menuSearch=_menuSearch,this._gogIscrollController=_gogIscrollController,this._prevIndex=0,this._gogIscrollController.registerListener(this._onScrollReady.bind(this))}return GogIscrollToResult.prototype._onScrollReady=function(){return this._menuSearch.registerSelectedResultListener(this._setIndex.bind(this))},GogIscrollToResult.prototype._setIndex=function(){if(-1!==this._menuSearch.selectedResultIndex)return this._prevIndex<this._menuSearch.selectedResultIndex?this._menuSearch.selectedResultIndex%5||this._scrollToResult(this._menuSearch.selectedResultIndex):this._prevIndex>this._menuSearch.selectedResultIndex&&((this._menuSearch.resultsCount-1-this._menuSearch.selectedResultIndex)%5||(this._menuSearch.selectedResultIndex-5<0?this._scrollToResult(0):this._scrollToResult(this._menuSearch.selectedResultIndex-5))),0===this._prevIndex&&this._menuSearch.selectedResultIndex===this._menuSearch.resultsCount-1?this._scrollToResult(this._menuSearch.resultsCount-1):this._prevIndex===this._menuSearch.resultsCount-1&&0===this._menuSearch.selectedResultIndex&&this._scrollToResult(0),this._prevIndex=this._menuSearch.selectedResultIndex},GogIscrollToResult.prototype._scrollToResult=function(index){var elementToScroll;return elementToScroll=this._gogIscrollController.iscrollInstance.scroller.querySelectorAll(".js-focusable-element")[index],this._gogIscrollController.iscrollInstance.scrollToElement(elementToScroll)},GogIscrollToResult}(),gog.directive("gogIscrollToResult",function(menuSearch){return{restrict:"A",require:"^gogIscroll",link:function(scope,ngElement,attrs,gogIscrollController){return new GogIscrollToResult(menuSearch,gogIscrollController)},scope:!0}})},function(module,exports){var NotificationsService;NotificationsService=function(){function NotificationsService(listenersManager,dataRepository,userEvents,_user,eventDispatcher){this._user=_user,this._friendRequests=0,this._friendRequestsListeners=listenersManager.getManager(),this.registerFriendRequestsListener=this._registerListenerForListeners.bind(this,this._friendRequestsListeners,"_friendRequests"),this.callFriendRequestsListeners=this._callListenersWithValueOfAttribute.bind(this,this._friendRequestsListeners,"_friendRequests"),this._chatMessages=0,this._friendRequestsListeners=listenersManager.getManager(),this._chatMessagesListeners=listenersManager.getManager(),this.registerChatMessagesListener=this._registerListenerForListeners.bind(this,this._chatMessagesListeners,"_chatMessages"),this.callChatMessagesListeners=this._callListenersWithValueOfAttribute.bind(this,this._chatMessagesListeners,"_chatMessages"),this._productUpdates=0,this._productUpdatesListeners=listenersManager.getManager(),this.registerProductUpdatesListener=this._registerListenerForListeners.bind(this,this._productUpdatesListeners,"_productUpdates"),this.callProductUpdatesListeners=this._callListenersWithValueOfAttribute.bind(this,this._productUpdatesListeners,"_productUpdates"),this._forumUpdates=0,this._productUpdatesListeners=listenersManager.getManager(),this._forumUpdatesListeners=listenersManager.getManager(),this.registerForumUpdatesListener=this._registerListenerForListeners.bind(this,this._forumUpdatesListeners,"_forumUpdates"),this.callForumUpdatesListeners=this._callListenersWithValueOfAttribute.bind(this,this._forumUpdatesListeners,"_forumUpdates"),this._total=0,this._totalListeners=listenersManager.getManager(),this.registerTotalListener=this._registerListenerForListeners.bind(this,this._totalListeners,"_total"),this.callTotalListeners=this._callListenersWithValueOfAttribute.bind(this,this._totalListeners,"_total"),dataRepository.registerUserListener(this._updateUserNotifications.bind(this)),eventDispatcher.on(userEvents.friend.accept.error,this._increaseFriendRequests.bind(this)),eventDispatcher.on(userEvents.friend.decline.error,this._increaseFriendRequests.bind(this)),eventDispatcher.on(userEvents.friend.accept.initiated,this._decreaseFriendRequests.bind(this)),eventDispatcher.on(userEvents.friend.decline.initiated,this._decreaseFriendRequests.bind(this)),this._updateNotificationsWithCachedData()}return NotificationsService.$inject=["listenersManager","dataRepository","userEvents","user","eventDispatcher"],NotificationsService.prototype._updateNotificationsWithCachedData=function(){var cachedData;return cachedData={updates:this._user.getUpdates()},this._updateUserNotifications(cachedData)},NotificationsService.prototype._registerListenerForListeners=function(listeners,attributeName,newListener){return newListener(this[attributeName]),listeners.addListener(newListener)},NotificationsService.prototype._callListenersWithValueOfAttribute=function(listeners,attributeName){return listeners.callListeners(this[attributeName])},NotificationsService.prototype._updateUserNotifications=function(userData){var updates;return updates=userData.updates,this._friendRequests=updates.pendingFriendRequests||0,this._chatMessages=updates.unreadChatMessages||0,this._productUpdates=updates.products||0,this._forumUpdates=updates.forum||0,this._total=updates.total||0,this.callFriendRequestsListeners(),this.callChatMessagesListeners(),this.callProductUpdatesListeners(),this.callForumUpdatesListeners(),this.callTotalListeners()},NotificationsService.prototype._decreaseFriendRequests=function(){return this._friendRequests-=1,this._total-=1,this.callFriendRequestsListeners(),this.callTotalListeners()},NotificationsService.prototype._increaseFriendRequests=function(){return this._friendRequests+=1,this._total+=1,this.callFriendRequestsListeners(),this.callTotalListeners()},NotificationsService}(),gog.service("notifications",NotificationsService)},function(module,exports){gog.run(["user","$window",function(user,$window){return $window.dataLayer.push({logginState:user.isLoggedIn(),userId:user.getId()||""})}])},function(module,exports){gog.run(["$window","user",function($window,user){var dataToPush;return dataToPush=null!=user.getSelectedCurrency()?{currDrop:user.getSelectedCurrency().code.toUpperCase()}:{currDrop:"NA"},$window.dataLayer.push(dataToPush)}])},function(module,exports){!function(){var message,styleText;try{if(window.gogData.hasOwnProperty("env")&&"dev"!==window.gogData.env&&"legacy_dev"!==window.gogData.env&&window.gogData.hasOwnProperty("mode")&&"native"===window.gogData.mode)styleText="color: white; background: black;",message="                                                                              \n                                                                              \n      ;GOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMMMMMM,     \n     ;GOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM:    \n     xGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM;    \n     xGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM;    \n     xGOGCOMMMAGlllllllllGGGOGCOMGGlllllllllGAGOGCOMGllllllllllGGOGCOMMMM;    \n     xGOGCOMM:             :GMMA:             :AMMx              lGOGCOMM;    \n     xGOGCOMA    :galaxy.   lMMl    :galaxy    AMM,   :galaxy;    GOGCOMM;    \n     xGOGCOMA   ,GOGCOMMG   lMMl   xGOGCOMM;   AMM,   AGOGCOMM.   GOGCOMM;    \n     xGOGCOMA   ,GOGCOMMG   lMMl   xGOGCOMM;   AMM,   AGOGCOMM.   GOGCOMM;    \n     xGOGCOMA   ,GOGCOMMG   lMMl   xGOGCOMM;   AMM,   AGOGCOMM.   GOGCOMM;    \n     xGOGCOMA    ,lllllMG   lMMl    llllll;    AMM,   .llllxMM.   GOGCOMM;    \n     xGOGCOMM,        yMG   lMMA,             ,MMMg,       ,MM.   GOGCOMM;    \n     xGOGCOMGOGCOMGOGCOMG   lGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMMMM.   GOGCOMM;    \n     xGOGCOMGOGCOMGOGCOMG   lGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMMMM.   GOGCOMM;    \n     xGOGCOMA,              xGOGCOMGOGCOMGOGCOMGOG,              .GOGCOMM;    \n     xGOGCOMA,,,,,,,,,,,,,,lGOGCOMGOGCOMGOGCOMGOGC,,,,,,,,,,,,,,lGOGCOMMM;    \n     xGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM;    \n     xGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM;    \n     xGOGCOMM:           ,MMM              .MMM;                  GOGCOMM;    \n     xGOGCOMA    :xxgalaxyMMA    :gaaxy;    AMM.   :xx;    lxx.   GOGCOMM;    \n     xGOGCOMA   ,GOGCOMGOGCOA   gGOGCOMM:   AMM.   6C74   GOGM,   GOGCOMM;    \n     xGOGCOMA   ,GOGCOMGOGCOA   gGOGCOMM:   AMM.   28B4   GOGM,   GOGCOMM;    \n     xGOGCOMA   ,GOGCOMGOGCOA   gGOGCOMM:   AMM.   2822   GOGM,   GOGCOMM;    \n     xGOGCOMA    l^^^^^^^xMMA    ^^^^^^;    AMM.   79A5   GOGM,   GOGCOMM;    \n     xGOGCOMM,           ,GOG              .GOG.   C31C   GOGM,   GOGCOMM;    \n     xGOGCOMMMMGGGGGGGGGGGMMMMAGGGGGGGGGGGMMMMMGGGGMMMAGGGMMMMGGGGGOGCOMM;    \n     xGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM;    \n     xGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM;    \n     ;GOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMM,    \n      :GOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMGOGCOMMMMG:      \n                                                                              \n                                                                              \n     Your career is loading at https://www.gog.com/work                       \n                                                                              \n                                                                              ",navigator.userAgent.match(/Safari/)&&!navigator.userAgent.match(/Chrome/)?styleText+=" border-bottom:1px solid black;font-family:monospace;":navigator.userAgent.match(/Firefox/)&&(message=message.substring(1,message.length-1)),console.log("%c"+message,styleText)}catch(error){}}()},function(module,exports){var ProductStateComponent;ProductStateComponent=function(){function ProductStateComponent(element,$attrs,_$window){if(this._$window=_$window,this._el=element.querySelector(ProductStateComponent.NODE_SELECTOR)||element,this._listeners={},this._product=null,this._updateStateListenerBound=this._updateStateListener.bind(this),this._stateOverrides={},null!=$attrs[ProductStateComponent.ATTR_OVERRIDE])try{this._stateOverrides=JSON.parse($attrs[ProductStateComponent.ATTR_OVERRIDE])}catch(error1){error1,this._stateOverrides={}}}return ProductStateComponent.NODE_SELECTOR=".js-product-state",ProductStateComponent.ATTR_OVERRIDE="gogProductStateOverride",ProductStateComponent.CLASSNAME={HAS_CARD:"product-row--has-card",IS_OWNED:"is-owned",IS_FREE:"is-free",IS_BUYABLE:"is-buyable",IS_PREORDER:"is-preorder",IS_DISCOUNTED:"is-discounted",IS_TBA:"is-tba",IS_WISHLISTED:"is-wishlisted",IS_IN_CART:"is-in-cart",IS_PRICE_BTN_HIDDEN:"is-price-btn-hidden"},ProductStateComponent.OBSERVED_ATTRIBUTES=["isOwned","isWishlisted","inCart","price"],ProductStateComponent.prototype.setProduct=function(product){this._product=product,this._destroyListeners(),this._initListener(),this._updateState()},ProductStateComponent.prototype.destroy=function(){this._destroyListeners()},ProductStateComponent.prototype._getStateCondition=function(className,defaultCondition){var condition;return condition=defaultCondition,null!=this._stateOverrides[className]&&(condition=this._stateOverrides[className]),condition},ProductStateComponent.prototype._getStateIsBuyable=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_BUYABLE,this._product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_BUYABLE]},ProductStateComponent.prototype._getStateIsPreorder=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_PREORDER,!this._product.isOwned&&this._product.isComingSoon&&this._product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_PREORDER]},ProductStateComponent.prototype._getStateIsOwned=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_OWNED,this._product.isOwned),ProductStateComponent.CLASSNAME.IS_OWNED]},ProductStateComponent.prototype._getStateIsTba=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_TBA,!this._product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_TBA]},ProductStateComponent.prototype._getStateIsWishlisted=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_WISHLISTED,this._product.isWishlisted),ProductStateComponent.CLASSNAME.IS_WISHLISTED]},ProductStateComponent.prototype._getStateIsInCart=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_IN_CART,this._product.inCart),ProductStateComponent.CLASSNAME.IS_IN_CART]},ProductStateComponent.prototype._getStateIsDiscounted=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_DISCOUNTED,null!=this._product.price&&this._product.price.isDiscounted),ProductStateComponent.CLASSNAME.IS_DISCOUNTED]},ProductStateComponent.prototype._getStateIsFree=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_FREE,null!=this._product.price&&this._product.price.isFree&&this._product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_FREE]},ProductStateComponent.prototype._getStateIsPriceBtnHidden=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.IS_PRICE_BTN_HIDDEN,null==this._product.price),ProductStateComponent.CLASSNAME.IS_PRICE_BTN_HIDDEN]},ProductStateComponent.prototype._getStateHasCard=function(){return[this._getStateCondition(ProductStateComponent.CLASSNAME.HAS_CARD,this._product.url),ProductStateComponent.CLASSNAME.HAS_CARD]},ProductStateComponent.prototype._getStateConditions=function(observedAttribute){switch(observedAttribute){case ProductStateComponent.OBSERVED_ATTRIBUTES[0]:return[this._getStateIsOwned()];case ProductStateComponent.OBSERVED_ATTRIBUTES[1]:return[this._getStateIsWishlisted()];case ProductStateComponent.OBSERVED_ATTRIBUTES[2]:return[this._getStateIsInCart()];case ProductStateComponent.OBSERVED_ATTRIBUTES[3]:return[this._getStateIsDiscounted(),this._getStateIsFree(),this._getStateIsPriceBtnHidden()];default:return[this._getStateHasCard(),this._getStateIsOwned(),this._getStateIsDiscounted(),this._getStateIsFree(),this._getStateIsInCart(),this._getStateIsBuyable(),this._getStateIsPreorder(),this._getStateIsWishlisted(),this._getStateIsTba(),this._getStateIsPriceBtnHidden()]}},ProductStateComponent.prototype._initListener=function(){var i,len,observedAttribute,ref;for(this._destroyListeners(),i=0,len=(ref=ProductStateComponent.OBSERVED_ATTRIBUTES).length;i<len;i++)observedAttribute=ref[i],this._listeners[observedAttribute]=this._product.onAttributeChange(observedAttribute,this._updateStateListenerBound(observedAttribute))},ProductStateComponent.prototype._destroyListeners=function(){var i,len,ref;for(i=0,len=(ref=this._listeners).length;i<len;i++)(0,ref[i])()},ProductStateComponent.prototype._updateStateListener=function(observedAttribute){return this._updateState.bind(this,observedAttribute)},ProductStateComponent.prototype._updateState=function(observedAttribute){var i,len,ref,results,state;for(results=[],i=0,len=(ref=this._getStateConditions(observedAttribute)).length;i<len;i++)(state=ref[i])[0]?results.push(this._el.classList.add(state[1])):results.push(this._el.classList.remove(state[1]));return results},ProductStateComponent}(),gog.factory("productStateFactory",function(){return{getForElement:function(element,$attrs,$window){return new ProductStateComponent(element,$attrs,$window)}}})},function(module,exports){gog.factory("badgeFactory",["badges","Badge",function(badges,Badge){var BadgeComponent;return BadgeComponent=function(){function BadgeComponent(_element,productId){this._element=_element,badges.areBadgesActive?(this._ngElement=angular.element(this._element),angular.isDefined(productId)&&this.setProductId(productId)):this._dontActivateComponent()}return BadgeComponent.BADGE_CLASS="js-product-badge",BadgeComponent.BADGE_TEXT_CLASS="js-product-badge-text",BadgeComponent.BADGE_ACTIVE_CLASS="is-badged",BadgeComponent.BADGE_BASE_CLASS="badge-generic__badge",BadgeComponent.prototype.setProductId=function(productId){var elBadge,myBadge,previousModifierClass;if(null!==(myBadge=this._getBadgeForProductId(productId))){if(!(null!=this._elBadge)){if(null==(elBadge=this._getBadgeElement(this._element)))return void this._dontActivateComponent();if(this._elBadge=elBadge,this._ngElBadge=angular.element(this._elBadge),this._elBadgeText=this._getBadgeTextElement(this._elBadge),null==this._elBadgeText)throw"Badge doesn't have marked text element inside."}return previousModifierClass=this._currentModifierClass,this._currentModifierClass=BadgeComponent.BADGE_BASE_CLASS+"--",this._currentModifierClass+=myBadge.slug.replace(/_/g,"-"),this._currentModifierClass!==previousModifierClass&&(null!=previousModifierClass&&this._ngElBadge.removeClass(previousModifierClass),this._ngElBadge.addClass(this._currentModifierClass)),this._elBadgeText.textContent=myBadge.label,this._setBadged()}this._unsetBadged()},BadgeComponent.prototype.destroy=angular.noop,BadgeComponent.prototype._dontActivateComponent=function(){return this._isWorkingAsStub=!0,this._ngElement=this._element=null,this.setProductId=angular.noop},BadgeComponent.prototype._getBadgeForProductId=function(productId){var badge;if(null===(badge=badges.getForProductId(productId)))return null;if(!(badge instanceof Badge))throw"Badge for product "+productId+" was not Badge type.";return badge},BadgeComponent.prototype._getBadgeElement=function(element){var foundChild;return null!=(foundChild=element.querySelector("."+BadgeComponent.BADGE_CLASS))?foundChild:-1!==element.className.indexOf(BadgeComponent.BADGE_CLASS)?element:void 0},BadgeComponent.prototype._getBadgeTextElement=function(element){return element.querySelector("."+BadgeComponent.BADGE_TEXT_CLASS)},BadgeComponent.prototype._setBadged=function(){return this._ngElement.addClass("is-badged")},BadgeComponent.prototype._unsetBadged=function(){return this._ngElement.removeClass("is-badged")},BadgeComponent}(),{getForElement:function(element,productId){return new BadgeComponent(element,productId)}}}])},function(module,exports){var BadgesService;BadgesService=function(){function BadgesService($window,_Badge){var badgesRawData;this._Badge=_Badge,badgesRawData=$window.gogData.badges,this._badgesActive=angular.isObject(badgesRawData)&&Object.keys(badgesRawData).length>0,this._badgesActive&&(this._badgesData=this._processBadgesData(badgesRawData),0===this._badgesData.length&&(this._badgesActive=!1))}return BadgesService.$inject=["$window","Badge"],BadgesService.prototype.areBadgesActive=function(){return this._badgesActive},BadgesService.prototype.getForProductId=function(productId){var badgeData,i,j,len,len1,ref,ref1;if(!this._badgesActive)return null;for(i=0,len=(ref=this._badgesData).length;i<len;i++)for(j=0,len1=(ref1=(badgeData=ref[i]).productIds).length;j<len1;j++)if(ref1[j]===productId)return badgeData.badge;return null},BadgesService.prototype._processBadgesData=function(rawData){var badgeData,badgeObj,badgeSlug,badgesData;for(badgeSlug in badgesData=[],rawData)badgeData=rawData[badgeSlug],angular.isArray(badgeData.productIds)&&badgeData.productIds.length&&(badgeObj=new this._Badge(badgeSlug,badgeData.label),badgesData.push({badge:badgeObj,productIds:badgeData.productIds}));return badgesData},BadgesService}(),gog.service("badges",BadgesService)},function(module,exports){gog.factory("Badge",function(){return function(){return function(slug,label){this.slug=slug,this.label=label}}()})},function(module,exports){var ProductOsSupport;ProductOsSupport=function(){function ProductOsSupport(_element){this._element=_element,this._product,this._labelMovie="",this._elOsSupport=this._element.querySelector("."+ProductOsSupport.NODE_SELECTOR)}return ProductOsSupport.OS={WIN:"Windows",MAC:"Mac",LINUX:"Linux"},ProductOsSupport.NODE_SELECTOR="js-os-support",ProductOsSupport.DEFAULT_PLACEHOLDER=" ",ProductOsSupport.CLASSNAME={HAS_WIN_SUPPORT:"has-win-support",HAS_MAC_SUPPORT:"has-mac-support",HAS_LINUX_SUPPORT:"has-linux-support",IS_MOVIE:"is-movie"},ProductOsSupport.prototype.setProduct=function(product){this._elOsSupport&&(this._product=product,this._updateState())},ProductOsSupport.prototype._getWinSupport=function(){return[this._product.isGame&&this._product.worksOn[ProductOsSupport.OS.WIN],ProductOsSupport.CLASSNAME.HAS_WIN_SUPPORT]},ProductOsSupport.prototype._getMacSupport=function(){return[this._product.isGame&&this._product.worksOn[ProductOsSupport.OS.MAC],ProductOsSupport.CLASSNAME.HAS_MAC_SUPPORT]},ProductOsSupport.prototype._getLinuxSupport=function(){return[this._product.isGame&&this._product.worksOn[ProductOsSupport.OS.LINUX],ProductOsSupport.CLASSNAME.HAS_LINUX_SUPPORT]},ProductOsSupport.prototype._getIsMovie=function(){return[this._product.isMovie,ProductOsSupport.CLASSNAME.IS_MOVIE]},ProductOsSupport.prototype._getState=function(){return[this._getWinSupport(),this._getMacSupport(),this._getLinuxSupport(),this._getIsMovie()]},ProductOsSupport.prototype._updateState=function(){var i,len,ref,state;for(i=0,len=(ref=this._getState()).length;i<len;i++)(state=ref[i])[0]?this._elOsSupport.classList.add(state[1]):this._elOsSupport.classList.remove(state[1])},ProductOsSupport}(),gog.factory("productOsSupportFactory",function(){return{getForElement:function(element){return new ProductOsSupport(element)}}})},function(module,exports,__webpack_require__){__webpack_require__(0)(__webpack_require__(79))},function(module,exports){module.exports='/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module[\'default\']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, \'a\', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = "";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\nObject.defineProperty(exports, "__esModule", { value: true });\nvar angular = __webpack_require__(1);\nangular.module("gogModuleGalaxyAccounts", ["gogModuleListenersManager"]);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = angular;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\nObject.defineProperty(exports, "__esModule", { value: true });\nvar angular = __webpack_require__(1);\nvar GalaxyAccountsService = /** @class */ (function () {\n    function GalaxyAccountsService($window, listenersManager) {\n        this.$window = $window;\n        this.externalFlowListeners = listenersManager.getManager();\n        this.openingListeners = listenersManager.getManager();\n        if (typeof this.$window.galaxyAccounts !== "object") {\n            throw new Error("Original galaxyAccounts client not found by GalaxyAccountsService");\n        }\n    }\n    GalaxyAccountsService.prototype.open = function () {\n        this.$window.galaxyAccounts.open();\n        this.addExternalProviderCallback();\n        this.callOpeningListeners();\n    };\n    GalaxyAccountsService.prototype.openLoginForm = function () {\n        this.$window.galaxyAccounts.openLoginForm();\n        this.addExternalProviderCallback();\n        this.callOpeningListeners();\n    };\n    GalaxyAccountsService.prototype.openRegistrationForm = function () {\n        this.$window.galaxyAccounts.openRegistrationForm();\n        this.addExternalProviderCallback();\n        this.callOpeningListeners();\n    };\n    GalaxyAccountsService.prototype.registerExternalFlowListener = function (callback) {\n        return this.externalFlowListeners.addListener(callback);\n    };\n    GalaxyAccountsService.prototype.registerOpeningListener = function (callback) {\n        return this.openingListeners.addListener(callback);\n    };\n    GalaxyAccountsService.prototype.openInfoBar = function () {\n        this.$window.galaxyAccounts.openInfoBar();\n    };\n    GalaxyAccountsService.prototype.close = function () {\n        this.$window.galaxyAccounts.close();\n    };\n    GalaxyAccountsService.prototype.closeInfoBar = function () {\n        this.$window.galaxyAccounts.closeInfoBar();\n    };\n    GalaxyAccountsService.prototype.openAccount = function () {\n        this.$window.galaxyAccounts.openAccount();\n    };\n    GalaxyAccountsService.prototype.openAvatarChange = function (changeCallback, finishCallback) {\n        this.$window.galaxyAccounts.openAvatarChange(changeCallback, finishCallback);\n    };\n    GalaxyAccountsService.prototype.openEmailChange = function (changeCallback, finishCallback) {\n        this.$window.galaxyAccounts.openEmailChange(changeCallback, finishCallback);\n    };\n    GalaxyAccountsService.prototype.openPasswordChange = function (changeCallback, finishCallback) {\n        this.$window.galaxyAccounts.openPasswordChange(changeCallback, finishCallback);\n    };\n    GalaxyAccountsService.prototype.openTwoStepDisable = function (changeCallback, finishCallback) {\n        this.$window.galaxyAccounts.openTwoStepDisable(changeCallback, finishCallback);\n    };\n    GalaxyAccountsService.prototype.openTwoStepEnable = function (changeCallback, finishCallback) {\n        this.$window.galaxyAccounts.openTwoStepEnable(changeCallback, finishCallback);\n    };\n    GalaxyAccountsService.prototype.callExternalFlowListeners = function (data) {\n        this.externalFlowListeners.callListeners(data);\n    };\n    GalaxyAccountsService.prototype.callOpeningListeners = function () {\n        this.openingListeners.callListeners();\n    };\n    GalaxyAccountsService.prototype.addExternalProviderCallback = function () {\n        this.$window.galaxyAccounts.onExternalProviderFlow(this.callExternalFlowListeners.bind(this));\n    };\n    GalaxyAccountsService.$inject = ["$window", "listenersManager"];\n    return GalaxyAccountsService;\n}());\nexports.default = GalaxyAccountsService;\nangular.module("gogModuleGalaxyAccounts").service(\'galaxyAccounts\', GalaxyAccountsService);\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(4);\n__webpack_require__(0);\nmodule.exports = __webpack_require__(2);\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n/// <reference path="../../node_modules/gog-module-listeners-manager/dist/index.d.ts" />\nObject.defineProperty(exports, "__esModule", { value: true });\n__webpack_require__(5);\n__webpack_require__(0);\n__webpack_require__(2);\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module[\'default\']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, \'a\', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = "";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\nObject.defineProperty(exports, "__esModule", { value: true });\nvar listenersManager_1 = __webpack_require__(2);\nangular.module("gogModuleListenersManager", []).factory("listenersManager", function () {\n    // factory interface\n    return {\n        getManager: function () {\n            return new listenersManager_1.ListenersManager();\n        }\n    };\n});\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\nObject.defineProperty(exports, "__esModule", { value: true });\nvar ListenersManager = /** @class */ (function () {\n    function ListenersManager() {\n        this.numberOfListeners = 0;\n        this.listeners = [];\n        // array of bools with the same size as _listeners.  Each bool\n        // represents whether the corresponding listener is a singleShot\n        // listener.\n        this.isSingleShot = [];\n        this.stateListeners = [];\n        this.isActive = false;\n    }\n    ListenersManager.prototype.addListener = function (newListener) {\n        this.numberOfListeners = this.listeners.push(newListener);\n        this.isSingleShot.push(false);\n        this.updateState(true);\n        return this.createCancelFunction(newListener);\n    };\n    ListenersManager.prototype.addSingleShotListener = function (newListener) {\n        this.numberOfListeners = this.listeners.push(newListener);\n        this.isSingleShot.push(true);\n        this.updateState(true);\n        return this.createCancelFunction(newListener);\n    };\n    ListenersManager.prototype.callListeners = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this.isActive) {\n            return;\n        }\n        // We copy the arrays in case of any listener adding, or\n        // removing another listener. (not modifying array while looping)\n        var listenersToLoop = this.listeners.slice();\n        var isSingleShotInTheLoop = this.isSingleShot.slice();\n        var numberOfListenersToLoop = this.numberOfListeners;\n        var singleShotListenersToRemove = [];\n        var listenersToRemoveCount = 0;\n        // Call all the listeners\n        var i;\n        for (i = 0; i < numberOfListenersToLoop; i++) {\n            listenersToLoop[i].apply(null, args);\n            // Collect all single shot listeners to remove them\n            if (isSingleShotInTheLoop[i]) {\n                listenersToRemoveCount = singleShotListenersToRemove.push(listenersToLoop[i]);\n            }\n        }\n        // Removing all single shot listeners that were in the loop\n        if (listenersToRemoveCount > 0) {\n            for (i = 0; i < listenersToRemoveCount; i++) {\n                var listenerIndex = this.listeners.indexOf(singleShotListenersToRemove[i]);\n                if (listenerIndex !== -1) {\n                    this.isSingleShot.splice(listenerIndex, 1);\n                    this.listeners.splice(listenerIndex, 1);\n                }\n            }\n            this.numberOfListeners = this.listeners.length;\n            this.updateState(this.numberOfListeners > 0);\n        }\n    };\n    ListenersManager.prototype.onStateChange = function (stateListener) {\n        this.stateListeners.push(stateListener);\n    };\n    ListenersManager.prototype.createCancelFunction = function (listenerToCancel) {\n        var _this = this;\n        return function () {\n            _this.afterCancel(listenerToCancel);\n            listenerToCancel = null;\n        };\n    };\n    ListenersManager.prototype.afterCancel = function (listenerToRemove) {\n        var listenerIndex = this.listeners.indexOf(listenerToRemove);\n        if (listenerIndex !== -1) {\n            this.listeners.splice(listenerIndex, 1);\n            this.isSingleShot.splice(listenerIndex, 1);\n            this.numberOfListeners = this.listeners.length;\n            this.updateState(this.numberOfListeners > 0);\n        }\n    };\n    ListenersManager.prototype.updateState = function (newActiveState) {\n        if (this.isActive === newActiveState) {\n            return;\n        }\n        this.isActive = newActiveState;\n        for (var i = 0, len = this.stateListeners.length; i < len; i++) {\n            this.stateListeners[i](this.isActive);\n        }\n    };\n    return ListenersManager;\n}());\nexports.ListenersManager = ListenersManager;\n\n\n/***/ })\n/******/ ]);\n\n/***/ })\n/******/ ]);'},function(module,exports,__webpack_require__){var insightsClientInstance=__webpack_require__(81).getInsightsClientInstance(window.gogData.insightsCollectorUrl,window.gogData.clientId),pageViewEvent=__webpack_require__(82).pageViewEvent;window.gogData.features.insightsWebsitePageView&&pageViewEvent(insightsClientInstance)},function(module,exports,__webpack_require__){var e;e=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2);e.InsightsClient=n.InsightsClient;const i=r(9);e.VisitIdProvider=i.VisitIdProvider;const s=r(11);e.getInsightsClientInstance=s.getInsightsClientInstance},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(3),i=r(9),s=r(10);e.InsightsClient=class{constructor(t,e,r=s.authenticationProvider,n=new i.VisitIdProvider){this.collectorUrl=t,this.clientId=e,this.authenticationProvider=r,this.visit=n,this.instanceIdProvider=new i.InstanceIdProvider}async sendEvent(t,e){return e&&!e.userAction||this.onUserAction(),this.sendData(new n.EnrichedEvent(t))}onUserAction(){this.visit.prolongExpiryDate()}async sendData(t){const e=new Headers({"X-Visit":this.visit.getId(),"X-Instance":this.instanceIdProvider.getId(),"Content-Type":"application/json"});return await this.authenticationProvider().then(t=>{e.append("Authorization",`Bearer ${t}`)}).catch(()=>{}),fetch(`${this.collectorUrl}/clients/${this.clientId}/events`,{method:"POST",credentials:"include",headers:e,body:JSON.stringify(t)})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4);class i{constructor(t){t.hasOwnProperty("data")&&(this.data=t.data),t.hasOwnProperty("meta")&&(this.meta=t.meta),t.hasOwnProperty("userId")&&(this.user_id=t.userId),t.hasOwnProperty("visitId")&&(this.visit_id=t.visitId),t.hasOwnProperty("runtimeId")&&(this.runtime_id=t.runtimeId),t.hasOwnProperty("sessionId")&&(this.session_id=t.sessionId),this.type=t.type,this.date=(new Date).toISOString(),this.uuid=n.v4()}serialize(){return JSON.stringify(this,(t,e)=>i.isValueBlacklisted(e)?void 0:e)}static isValueBlacklisted(t){return null===t||""===t}}e.EnrichedEvent=i},function(t,e,r){var n=r(5),i=r(8),s=i;s.v1=n,s.v4=i,t.exports=s},function(t,e,r){var n,i,s=r(6),o=r(7),a=0,c=0;t.exports=function(t,e,r){var d=e&&r||0,u=e||[],l=(t=t||{}).node||n,f=void 0!==t.clockseq?t.clockseq:i;if(null==l||null==f){var p=s();null==l&&(l=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:c+1,y=h-a+(v-c)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||h>a)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,c=v,i=f;var g=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;u[d++]=g>>>24&255,u[d++]=g>>>16&255,u[d++]=g>>>8&255,u[d++]=255&g;var I=h/4294967296*1e4&268435455;u[d++]=I>>>8&255,u[d++]=255&I,u[d++]=I>>>24&15|16,u[d++]=I>>>16&255,u[d++]=f>>>8|128,u[d++]=255&f;for(var w=0;w<6;++w)u[d+w]=l[w];return e||o(u)}},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,i=r;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")}},function(t,e,r){var n=r(6),i=r(7);t.exports=function(t,e,r){var s=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;++a)e[s+a]=o[a];return e||i(o)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4);class i{constructor(t,e){this.storagePrefix=t,this.ttl=e,this.expiryDate=0,this.id="",this.restoreData()}getId(){return this.id&&!this.isIdExpired()||this.generateId(),this.id}prolongExpiryDate(){this.expiryDate=(new Date).getTime()+this.ttl,this.storeData()}generateId(){this.id=n.v4(),this.prolongExpiryDate()}isIdExpired(){return this.expiryDate<(new Date).getTime()}storeData(){try{window.localStorage.setItem(`${this.storagePrefix}_id`,this.id),window.localStorage.setItem(`${this.storagePrefix}_expiryDate`,this.expiryDate.toString())}catch(t){}}restoreData(){try{this.id=window.localStorage.getItem(`${this.storagePrefix}_id`)||"",this.expiryDate=parseInt(window.localStorage.getItem(`${this.storagePrefix}_expiryDate`)||"0")}catch(t){}}}e.StoredIdProvider=i,e.VisitIdProvider=class extends i{constructor(){super("insightsVisit",18e5)}},e.InstanceIdProvider=class extends i{constructor(){super("insightsInstance",31536e7)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.authenticationProvider=(async()=>new Promise((t,e)=>{"string"==typeof window.gogAccessToken?t(window.gogAccessToken):e()}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2);let i=new Map;e.getInsightsClientInstance=((t,e,r,s)=>{let o=i.get([t,e,r,s]);return o||(o=new n.InsightsClient(t,e,r,s),i.set([t,e,r,s],o)),o})}])},module.exports=e()},function(module,exports,__webpack_require__){var factory;factory=function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const pageViewEvent_1=__webpack_require__(2);exports.pageViewEvent=pageViewEvent_1.pageViewEvent;const cartEvents_1=__webpack_require__(4);exports.cartEvents=cartEvents_1.cartEvents;const wishlistEvents_1=__webpack_require__(10);exports.wishlistEvents=wishlistEvents_1.wishlistEvents;const productTileClicked_1=__webpack_require__(11);exports.productTileClickedEvent=productTileClicked_1.productTileClickedEvent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const metaData_1=__webpack_require__(3);exports.pageViewEvent=(clientInstance=>{clientInstance.sendEvent({type:"page_visited",meta:metaData_1.getMetaWithReferral()})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const getDefaultMeta=()=>({url:{protocol:window.location.protocol,hostname:window.location.hostname,page_path:window.location.pathname,query_params:window.location.search,anchor_params:window.location.hash}});exports.getDefaultMeta=getDefaultMeta;exports.getMetaWithReferral=(()=>Object.assign(getDefaultMeta(),{referral:document.referrer}))},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const lodash_clonedeep_1=__importDefault(__webpack_require__(5)),productUtils_1=__webpack_require__(8),metaData_1=__webpack_require__(3),eventStore_1=__webpack_require__(9);exports.cartEvents=((clientInstance,products,currency,currentCartContent)=>{const previousEvent=eventStore_1.eventStore({cartContent:currentCartContent.map(Number)}),sendAddToCartEvent=eventData=>{const cartProducts=eventData.cartContent.map(Number);productUtils_1.isEqual(previousEvent.get().cartContent,cartProducts)||(productUtils_1.productWasAdded(cartProducts,previousEvent.get().cartContent)&&sendCartEvents(eventData),previousEvent.set(lodash_clonedeep_1.default(eventData)))};void 0!==typeof window.gogEventBus&&window.gogEventBus.subscribe("cart","updated",sendAddToCartEvent);const sendCartEvents=eventData=>{productUtils_1.filterDifferentProducts(eventData.cartContent,previousEvent.get().cartContent).forEach(product=>sendInsightsCartEvent(product,eventData))},sendInsightsCartEvent=(productId,eventData)=>{const newProduct=productUtils_1.findProduct(productId,products);newProduct&&clientInstance.sendEvent({type:"item_added_to_cart",data:{product_id:newProduct.id.toString(),final_value:newProduct.price.finalAmount,currency:currency,base_value:newProduct.price.baseAmount,cart:{product_id:eventData.cartContent.map(String),final_value:getCartValue(eventData,"finalAmount"),base_value:getCartValue(eventData,"baseAmount")}},meta:metaData_1.getDefaultMeta()})},getCartValue=(eventData,key)=>{return eventData.cartContent.reduce((accumulator,productId)=>{const product=productUtils_1.findProduct(productId,products);return product?accumulator+parseFloat(product.price[key]):accumulator},0).toString()}})},function(module,exports,__webpack_require__){(function(global,module){var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",boolTag="[object Boolean]",dateTag="[object Date]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){this.__data__=new ListCache(entries)}function arrayLikeKeys(value,inherited){var result=isArray(value)||function(value){return function(value){return function(value){return!!value&&"object"==typeof value}(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return function(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return function(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=function(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:(proto=getPrototype(object),isObject(proto)?objectCreate(proto):{});var proto}(isFunc?{}:value),!isDeep)return function(source,object){return copyObject(source,getSymbols(source),object)}(value,function(object,source){return object&&copyObject(source,keys(source),object)}(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return function(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(object,isDeep);case mapTag:return function(map,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map),addMapEntry,new map.constructor)}(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return(result=new(regexp=object).constructor(regexp.source,reFlags.exec(regexp))).lastIndex=regexp.lastIndex,result;case setTag:return function(set,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(setToArray(set),!0):setToArray(set),addSetEntry,new set.constructor)}(object,isDeep,cloneFunc);case symbolTag:return symbol=object,symbolValueOf?Object(symbolValueOf.call(symbol)):{}}var symbol;var regexp,result}(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?function(object){return function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}(value):keys(value);return function(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&!1!==iteratee(array[index],index,array););}(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))}),result}function baseIsNative(value){return!(!isObject(value)||maskSrcKey&&maskSrcKey in value)&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value))}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){return this.__data__[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function(){this.__data__=[]},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),0))},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){return getMapData(this,key).set(key,value),this},Stack.prototype.clear=function(){this.__data__=new ListCache},Stack.prototype.delete=function(key){return this.__data__.delete(key)},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this};var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):function(){return[]},getTag=function(value){return objectToString.call(value)};function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function(){return!1};function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}module.exports=function(value){return baseClone(value,!0,!0)}}).call(this,__webpack_require__(6),__webpack_require__(7)(module))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.findProduct=((productId,products)=>products.find(product=>product.id.toString()===productId.toString()));exports.isEqual=((obj1,obj2)=>JSON.stringify(obj1)===JSON.stringify(obj2));exports.productWasAdded=((currentList,previousList)=>previousList.length<currentList.length);exports.filterDifferentProducts=((currentList,previousList)=>currentList.filter(productId=>!previousList.includes(productId)))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventStore=(initialEventData=>{let currentData=initialEventData;return{get:()=>currentData,set:newData=>{currentData=newData}}})},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const lodash_clonedeep_1=__importDefault(__webpack_require__(5)),productUtils_1=__webpack_require__(8),metaData_1=__webpack_require__(3),eventStore_1=__webpack_require__(9);exports.wishlistEvents=((clientInstance,products,currentWishlistContents)=>{const previousEvent=eventStore_1.eventStore({wishlistedProducts:currentWishlistContents.map(Number)}),sendWishlistProductsChangedEvents=eventData=>{const wishlistedProducts=eventData.wishlistedProducts.map(Number);if(!productUtils_1.isEqual(previousEvent.get().wishlistedProducts,wishlistedProducts)){if(productUtils_1.productWasAdded(wishlistedProducts,previousEvent.get().wishlistedProducts)){const[newWishlistedProduct]=productUtils_1.filterDifferentProducts(wishlistedProducts,previousEvent.get().wishlistedProducts);sendInsightsWishlistProductEvent(newWishlistedProduct,"product_added_to_wishlist")}else{const[removedWishlistedProduct]=productUtils_1.filterDifferentProducts(previousEvent.get().wishlistedProducts,wishlistedProducts);sendInsightsWishlistProductEvent(removedWishlistedProduct,"product_removed_from_wishlist")}previousEvent.get().wishlistedProducts=lodash_clonedeep_1.default(eventData).wishlistedProducts.map(Number)}};void 0!==typeof window.gogEventBus&&window.gogEventBus.subscribe("wishlist","updated",sendWishlistProductsChangedEvents);const sendInsightsWishlistProductEvent=(productId,eventName)=>{const product=productUtils_1.findProduct(productId,products);product&&clientInstance.sendEvent({type:eventName,data:{product_id:product.id.toString()},meta:metaData_1.getDefaultMeta()})}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const metaData_1=__webpack_require__(3);exports.productTileClickedEvent=((clientInstance,eventBus=window.gogEventBus)=>{eventBus.subscribe("product","opened",eventData=>{const insightsEventData={product_id:eventData.productData.id};"string"==typeof eventData.sectionId&&(insightsEventData.context=eventData.sectionId),clientInstance.sendEvent({type:"product_tile_clicked",data:insightsEventData,meta:metaData_1.getDefaultMeta()})})})}])},module.exports=factory()}]);